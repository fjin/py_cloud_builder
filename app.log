2025-03-12 13:50:18 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-03-12 13:50:18 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-03-12 13:50:18 - uvicorn.error - INFO - Started reloader process [76541] using StatReload
2025-03-12 13:50:18 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-12 13:50:19 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-12 13:50:19 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-12 13:50:19 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-12 13:50:19 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-12 13:50:19 - uvicorn.error - INFO - Started server process [76559]
2025-03-12 13:50:19 - uvicorn.error - INFO - Waiting for application startup.
2025-03-12 13:50:19 - uvicorn.error - INFO - Application startup complete.
2025-03-12 13:50:34 - services.build_service - INFO - Starting build with build_id: 52a18945-f3b4-403e-b307-d2265cce2b17
2025-03-12 13:50:34 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-12 13:50:34 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-12 13:50:34 - services.build_service - INFO - Executing task: test-sg, resource: test-sg
2025-03-12 13:50:34 - services.base_service - DEBUG - Loading configuration for resource: test-sg, environment: np
2025-03-12 13:50:34 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-12 13:50:34 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-12 13:50:34 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-12 13:50:34 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-12 13:50:34 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-12 13:50:34 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg
2025-03-12 13:50:34 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-12 13:50:34 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-12 13:50:34 - services.base_service - DEBUG - Template rendered successfully.
2025-03-12 13:50:34 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-12 13:50:34 - services.base_service - DEBUG - Template rendered successfully.
2025-03-12 13:50:34 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-12 13:51:11 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ... 
Deploying test-sg-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - test-sg-stack

2025-03-12 13:51:11 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg-stack\n', 'uuid': '52a18945-f3b4-403e-b307-d2265cce2b17'}
2025-03-12 13:51:11 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-12 13:51:11 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-12 13:51:11 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-12 13:51:11 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-12 13:51:11 - services.base_service - DEBUG - Template rendered successfully.
2025-03-12 13:51:11 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-12 13:51:12 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Check CloudFormation Stack: test-sg-stack
CREATE_COMPLETE

2025-03-12 13:51:12 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': '52a18945-f3b4-403e-b307-d2265cce2b17'}
2025-03-12 13:51:12 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-12 13:51:12 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-12 13:51:12 - services.build_service - INFO - Executing task: test-sg2, resource: test-sg2
2025-03-12 13:51:12 - services.base_service - DEBUG - Loading configuration for resource: test-sg2, environment: np
2025-03-12 13:51:12 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-12 13:51:12 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-12 13:51:12 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-12 13:51:12 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-12 13:51:12 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-12 13:51:12 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg2
2025-03-12 13:51:12 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-12 13:51:12 - services.base_service - DEBUG - Rendering template: resources/test-sg2/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-12 13:51:12 - services.base_service - DEBUG - Template rendered successfully.
2025-03-12 13:51:12 - services.base_service - DEBUG - Rendering template: resources/test-sg2/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-12 13:51:12 - services.base_service - DEBUG - Template rendered successfully.
2025-03-12 13:51:12 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/deploy_cfn.sh
2025-03-12 13:51:48 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ... 
Deploying test-sg2-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - test-sg2-stack

2025-03-12 13:51:48 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg2-stack\n', 'uuid': '52a18945-f3b4-403e-b307-d2265cce2b17'}
2025-03-12 13:51:48 - services.base_service - DEBUG - Updating status for task: test-sg2, step: deploy cfn
2025-03-12 13:51:48 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-12 13:51:48 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-12 13:51:48 - services.base_service - DEBUG - Rendering template: resources/test-sg2/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-12 13:51:48 - services.base_service - DEBUG - Template rendered successfully.
2025-03-12 13:51:48 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/status.sh
2025-03-12 13:51:49 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ...
Check CloudFormation Stack: test-sg2-stack
CREATE_COMPLETE

2025-03-12 13:51:49 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': '52a18945-f3b4-403e-b307-d2265cce2b17'}
2025-03-12 13:51:49 - services.base_service - DEBUG - Updating status for task: test-sg2, step: status
2025-03-12 13:51:49 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-12 13:51:49 - services.base_service - DEBUG - Updating application record with build_id: 52a18945-f3b4-403e-b307-d2265cce2b17, changes: {'status': 'success'}
2025-03-12 13:51:49 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x1058e5a90>
2025-03-12 13:51:49 - uvicorn.access - INFO - 127.0.0.1:61292 - "POST /build/ HTTP/1.1" 200
2025-03-12 13:52:34 - uvicorn.access - INFO - 127.0.0.1:61306 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-12 14:25:16 - uvicorn.error - WARNING - StatReload detected changes in 'models.py'. Reloading...
2025-03-12 14:25:17 - uvicorn.error - INFO - Shutting down
2025-03-12 14:25:17 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-12 14:25:17 - uvicorn.error - INFO - Application shutdown complete.
2025-03-12 14:25:17 - uvicorn.error - INFO - Finished server process [76559]
2025-03-12 14:25:17 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-12 14:25:17 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-12 14:25:17 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-12 14:25:17 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-12 14:25:17 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-12 14:25:17 - uvicorn.error - INFO - Started server process [47059]
2025-03-12 14:25:17 - uvicorn.error - INFO - Waiting for application startup.
2025-03-12 14:25:17 - uvicorn.error - INFO - Application startup complete.
2025-03-12 14:26:03 - uvicorn.error - WARNING - StatReload detected changes in 'services/status_service.py'. Reloading...
2025-03-12 14:26:03 - uvicorn.error - INFO - Shutting down
2025-03-12 14:26:03 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-12 14:26:03 - uvicorn.error - INFO - Application shutdown complete.
2025-03-12 14:26:03 - uvicorn.error - INFO - Finished server process [47059]
2025-03-12 14:26:03 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-12 14:26:03 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-12 14:26:03 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-12 14:26:03 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-12 14:26:03 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-12 14:26:03 - uvicorn.error - INFO - Started server process [50614]
2025-03-12 14:26:03 - uvicorn.error - INFO - Waiting for application startup.
2025-03-12 14:26:03 - uvicorn.error - INFO - Application startup complete.
2025-03-12 14:26:41 - uvicorn.error - WARNING - StatReload detected changes in 'services/status_service.py'. Reloading...
2025-03-12 14:26:41 - uvicorn.error - INFO - Shutting down
2025-03-12 14:26:41 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-12 14:26:41 - uvicorn.error - INFO - Application shutdown complete.
2025-03-12 14:26:41 - uvicorn.error - INFO - Finished server process [50614]
2025-03-12 14:26:41 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-12 14:26:42 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-12 14:26:42 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-12 14:26:42 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-12 14:26:42 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-12 14:26:42 - uvicorn.error - INFO - Started server process [53688]
2025-03-12 14:26:42 - uvicorn.error - INFO - Waiting for application startup.
2025-03-12 14:26:42 - uvicorn.error - INFO - Application startup complete.
2025-03-12 14:27:07 - services.status_service - DEBUG - Getting latest application record for: test-infra
2025-03-12 14:27:07 - uvicorn.access - INFO - 127.0.0.1:61788 - "GET /status/?application_name=test-infra HTTP/1.1" 500
2025-03-12 14:27:07 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: applications.timestamp

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 962, in run
    result = context.run(func, *args)
  File "/Users/fan.jin/work/py_builder/routes/status.py", line 12, in get_status
    result = status_service.get_status(application_name, db)
  File "/Users/fan.jin/work/py_builder/services/status_service.py", line 20, in get_status
    .first()
     ~~~~~^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: applications.timestamp
[SQL: SELECT applications.uuid AS applications_uuid, applications.application_name AS applications_application_name, applications.action AS applications_action, applications.status AS applications_status, applications.timestamp AS applications_timestamp 
FROM applications 
WHERE applications.application_name = ? ORDER BY applications.timestamp DESC
 LIMIT ? OFFSET ?]
[parameters: ('test-infra', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-03-12 14:27:22 - uvicorn.error - INFO - Shutting down
2025-03-12 14:27:22 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-12 14:27:22 - uvicorn.error - INFO - Application shutdown complete.
2025-03-12 14:27:22 - uvicorn.error - INFO - Finished server process [53688]
2025-03-12 14:27:22 - uvicorn.error - INFO - Stopping reloader process [76541]
2025-03-12 14:27:23 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-03-12 14:27:23 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-03-12 14:27:23 - uvicorn.error - INFO - Started reloader process [56948] using StatReload
2025-03-12 14:27:23 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-12 14:27:24 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-12 14:27:24 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-12 14:27:24 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-12 14:27:24 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-12 14:27:24 - uvicorn.error - INFO - Started server process [56966]
2025-03-12 14:27:24 - uvicorn.error - INFO - Waiting for application startup.
2025-03-12 14:27:24 - uvicorn.error - INFO - Application startup complete.
2025-03-12 14:27:28 - services.status_service - DEBUG - Getting latest application record for: test-infra
2025-03-12 14:27:28 - uvicorn.access - INFO - 127.0.0.1:61790 - "GET /status/?application_name=test-infra HTTP/1.1" 500
2025-03-12 14:27:28 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.OperationalError: no such column: applications.timestamp

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 962, in run
    result = context.run(func, *args)
  File "/Users/fan.jin/work/py_builder/routes/status.py", line 12, in get_status
    result = status_service.get_status(application_name, db)
  File "/Users/fan.jin/work/py_builder/services/status_service.py", line 20, in get_status
    .first()
     ~~~~~^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2754, in first
    return self.limit(1)._iter().first()  # type: ignore
           ~~~~~~~~~~~~~~~~~~~^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/query.py", line 2853, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
                                                  ~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
        params,
        ^^^^^^^
        execution_options={"_sa_orm_load_options": self.load_options},
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/context.py", line 305, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.OperationalError: (sqlite3.OperationalError) no such column: applications.timestamp
[SQL: SELECT applications.uuid AS applications_uuid, applications.application_name AS applications_application_name, applications.action AS applications_action, applications.status AS applications_status, applications.timestamp AS applications_timestamp 
FROM applications 
WHERE applications.application_name = ? ORDER BY applications.timestamp DESC
 LIMIT ? OFFSET ?]
[parameters: ('test-infra', 1, 0)]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-03-12 14:27:33 - uvicorn.error - INFO - Shutting down
2025-03-12 14:27:33 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-12 14:27:33 - uvicorn.error - INFO - Application shutdown complete.
2025-03-12 14:27:33 - uvicorn.error - INFO - Finished server process [56966]
2025-03-12 14:27:33 - uvicorn.error - INFO - Stopping reloader process [56948]
2025-03-12 14:28:28 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-03-12 14:28:28 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-03-12 14:28:28 - uvicorn.error - INFO - Started reloader process [61993] using StatReload
2025-03-12 14:28:28 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-12 14:28:28 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-12 14:28:28 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-12 14:28:28 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-12 14:28:28 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-12 14:28:28 - uvicorn.error - INFO - Started server process [61995]
2025-03-12 14:28:28 - uvicorn.error - INFO - Waiting for application startup.
2025-03-12 14:28:28 - uvicorn.error - INFO - Application startup complete.
2025-03-12 14:28:33 - services.status_service - DEBUG - Getting latest application record for: test-infra
2025-03-12 14:28:33 - services.status_service - ERROR - Application 'test-infra' not found.
2025-03-12 14:28:33 - uvicorn.access - INFO - 127.0.0.1:61795 - "GET /status/?application_name=test-infra HTTP/1.1" 404
2025-03-12 14:28:41 - services.build_service - INFO - Starting build with build_id: ae45033b-4366-4ab8-a003-17b00b21ef15
2025-03-12 14:28:41 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-12 14:28:41 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-12 14:28:41 - services.build_service - INFO - Executing task: test-sg, resource: test-sg
2025-03-12 14:28:41 - services.base_service - DEBUG - Loading configuration for resource: test-sg, environment: np
2025-03-12 14:28:41 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-12 14:28:41 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-12 14:28:41 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-12 14:28:41 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-12 14:28:41 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-12 14:28:41 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg
2025-03-12 14:28:41 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-12 14:28:41 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-12 14:28:41 - services.base_service - DEBUG - Template rendered successfully.
2025-03-12 14:28:41 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-12 14:28:41 - services.base_service - DEBUG - Template rendered successfully.
2025-03-12 14:28:41 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-12 14:28:43 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ... 
Deploying test-sg-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack test-sg-stack is up to date

2025-03-12 14:28:43 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}
2025-03-12 14:28:43 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-12 14:28:43 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-12 14:28:43 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-12 14:28:43 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-12 14:28:43 - services.base_service - DEBUG - Template rendered successfully.
2025-03-12 14:28:43 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-12 14:28:43 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Check CloudFormation Stack: test-sg-stack
CREATE_COMPLETE

2025-03-12 14:28:43 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}
2025-03-12 14:28:43 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-12 14:28:43 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-12 14:28:43 - services.build_service - INFO - Executing task: test-sg2, resource: test-sg2
2025-03-12 14:28:43 - services.base_service - DEBUG - Loading configuration for resource: test-sg2, environment: np
2025-03-12 14:28:43 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-12 14:28:44 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-12 14:28:44 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-12 14:28:44 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-12 14:28:44 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-12 14:28:44 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg2
2025-03-12 14:28:44 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-12 14:28:44 - services.base_service - DEBUG - Rendering template: resources/test-sg2/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-12 14:28:44 - services.base_service - DEBUG - Template rendered successfully.
2025-03-12 14:28:44 - services.base_service - DEBUG - Rendering template: resources/test-sg2/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-12 14:28:44 - services.base_service - DEBUG - Template rendered successfully.
2025-03-12 14:28:44 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/deploy_cfn.sh
2025-03-12 14:28:45 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ... 
Deploying test-sg2-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack test-sg2-stack is up to date

2025-03-12 14:28:45 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg2-stack is up to date\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}
2025-03-12 14:28:45 - services.base_service - DEBUG - Updating status for task: test-sg2, step: deploy cfn
2025-03-12 14:28:45 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-12 14:28:45 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-12 14:28:45 - services.base_service - DEBUG - Rendering template: resources/test-sg2/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-12 14:28:45 - services.base_service - DEBUG - Template rendered successfully.
2025-03-12 14:28:45 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/status.sh
2025-03-12 14:28:46 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ...
Check CloudFormation Stack: test-sg2-stack
CREATE_COMPLETE

2025-03-12 14:28:46 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}
2025-03-12 14:28:46 - services.base_service - DEBUG - Updating status for task: test-sg2, step: status
2025-03-12 14:28:46 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-12 14:28:46 - services.base_service - DEBUG - Updating application record with build_id: ae45033b-4366-4ab8-a003-17b00b21ef15, changes: {'status': 'success'}
2025-03-12 14:28:46 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x108439d30>
2025-03-12 14:28:46 - uvicorn.access - INFO - 127.0.0.1:61796 - "POST /build/ HTTP/1.1" 200
2025-03-12 14:28:52 - services.status_service - DEBUG - Getting latest application record for: test-infra
2025-03-12 14:28:52 - services.status_service - INFO - Found application record for 'test-infra' with UUID: ae45033b-4366-4ab8-a003-17b00b21ef15
2025-03-12 14:28:52 - services.status_service - DEBUG - Retrieved 4 step(s) for application UUID: ae45033b-4366-4ab8-a003-17b00b21ef15
2025-03-12 14:28:52 - services.status_service - DEBUG - Status response constructed: {'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15', 'application_name': 'test-infra', 'action': 'build', 'status': 'success', 'timestamp': '2025-03-12T03:28:41.783906', 'steps': [{'id': 1, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, 'timestamp': '2025-03-12T14:28:43.147036', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, {'id': 2, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, 'timestamp': '2025-03-12T14:28:43.996685', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, {'id': 3, 'task_name': 'test-sg2', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg2-stack is up to date\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, 'timestamp': '2025-03-12T14:28:45.235377', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, {'id': 4, 'task_name': 'test-sg2', 'step_name': 'status', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, 'timestamp': '2025-03-12T14:28:46.038379', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}]}
2025-03-12 14:28:52 - uvicorn.access - INFO - 127.0.0.1:61805 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-12 14:29:15 - services.unbuild_service - INFO - Starting unbuild for component: test-infra
2025-03-12 14:29:15 - services.unbuild_service - INFO - Found application record for component: test-infra with build_id: ae45033b-4366-4ab8-a003-17b00b21ef15
2025-03-12 14:29:15 - services.base_service - DEBUG - Updating application record with build_id: ae45033b-4366-4ab8-a003-17b00b21ef15, changes: {'action': 'unbuild', 'status': 'started'}
2025-03-12 14:29:15 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x108495950>
2025-03-12 14:29:15 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-12 14:29:15 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-12 14:29:15 - services.unbuild_service - INFO - Executing unbuild task: test-sg
2025-03-12 14:29:15 - services.base_service - DEBUG - Loading configuration for resource: test-sg, environment: np
2025-03-12 14:29:15 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-12 14:29:15 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-12 14:29:15 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-12 14:29:15 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-12 14:29:15 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-12 14:29:15 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg
2025-03-12 14:29:15 - services.unbuild_service - DEBUG - Destroying resource 'test-sg' using template 'resources/test-sg/destroy.sh.j2'
2025-03-12 14:29:15 - services.base_service - DEBUG - Rendering template: resources/test-sg/destroy.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-12 14:29:15 - services.base_service - DEBUG - Template rendered successfully.
2025-03-12 14:29:15 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/destroy.sh
2025-03-12 14:29:25 - services.unbuild_service - INFO - Starting unbuild for component: test-infra
2025-03-12 14:29:25 - services.unbuild_service - INFO - Found application record for component: test-infra with build_id: ae45033b-4366-4ab8-a003-17b00b21ef15
2025-03-12 14:29:25 - services.base_service - DEBUG - Updating application record with build_id: ae45033b-4366-4ab8-a003-17b00b21ef15, changes: {'action': 'unbuild', 'status': 'started'}
2025-03-12 14:29:25 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x10872cfc0>
2025-03-12 14:29:25 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-12 14:29:25 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-12 14:29:25 - services.unbuild_service - INFO - Executing unbuild task: test-sg
2025-03-12 14:29:25 - services.base_service - DEBUG - Loading configuration for resource: test-sg, environment: np
2025-03-12 14:29:25 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-12 14:29:25 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-12 14:29:25 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-12 14:29:25 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-12 14:29:25 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-12 14:29:25 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg
2025-03-12 14:29:25 - services.unbuild_service - DEBUG - Destroying resource 'test-sg' using template 'resources/test-sg/destroy.sh.j2'
2025-03-12 14:29:25 - services.base_service - DEBUG - Rendering template: resources/test-sg/destroy.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-12 14:29:25 - services.base_service - DEBUG - Template rendered successfully.
2025-03-12 14:29:25 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/destroy.sh
2025-03-12 14:29:27 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Deleting CloudFormation Stack: test-sg-stack
Waiting for stack deletion to complete...
Stack test-sg-stack has been successfully deleted.

2025-03-12 14:29:27 - services.unbuild_service - DEBUG - Destroy task result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: test-sg-stack\nWaiting for stack deletion to complete...\nStack test-sg-stack has been successfully deleted.\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}
2025-03-12 14:29:27 - services.base_service - DEBUG - Updating status for task: test-sg, step: test-sg
2025-03-12 14:29:27 - services.base_service - DEBUG - Status updated successfully for step: test-sg
2025-03-12 14:29:27 - services.unbuild_service - INFO - Executing unbuild task: test-sg2
2025-03-12 14:29:27 - services.base_service - DEBUG - Loading configuration for resource: test-sg2, environment: np
2025-03-12 14:29:27 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-12 14:29:27 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-12 14:29:27 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-12 14:29:27 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-12 14:29:27 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-12 14:29:27 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg2
2025-03-12 14:29:27 - services.unbuild_service - DEBUG - Destroying resource 'test-sg2' using template 'resources/test-sg2/destroy.sh.j2'
2025-03-12 14:29:27 - services.base_service - DEBUG - Rendering template: resources/test-sg2/destroy.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-12 14:29:27 - services.base_service - DEBUG - Template rendered successfully.
2025-03-12 14:29:27 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/destroy.sh
2025-03-12 14:29:30 - services.status_service - DEBUG - Getting latest application record for: test-infra
2025-03-12 14:29:30 - services.status_service - INFO - Found application record for 'test-infra' with UUID: ae45033b-4366-4ab8-a003-17b00b21ef15
2025-03-12 14:29:30 - services.status_service - DEBUG - Retrieved 5 step(s) for application UUID: ae45033b-4366-4ab8-a003-17b00b21ef15
2025-03-12 14:29:30 - services.status_service - DEBUG - Status response constructed: {'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15', 'application_name': 'test-infra', 'action': 'unbuild', 'status': 'started', 'timestamp': '2025-03-12T03:28:41.783906', 'steps': [{'id': 1, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, 'timestamp': '2025-03-12T14:28:43.147036', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, {'id': 2, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, 'timestamp': '2025-03-12T14:28:43.996685', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, {'id': 3, 'task_name': 'test-sg2', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg2-stack is up to date\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, 'timestamp': '2025-03-12T14:28:45.235377', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, {'id': 4, 'task_name': 'test-sg2', 'step_name': 'status', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, 'timestamp': '2025-03-12T14:28:46.038379', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, {'id': 5, 'task_name': 'test-sg', 'step_name': 'test-sg', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: test-sg-stack\nWaiting for stack deletion to complete...\nStack test-sg-stack has been successfully deleted.\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, 'timestamp': '2025-03-12T14:29:27.002146', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}]}
2025-03-12 14:29:30 - uvicorn.access - INFO - 127.0.0.1:61830 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-12 14:29:33 - services.status_service - DEBUG - Getting latest application record for: test-infra
2025-03-12 14:29:33 - services.status_service - INFO - Found application record for 'test-infra' with UUID: ae45033b-4366-4ab8-a003-17b00b21ef15
2025-03-12 14:29:33 - services.status_service - DEBUG - Retrieved 5 step(s) for application UUID: ae45033b-4366-4ab8-a003-17b00b21ef15
2025-03-12 14:29:33 - services.status_service - DEBUG - Status response constructed: {'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15', 'application_name': 'test-infra', 'action': 'unbuild', 'status': 'started', 'timestamp': '2025-03-12T03:28:41.783906', 'steps': [{'id': 1, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, 'timestamp': '2025-03-12T14:28:43.147036', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, {'id': 2, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, 'timestamp': '2025-03-12T14:28:43.996685', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, {'id': 3, 'task_name': 'test-sg2', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg2-stack is up to date\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, 'timestamp': '2025-03-12T14:28:45.235377', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, {'id': 4, 'task_name': 'test-sg2', 'step_name': 'status', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, 'timestamp': '2025-03-12T14:28:46.038379', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, {'id': 5, 'task_name': 'test-sg', 'step_name': 'test-sg', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: test-sg-stack\nWaiting for stack deletion to complete...\nStack test-sg-stack has been successfully deleted.\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, 'timestamp': '2025-03-12T14:29:27.002146', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}]}
2025-03-12 14:29:33 - uvicorn.access - INFO - 127.0.0.1:61831 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-12 14:29:45 - services.status_service - DEBUG - Getting latest application record for: test-infra
2025-03-12 14:29:45 - services.status_service - INFO - Found application record for 'test-infra' with UUID: ae45033b-4366-4ab8-a003-17b00b21ef15
2025-03-12 14:29:45 - services.status_service - DEBUG - Retrieved 5 step(s) for application UUID: ae45033b-4366-4ab8-a003-17b00b21ef15
2025-03-12 14:29:45 - services.status_service - DEBUG - Status response constructed: {'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15', 'application_name': 'test-infra', 'action': 'unbuild', 'status': 'started', 'timestamp': '2025-03-12T03:28:41.783906', 'steps': [{'id': 1, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, 'timestamp': '2025-03-12T14:28:43.147036', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, {'id': 2, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, 'timestamp': '2025-03-12T14:28:43.996685', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, {'id': 3, 'task_name': 'test-sg2', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg2-stack is up to date\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, 'timestamp': '2025-03-12T14:28:45.235377', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, {'id': 4, 'task_name': 'test-sg2', 'step_name': 'status', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, 'timestamp': '2025-03-12T14:28:46.038379', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, {'id': 5, 'task_name': 'test-sg', 'step_name': 'test-sg', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: test-sg-stack\nWaiting for stack deletion to complete...\nStack test-sg-stack has been successfully deleted.\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}, 'timestamp': '2025-03-12T14:29:27.002146', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}]}
2025-03-12 14:29:45 - uvicorn.access - INFO - 127.0.0.1:61834 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-12 14:29:47 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Deleting CloudFormation Stack: test-sg-stack
Waiting for stack deletion to complete...
Stack test-sg-stack has been successfully deleted.

2025-03-12 14:29:47 - services.unbuild_service - DEBUG - Destroy task result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: test-sg-stack\nWaiting for stack deletion to complete...\nStack test-sg-stack has been successfully deleted.\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}
2025-03-12 14:29:47 - services.base_service - DEBUG - Updating status for task: test-sg, step: test-sg
2025-03-12 14:29:47 - services.base_service - DEBUG - Status updated successfully for step: test-sg
2025-03-12 14:29:47 - services.unbuild_service - INFO - Executing unbuild task: test-sg2
2025-03-12 14:29:47 - services.base_service - DEBUG - Loading configuration for resource: test-sg2, environment: np
2025-03-12 14:29:47 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-12 14:29:47 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-12 14:29:47 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-12 14:29:47 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-12 14:29:47 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-12 14:29:47 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg2
2025-03-12 14:29:47 - services.unbuild_service - DEBUG - Destroying resource 'test-sg2' using template 'resources/test-sg2/destroy.sh.j2'
2025-03-12 14:29:47 - services.base_service - DEBUG - Rendering template: resources/test-sg2/destroy.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-12 14:29:47 - services.base_service - DEBUG - Template rendered successfully.
2025-03-12 14:29:47 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/destroy.sh
2025-03-12 14:29:49 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ...
Deleting CloudFormation Stack: test-sg2-stack
Waiting for stack deletion to complete...
Stack test-sg2-stack has been successfully deleted.

2025-03-12 14:29:49 - services.unbuild_service - DEBUG - Destroy task result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: test-sg2-stack\nWaiting for stack deletion to complete...\nStack test-sg2-stack has been successfully deleted.\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}
2025-03-12 14:29:49 - services.base_service - DEBUG - Updating status for task: test-sg2, step: test-sg2
2025-03-12 14:29:49 - services.base_service - DEBUG - Status updated successfully for step: test-sg2
2025-03-12 14:29:49 - services.unbuild_service - INFO - Unbuild process completed successfully for component: test-infra
2025-03-12 14:29:49 - services.base_service - DEBUG - Deleting application record with build_id: ae45033b-4366-4ab8-a003-17b00b21ef15
2025-03-12 14:29:49 - services.base_service - DEBUG - Application record with build_id ae45033b-4366-4ab8-a003-17b00b21ef15 deleted.
2025-03-12 14:29:49 - uvicorn.access - INFO - 127.0.0.1:61814 - "POST /unbuild/ HTTP/1.1" 200
2025-03-12 14:29:59 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ...
Deleting CloudFormation Stack: test-sg2-stack
Waiting for stack deletion to complete...
Stack test-sg2-stack has been successfully deleted.

2025-03-12 14:29:59 - services.unbuild_service - DEBUG - Destroy task result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: test-sg2-stack\nWaiting for stack deletion to complete...\nStack test-sg2-stack has been successfully deleted.\n', 'uuid': 'ae45033b-4366-4ab8-a003-17b00b21ef15'}
2025-03-12 14:29:59 - services.base_service - DEBUG - Updating status for task: test-sg2, step: test-sg2
2025-03-12 14:29:59 - services.base_service - DEBUG - Status updated successfully for step: test-sg2
2025-03-12 14:29:59 - services.unbuild_service - INFO - Unbuild process completed successfully for component: test-infra
2025-03-12 14:29:59 - services.base_service - DEBUG - Deleting application record with build_id: ae45033b-4366-4ab8-a003-17b00b21ef15
2025-03-12 14:30:07 - services.status_service - DEBUG - Getting latest application record for: test-infra
2025-03-12 14:30:07 - services.status_service - ERROR - Application 'test-infra' not found.
2025-03-12 14:30:07 - uvicorn.access - INFO - 127.0.0.1:61849 - "GET /status/?application_name=test-infra HTTP/1.1" 404
2025-03-12 14:30:13 - services.status_service - DEBUG - Getting latest application record for: test-infra
2025-03-12 14:30:13 - services.status_service - ERROR - Application 'test-infra' not found.
2025-03-12 14:30:13 - uvicorn.access - INFO - 127.0.0.1:61851 - "GET /status/?application_name=test-infra HTTP/1.1" 404
2025-03-12 14:44:07 - uvicorn.error - INFO - Shutting down
2025-03-12 14:44:07 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-12 14:44:07 - uvicorn.error - INFO - Application shutdown complete.
2025-03-12 14:44:07 - uvicorn.error - INFO - Finished server process [61995]
2025-03-12 14:44:07 - uvicorn.error - INFO - Stopping reloader process [61993]
2025-03-13 10:25:58 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-03-13 10:25:58 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-03-13 10:25:58 - uvicorn.error - INFO - Started reloader process [63400] using StatReload
2025-03-13 10:25:59 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 10:25:59 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 10:25:59 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 10:25:59 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 10:25:59 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 10:25:59 - uvicorn.error - INFO - Started server process [63402]
2025-03-13 10:25:59 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 10:25:59 - uvicorn.error - INFO - Application startup complete.
2025-03-13 10:26:12 - services.status_service - DEBUG - Getting latest application record for: test-infra
2025-03-13 10:26:12 - services.status_service - ERROR - Application 'test-infra' not found.
2025-03-13 10:26:12 - uvicorn.access - INFO - 127.0.0.1:52149 - "GET /status/?application_name=test-infra HTTP/1.1" 404
2025-03-13 10:27:56 - services.build_service - INFO - Starting build with build_id: 0bc33218-b353-441d-bc32-a02d195a424b
2025-03-13 10:27:56 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 10:27:56 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 10:27:56 - services.build_service - INFO - Executing task: test-sg, resource: test-sg
2025-03-13 10:27:56 - services.base_service - DEBUG - Loading configuration for resource: test-sg, environment: np
2025-03-13 10:27:56 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 10:27:56 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 10:27:56 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 10:27:56 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 10:27:56 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 10:27:56 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg
2025-03-13 10:27:56 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 10:27:56 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 10:27:56 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 10:27:56 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 10:27:56 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 10:27:56 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-13 10:27:58 - services.base_service - ERROR - Subprocess for resource test-sg failed: 
An error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access

2025-03-13 10:27:58 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'error', 'message': '\nAn error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access\n', 'uuid': '0bc33218-b353-441d-bc32-a02d195a424b'}
2025-03-13 10:27:58 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-13 10:27:58 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 10:27:58 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 10:27:58 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 10:27:58 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 10:27:58 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-13 10:27:59 - services.base_service - ERROR - Subprocess for resource test-sg failed: 
An error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access

2025-03-13 10:27:59 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'error', 'message': '\nAn error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access\n', 'uuid': '0bc33218-b353-441d-bc32-a02d195a424b'}
2025-03-13 10:27:59 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-13 10:27:59 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 10:27:59 - services.build_service - INFO - Executing task: test-sg2, resource: test-sg2
2025-03-13 10:27:59 - services.base_service - DEBUG - Loading configuration for resource: test-sg2, environment: np
2025-03-13 10:27:59 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 10:27:59 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 10:27:59 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-13 10:27:59 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-13 10:27:59 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 10:27:59 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg2
2025-03-13 10:27:59 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 10:27:59 - services.base_service - DEBUG - Rendering template: resources/test-sg2/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 10:27:59 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 10:27:59 - services.base_service - DEBUG - Rendering template: resources/test-sg2/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 10:27:59 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 10:27:59 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/deploy_cfn.sh
2025-03-13 10:28:00 - services.base_service - ERROR - Subprocess for resource test-sg2 failed: 
An error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access

2025-03-13 10:28:00 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'error', 'message': '\nAn error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access\n', 'uuid': '0bc33218-b353-441d-bc32-a02d195a424b'}
2025-03-13 10:28:00 - services.base_service - DEBUG - Updating status for task: test-sg2, step: deploy cfn
2025-03-13 10:28:00 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 10:28:00 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 10:28:00 - services.base_service - DEBUG - Rendering template: resources/test-sg2/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 10:28:00 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 10:28:00 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/status.sh
2025-03-13 10:28:01 - services.base_service - ERROR - Subprocess for resource test-sg2 failed: 
An error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access

2025-03-13 10:28:01 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'error', 'message': '\nAn error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access\n', 'uuid': '0bc33218-b353-441d-bc32-a02d195a424b'}
2025-03-13 10:28:01 - services.base_service - DEBUG - Updating status for task: test-sg2, step: status
2025-03-13 10:28:01 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 10:28:01 - services.base_service - DEBUG - Updating application record with build_id: 0bc33218-b353-441d-bc32-a02d195a424b, changes: {'status': 'failed'}
2025-03-13 10:28:01 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104461be0>
2025-03-13 10:28:01 - uvicorn.access - INFO - 127.0.0.1:52157 - "POST /build/ HTTP/1.1" 200
2025-03-13 10:28:39 - uvicorn.error - INFO - Shutting down
2025-03-13 10:28:39 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 10:28:39 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 10:28:39 - uvicorn.error - INFO - Finished server process [63402]
2025-03-13 10:28:39 - uvicorn.error - INFO - Stopping reloader process [63400]
2025-03-13 11:45:22 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-03-13 11:45:22 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-03-13 11:45:22 - uvicorn.error - INFO - Started reloader process [33989] using StatReload
2025-03-13 11:45:22 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 11:45:45 - uvicorn.error - WARNING - StatReload detected changes in 'schemas.py'. Reloading...
2025-03-13 11:45:45 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 11:45:46 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 11:45:46 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 11:45:46 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 11:45:46 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 11:45:47 - uvicorn.error - INFO - Stopping reloader process [33989]
2025-03-13 11:46:08 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-03-13 11:46:08 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-03-13 11:46:08 - uvicorn.error - INFO - Started reloader process [34161] using StatReload
2025-03-13 11:46:08 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 11:46:09 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 11:46:09 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 11:46:09 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 11:46:09 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 11:46:09 - uvicorn.error - INFO - Started server process [34163]
2025-03-13 11:46:09 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 11:46:09 - uvicorn.error - INFO - Application startup complete.
2025-03-13 11:46:18 - services.build_service - INFO - Starting build with build_id: 042f219c-a796-435a-9ad2-08bc5cf37dfc
2025-03-13 11:46:18 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 11:46:18 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 11:46:18 - services.build_service - INFO - Executing task: test-sg, resource: test-sg
2025-03-13 11:46:18 - services.base_service - DEBUG - Loading configuration for resource: test-sg, environment: np
2025-03-13 11:46:18 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 11:46:18 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 11:46:18 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 11:46:18 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 11:46:18 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 11:46:18 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg
2025-03-13 11:46:18 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 11:46:18 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 11:46:18 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 11:46:18 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 11:46:18 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 11:46:18 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-13 11:46:20 - services.base_service - ERROR - Subprocess for resource test-sg failed: 
An error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access

2025-03-13 11:46:20 - services.build_service - DEBUG - Step result for resource 'test-sg' 'test-sg' 'deploy cfn': {'resource': 'test-sg', 'status': 'error', 'message': '\nAn error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access\n', 'uuid': '042f219c-a796-435a-9ad2-08bc5cf37dfc'}
2025-03-13 11:46:20 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-13 11:46:20 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 11:46:20 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 11:46:20 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 11:46:20 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 11:46:20 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-13 11:46:21 - services.base_service - ERROR - Subprocess for resource test-sg failed: 
An error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access

2025-03-13 11:46:21 - services.build_service - DEBUG - Step result for resource 'test-sg' 'test-sg' 'status': {'resource': 'test-sg', 'status': 'error', 'message': '\nAn error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access\n', 'uuid': '042f219c-a796-435a-9ad2-08bc5cf37dfc'}
2025-03-13 11:46:21 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-13 11:46:21 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 11:46:21 - services.base_service - DEBUG - Updating resources for application_name: test-infra, task: test-sg
2025-03-13 11:46:21 - services.base_service - DEBUG - Status updated successfully for resource: success
2025-03-13 11:46:21 - services.build_service - INFO - Executing task: test-sg2, resource: test-sg2
2025-03-13 11:46:21 - services.base_service - DEBUG - Loading configuration for resource: test-sg2, environment: np
2025-03-13 11:46:21 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 11:46:21 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 11:46:21 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-13 11:46:21 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-13 11:46:21 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 11:46:21 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg2
2025-03-13 11:46:21 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 11:46:21 - services.base_service - DEBUG - Rendering template: resources/test-sg2/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 11:46:21 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 11:46:21 - services.base_service - DEBUG - Rendering template: resources/test-sg2/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 11:46:21 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 11:46:21 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/deploy_cfn.sh
2025-03-13 11:46:22 - services.base_service - ERROR - Subprocess for resource test-sg2 failed: 
An error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access

2025-03-13 11:46:22 - services.build_service - DEBUG - Step result for resource 'test-sg2' 'test-sg2' 'deploy cfn': {'resource': 'test-sg2', 'status': 'error', 'message': '\nAn error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access\n', 'uuid': '042f219c-a796-435a-9ad2-08bc5cf37dfc'}
2025-03-13 11:46:22 - services.base_service - DEBUG - Updating status for task: test-sg2, step: deploy cfn
2025-03-13 11:46:22 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 11:46:22 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 11:46:22 - services.base_service - DEBUG - Rendering template: resources/test-sg2/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 11:46:22 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 11:46:22 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/status.sh
2025-03-13 11:46:23 - services.base_service - ERROR - Subprocess for resource test-sg2 failed: 
An error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access

2025-03-13 11:46:23 - services.build_service - DEBUG - Step result for resource 'test-sg2' 'test-sg2' 'status': {'resource': 'test-sg2', 'status': 'error', 'message': '\nAn error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access\n', 'uuid': '042f219c-a796-435a-9ad2-08bc5cf37dfc'}
2025-03-13 11:46:23 - services.base_service - DEBUG - Updating status for task: test-sg2, step: status
2025-03-13 11:46:23 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 11:46:23 - services.base_service - DEBUG - Updating resources for application_name: test-infra, task: test-sg2
2025-03-13 11:46:23 - services.base_service - DEBUG - Status updated successfully for resource: success
2025-03-13 11:46:23 - services.base_service - DEBUG - Updating application record with build_id: 042f219c-a796-435a-9ad2-08bc5cf37dfc, changes: {'status': 'failed'}
2025-03-13 11:46:23 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104639be0>
2025-03-13 11:46:23 - uvicorn.access - INFO - 127.0.0.1:52953 - "POST /build/ HTTP/1.1" 200
2025-03-13 11:50:44 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-03-13 11:50:44 - uvicorn.error - INFO - Shutting down
2025-03-13 11:50:44 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 11:50:44 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 11:50:44 - uvicorn.error - INFO - Finished server process [34163]
2025-03-13 11:50:44 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 11:50:45 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 11:50:45 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 11:50:45 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 11:50:45 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 11:50:45 - uvicorn.error - INFO - Started server process [39380]
2025-03-13 11:50:45 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 11:50:45 - uvicorn.error - INFO - Application startup complete.
2025-03-13 11:50:48 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-03-13 11:50:48 - uvicorn.error - INFO - Shutting down
2025-03-13 11:50:48 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 11:50:48 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 11:50:48 - uvicorn.error - INFO - Finished server process [39380]
2025-03-13 11:50:48 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 11:50:48 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 11:50:48 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 11:50:48 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 11:50:48 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 11:50:48 - uvicorn.error - INFO - Started server process [39393]
2025-03-13 11:50:48 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 11:50:48 - uvicorn.error - INFO - Application startup complete.
2025-03-13 11:51:23 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-03-13 11:51:23 - uvicorn.error - INFO - Shutting down
2025-03-13 11:51:23 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 11:51:23 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 11:51:23 - uvicorn.error - INFO - Finished server process [39393]
2025-03-13 11:51:23 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 11:51:24 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 11:51:24 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 11:51:24 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 11:51:24 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 11:51:24 - uvicorn.error - INFO - Started server process [39421]
2025-03-13 11:51:24 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 11:51:24 - uvicorn.error - INFO - Application startup complete.
2025-03-13 11:51:31 - uvicorn.error - INFO - Shutting down
2025-03-13 11:51:31 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 11:51:31 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 11:51:31 - uvicorn.error - INFO - Finished server process [39421]
2025-03-13 11:51:31 - uvicorn.error - INFO - Stopping reloader process [34161]
2025-03-13 11:51:32 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-03-13 11:51:32 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-03-13 11:51:32 - uvicorn.error - INFO - Started reloader process [39626] using StatReload
2025-03-13 11:51:32 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 11:51:33 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 11:51:33 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 11:51:33 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 11:51:33 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 11:51:33 - uvicorn.error - INFO - Started server process [39628]
2025-03-13 11:51:33 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 11:51:33 - uvicorn.error - INFO - Application startup complete.
2025-03-13 11:51:39 - services.build_service - INFO - Starting build with build_id: b85c9842-6486-4b9d-bd63-54c363b4f86c
2025-03-13 11:51:39 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 11:51:39 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 11:51:39 - services.build_service - INFO - Executing task: test-sg, resource: test-sg
2025-03-13 11:51:39 - services.base_service - DEBUG - Loading configuration for resource: test-sg, environment: np
2025-03-13 11:51:39 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 11:51:39 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 11:51:39 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 11:51:39 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 11:51:39 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 11:51:39 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg
2025-03-13 11:51:39 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 11:51:39 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 11:51:39 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 11:51:39 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 11:51:39 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 11:51:39 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-13 11:51:40 - services.base_service - ERROR - Subprocess for resource test-sg failed: 
An error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access

2025-03-13 11:51:40 - services.build_service - DEBUG - Step result for resource 'test-sg' 'test-sg' 'deploy cfn': {'resource': 'test-sg', 'status': 'error', 'message': '\nAn error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access\n', 'uuid': 'b85c9842-6486-4b9d-bd63-54c363b4f86c'}
2025-03-13 11:51:40 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-13 11:51:40 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 11:51:40 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 11:51:40 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 11:51:40 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 11:51:40 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-13 11:51:41 - services.base_service - ERROR - Subprocess for resource test-sg failed: 
An error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access

2025-03-13 11:51:41 - services.build_service - DEBUG - Step result for resource 'test-sg' 'test-sg' 'status': {'resource': 'test-sg', 'status': 'error', 'message': '\nAn error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access\n', 'uuid': 'b85c9842-6486-4b9d-bd63-54c363b4f86c'}
2025-03-13 11:51:41 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-13 11:51:41 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 11:51:41 - services.base_service - DEBUG - Updating resources for application_name: test-infra, task: test-sg
2025-03-13 11:51:41 - services.base_service - DEBUG - Status updated successfully for resource: failed
2025-03-13 11:51:41 - services.build_service - INFO - Executing task: test-sg2, resource: test-sg2
2025-03-13 11:51:41 - services.base_service - DEBUG - Loading configuration for resource: test-sg2, environment: np
2025-03-13 11:51:41 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 11:51:41 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 11:51:41 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-13 11:51:41 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-13 11:51:41 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 11:51:41 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg2
2025-03-13 11:51:41 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 11:51:41 - services.base_service - DEBUG - Rendering template: resources/test-sg2/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 11:51:41 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 11:51:41 - services.base_service - DEBUG - Rendering template: resources/test-sg2/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 11:51:41 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 11:51:41 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/deploy_cfn.sh
2025-03-13 11:51:42 - services.base_service - ERROR - Subprocess for resource test-sg2 failed: 
An error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access

2025-03-13 11:51:42 - services.build_service - DEBUG - Step result for resource 'test-sg2' 'test-sg2' 'deploy cfn': {'resource': 'test-sg2', 'status': 'error', 'message': '\nAn error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access\n', 'uuid': 'b85c9842-6486-4b9d-bd63-54c363b4f86c'}
2025-03-13 11:51:42 - services.base_service - DEBUG - Updating status for task: test-sg2, step: deploy cfn
2025-03-13 11:51:42 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 11:51:42 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 11:51:42 - services.base_service - DEBUG - Rendering template: resources/test-sg2/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 11:51:42 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 11:51:42 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/status.sh
2025-03-13 11:51:43 - services.base_service - ERROR - Subprocess for resource test-sg2 failed: 
An error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access

2025-03-13 11:51:43 - services.build_service - DEBUG - Step result for resource 'test-sg2' 'test-sg2' 'status': {'resource': 'test-sg2', 'status': 'error', 'message': '\nAn error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access\n', 'uuid': 'b85c9842-6486-4b9d-bd63-54c363b4f86c'}
2025-03-13 11:51:43 - services.base_service - DEBUG - Updating status for task: test-sg2, step: status
2025-03-13 11:51:43 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 11:51:43 - services.base_service - DEBUG - Updating resources for application_name: test-infra, task: test-sg2
2025-03-13 11:51:43 - services.base_service - DEBUG - Status updated successfully for resource: failed
2025-03-13 11:51:43 - services.base_service - DEBUG - Updating application record with build_id: b85c9842-6486-4b9d-bd63-54c363b4f86c, changes: {'status': 'failed'}
2025-03-13 11:51:43 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104531be0>
2025-03-13 11:51:43 - uvicorn.access - INFO - 127.0.0.1:53000 - "POST /build/ HTTP/1.1" 200
2025-03-13 11:52:01 - services.status_service - DEBUG - Getting latest application record for: test-infra
2025-03-13 11:52:01 - services.status_service - INFO - Found application record for 'test-infra' with UUID: b85c9842-6486-4b9d-bd63-54c363b4f86c
2025-03-13 11:52:01 - services.status_service - DEBUG - Retrieved 4 step(s) for application UUID: b85c9842-6486-4b9d-bd63-54c363b4f86c
2025-03-13 11:52:01 - services.status_service - DEBUG - Status response constructed: {'uuid': 'b85c9842-6486-4b9d-bd63-54c363b4f86c', 'application_name': 'test-infra', 'action': 'build', 'status': 'failed', 'timestamp': '2025-03-13T00:51:39.252385', 'steps': [{'id': 1, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'error', 'message': '\nAn error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access\n', 'uuid': 'b85c9842-6486-4b9d-bd63-54c363b4f86c'}, 'timestamp': '2025-03-13T11:51:40.406612', 'uuid': 'b85c9842-6486-4b9d-bd63-54c363b4f86c'}, {'id': 2, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'error', 'message': '\nAn error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access\n', 'uuid': 'b85c9842-6486-4b9d-bd63-54c363b4f86c'}, 'timestamp': '2025-03-13T11:51:41.433491', 'uuid': 'b85c9842-6486-4b9d-bd63-54c363b4f86c'}, {'id': 3, 'task_name': 'test-sg2', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg2', 'status': 'error', 'message': '\nAn error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access\n', 'uuid': 'b85c9842-6486-4b9d-bd63-54c363b4f86c'}, 'timestamp': '2025-03-13T11:51:42.488275', 'uuid': 'b85c9842-6486-4b9d-bd63-54c363b4f86c'}, {'id': 4, 'task_name': 'test-sg2', 'step_name': 'status', 'status': {'resource': 'test-sg2', 'status': 'error', 'message': '\nAn error occurred (ForbiddenException) when calling the GetRoleCredentials operation: No access\n', 'uuid': 'b85c9842-6486-4b9d-bd63-54c363b4f86c'}, 'timestamp': '2025-03-13T11:51:43.403076', 'uuid': 'b85c9842-6486-4b9d-bd63-54c363b4f86c'}]}
2025-03-13 11:52:01 - uvicorn.access - INFO - 127.0.0.1:53016 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 12:02:40 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-03-13 12:02:40 - uvicorn.error - INFO - Shutting down
2025-03-13 12:02:40 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 12:02:40 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 12:02:40 - uvicorn.error - INFO - Finished server process [39628]
2025-03-13 12:02:41 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 12:02:41 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 12:02:41 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 12:02:41 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 12:02:41 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 12:02:41 - uvicorn.error - INFO - Started server process [55929]
2025-03-13 12:02:41 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 12:02:41 - uvicorn.error - INFO - Application startup complete.
2025-03-13 12:08:14 - uvicorn.error - WARNING - StatReload detected changes in 'models.py'. Reloading...
2025-03-13 12:08:14 - uvicorn.error - INFO - Shutting down
2025-03-13 12:08:14 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 12:08:14 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 12:08:14 - uvicorn.error - INFO - Finished server process [55929]
2025-03-13 12:08:14 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 12:08:14 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 12:08:14 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 12:08:14 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 12:08:14 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 12:08:14 - uvicorn.error - INFO - Started server process [61651]
2025-03-13 12:08:14 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 12:08:14 - uvicorn.error - INFO - Application startup complete.
2025-03-13 12:08:16 - uvicorn.error - WARNING - StatReload detected changes in 'models.py'. Reloading...
2025-03-13 12:08:16 - uvicorn.error - INFO - Shutting down
2025-03-13 12:08:16 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 12:08:16 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 12:08:16 - uvicorn.error - INFO - Finished server process [61651]
2025-03-13 12:08:16 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 12:08:17 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 12:08:17 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 12:08:17 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 12:08:17 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 12:08:17 - uvicorn.error - INFO - Started server process [61662]
2025-03-13 12:08:17 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 12:08:17 - uvicorn.error - INFO - Application startup complete.
2025-03-13 12:08:20 - uvicorn.error - WARNING - StatReload detected changes in 'models.py'. Reloading...
2025-03-13 12:08:20 - uvicorn.error - INFO - Shutting down
2025-03-13 12:08:20 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 12:08:20 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 12:08:20 - uvicorn.error - INFO - Finished server process [61662]
2025-03-13 12:08:20 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 12:08:21 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 12:08:21 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 12:08:21 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 12:08:21 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 12:08:21 - uvicorn.error - INFO - Started server process [61672]
2025-03-13 12:08:21 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 12:08:21 - uvicorn.error - INFO - Application startup complete.
2025-03-13 12:09:00 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-03-13 12:09:01 - uvicorn.error - INFO - Shutting down
2025-03-13 12:09:01 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 12:09:01 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 12:09:01 - uvicorn.error - INFO - Finished server process [61672]
2025-03-13 12:09:01 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 12:09:01 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 12:09:01 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 12:09:01 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 12:09:01 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 12:09:01 - uvicorn.error - INFO - Started server process [61832]
2025-03-13 12:09:01 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 12:09:01 - uvicorn.error - INFO - Application startup complete.
2025-03-13 12:09:11 - uvicorn.error - INFO - Shutting down
2025-03-13 12:09:11 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 12:09:11 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 12:09:11 - uvicorn.error - INFO - Finished server process [61832]
2025-03-13 12:09:11 - uvicorn.error - INFO - Stopping reloader process [39626]
2025-03-13 12:09:23 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-03-13 12:09:23 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-03-13 12:09:23 - uvicorn.error - INFO - Started reloader process [61888] using StatReload
2025-03-13 12:09:23 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 12:09:23 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 12:09:23 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 12:09:23 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 12:09:23 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 12:09:23 - uvicorn.error - INFO - Started server process [61890]
2025-03-13 12:09:23 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 12:09:23 - uvicorn.error - INFO - Application startup complete.
2025-03-13 12:09:47 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 12:09:47 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 12:09:47 - services.build_service - INFO - Tasks to destroy (removed from new tasks): set()
2025-03-13 12:09:47 - services.build_service - INFO - Starting build for component 'test-infra' with build_id: 0605a282-a94c-4de7-8634-5ab2f90f3a0e
2025-03-13 12:09:47 - uvicorn.access - INFO - 127.0.0.1:53249 - "POST /build/ HTTP/1.1" 500
2025-03-13 12:09:47 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 962, in run
    result = context.run(func, *args)
  File "/Users/fan.jin/work/py_builder/routes/build.py", line 14, in trigger_build
    result = build_service.build(request.component, db)
  File "/Users/fan.jin/work/py_builder/services/build_service.py", line 89, in build
    task_results = self.execute_task(task, "build", db, build_id)
                   ^^^^^^^^^^^^^^^^^
AttributeError: 'BuildService' object has no attribute 'execute_task'
2025-03-13 12:10:22 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-03-13 12:10:22 - uvicorn.error - INFO - Shutting down
2025-03-13 12:10:22 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 12:10:22 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 12:10:22 - uvicorn.error - INFO - Finished server process [61890]
2025-03-13 12:10:22 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 12:10:22 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 12:10:22 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 12:10:22 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 12:10:22 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 12:10:22 - uvicorn.error - INFO - Started server process [62011]
2025-03-13 12:10:22 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 12:10:22 - uvicorn.error - INFO - Application startup complete.
2025-03-13 12:10:41 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-03-13 12:10:41 - uvicorn.error - INFO - Shutting down
2025-03-13 12:10:41 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 12:10:41 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 12:10:41 - uvicorn.error - INFO - Finished server process [62011]
2025-03-13 12:10:41 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 12:10:42 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 12:10:42 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 12:10:42 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 12:10:42 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 12:10:42 - uvicorn.error - INFO - Started server process [62087]
2025-03-13 12:10:42 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 12:10:42 - uvicorn.error - INFO - Application startup complete.
2025-03-13 12:10:52 - uvicorn.error - INFO - Shutting down
2025-03-13 12:10:52 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 12:10:52 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 12:10:52 - uvicorn.error - INFO - Finished server process [62087]
2025-03-13 12:10:52 - uvicorn.error - INFO - Stopping reloader process [61888]
2025-03-13 12:10:54 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-03-13 12:10:54 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-03-13 12:10:54 - uvicorn.error - INFO - Started reloader process [62120] using StatReload
2025-03-13 12:10:54 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 12:10:54 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 12:10:54 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 12:10:54 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 12:10:54 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 12:10:54 - uvicorn.error - INFO - Started server process [62122]
2025-03-13 12:10:54 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 12:10:54 - uvicorn.error - INFO - Application startup complete.
2025-03-13 12:10:59 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 12:10:59 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 12:10:59 - services.build_service - INFO - Tasks to destroy (removed from new tasks): set()
2025-03-13 12:10:59 - services.build_service - INFO - Starting build for component 'test-infra' with build_id: be074ce2-77bd-4bfe-9b1f-fddb362ee247
2025-03-13 12:10:59 - uvicorn.access - INFO - 127.0.0.1:53272 - "POST /build/ HTTP/1.1" 500
2025-03-13 12:10:59 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 962, in run
    result = context.run(func, *args)
  File "/Users/fan.jin/work/py_builder/routes/build.py", line 14, in trigger_build
    result = build_service.build(request.component, db)
  File "/Users/fan.jin/work/py_builder/services/build_service.py", line 135, in build
    task_results = self.execute_task(task, "build", db, build_id)
TypeError: BuildService.execute_task() takes 4 positional arguments but 5 were given
2025-03-13 12:12:06 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-03-13 12:12:06 - uvicorn.error - INFO - Shutting down
2025-03-13 12:12:06 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 12:12:06 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 12:12:06 - uvicorn.error - INFO - Finished server process [62122]
2025-03-13 12:12:06 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 12:12:07 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 12:12:07 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 12:12:07 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 12:12:07 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 12:12:07 - uvicorn.error - INFO - Started server process [67620]
2025-03-13 12:12:07 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 12:12:07 - uvicorn.error - INFO - Application startup complete.
2025-03-13 12:12:14 - uvicorn.error - INFO - Shutting down
2025-03-13 12:12:14 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 12:12:14 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 12:12:14 - uvicorn.error - INFO - Finished server process [67620]
2025-03-13 12:12:14 - uvicorn.error - INFO - Stopping reloader process [62120]
2025-03-13 12:12:15 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-03-13 12:12:15 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-03-13 12:12:15 - uvicorn.error - INFO - Started reloader process [67648] using StatReload
2025-03-13 12:12:15 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 12:12:15 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 12:12:15 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 12:12:15 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 12:12:15 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 12:12:16 - uvicorn.error - INFO - Started server process [67650]
2025-03-13 12:12:16 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 12:12:16 - uvicorn.error - INFO - Application startup complete.
2025-03-13 12:12:25 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 12:12:25 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 12:12:25 - services.build_service - DEBUG - New tasks from YAML: {'test-sg2', 'test-sg'}
2025-03-13 12:12:25 - services.build_service - DEBUG - Previous tasks from last successful build: set()
2025-03-13 12:12:25 - services.build_service - INFO - Tasks to destroy (removed from new tasks): set()
2025-03-13 12:12:25 - services.build_service - INFO - Starting build for component 'test-infra' with build_id: b21975e7-b24b-4186-bcb9-72b14e499568
2025-03-13 12:12:25 - services.build_service - INFO - Executing task: test-sg, resource: test-sg
2025-03-13 12:12:25 - services.base_service - DEBUG - Loading configuration for resource: test-sg, environment: np
2025-03-13 12:12:25 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 12:12:25 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 12:12:25 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 12:12:25 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 12:12:25 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 12:12:25 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg
2025-03-13 12:12:25 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 12:12:25 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 12:12:25 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:12:25 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 12:12:25 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:12:25 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-13 12:13:02 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ... 
Deploying test-sg-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - test-sg-stack

2025-03-13 12:13:02 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg-stack\n', 'uuid': 'b21975e7-b24b-4186-bcb9-72b14e499568'}
2025-03-13 12:13:02 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-13 12:13:02 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 12:13:02 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 12:13:02 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 12:13:02 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:13:02 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-13 12:13:02 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Check CloudFormation Stack: test-sg-stack
CREATE_COMPLETE

2025-03-13 12:13:02 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'b21975e7-b24b-4186-bcb9-72b14e499568'}
2025-03-13 12:13:02 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-13 12:13:02 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 12:13:02 - services.build_service - INFO - Executing task: test-sg2, resource: test-sg2
2025-03-13 12:13:02 - services.base_service - DEBUG - Loading configuration for resource: test-sg2, environment: np
2025-03-13 12:13:02 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 12:13:02 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 12:13:02 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-13 12:13:02 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-13 12:13:02 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 12:13:02 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg2
2025-03-13 12:13:02 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 12:13:02 - services.base_service - DEBUG - Rendering template: resources/test-sg2/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 12:13:02 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:13:03 - services.base_service - DEBUG - Rendering template: resources/test-sg2/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 12:13:03 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:13:03 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/deploy_cfn.sh
2025-03-13 12:13:09 - services.build_service - ERROR - A build for component 'test-infra' is already in progress with uuid: b21975e7-b24b-4186-bcb9-72b14e499568
2025-03-13 12:13:09 - uvicorn.access - INFO - 127.0.0.1:53303 - "POST /build/ HTTP/1.1" 200
2025-03-13 12:13:39 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ... 
Deploying test-sg2-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - test-sg2-stack

2025-03-13 12:13:39 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg2-stack\n', 'uuid': 'b21975e7-b24b-4186-bcb9-72b14e499568'}
2025-03-13 12:13:39 - services.base_service - DEBUG - Updating status for task: test-sg2, step: deploy cfn
2025-03-13 12:13:39 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 12:13:39 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 12:13:39 - services.base_service - DEBUG - Rendering template: resources/test-sg2/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 12:13:39 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:13:39 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/status.sh
2025-03-13 12:13:40 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ...
Check CloudFormation Stack: test-sg2-stack
CREATE_COMPLETE

2025-03-13 12:13:40 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': 'b21975e7-b24b-4186-bcb9-72b14e499568'}
2025-03-13 12:13:40 - services.base_service - DEBUG - Updating status for task: test-sg2, step: status
2025-03-13 12:13:40 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 12:13:40 - services.base_service - DEBUG - Updating application record with build_id: b21975e7-b24b-4186-bcb9-72b14e499568, changes: {'status': 'success', 'tasks_built': ['test-sg2', 'test-sg']}
2025-03-13 12:13:40 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x103bb7b60>
2025-03-13 12:13:40 - services.build_service - INFO - Build process for 'test-infra' completed with status: success
2025-03-13 12:13:40 - uvicorn.access - INFO - 127.0.0.1:53283 - "POST /build/ HTTP/1.1" 200
2025-03-13 12:18:01 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 12:18:01 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 12:18:01 - services.build_service - DEBUG - New tasks from YAML: {'test-sg'}
2025-03-13 12:18:01 - services.build_service - DEBUG - Previous tasks from last successful build: {'test-sg2', 'test-sg'}
2025-03-13 12:18:01 - services.build_service - INFO - Tasks to destroy (removed from new tasks): {'test-sg2'}
2025-03-13 12:18:01 - services.build_service - INFO - Destroying removed resource: test-sg2
2025-03-13 12:18:01 - services.base_service - DEBUG - Loading configuration for resource: test-sg2, environment: np
2025-03-13 12:18:01 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 12:18:01 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 12:18:01 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-13 12:18:01 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-13 12:18:01 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 12:18:01 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg2
2025-03-13 12:18:01 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/destroy.sh
2025-03-13 12:18:32 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ...
Deleting CloudFormation Stack: test-sg2-stack
Waiting for stack deletion to complete...
Stack test-sg2-stack has been successfully deleted.

2025-03-13 12:18:32 - services.base_service - DEBUG - Updating status for task: test-sg2, step: destroy
2025-03-13 12:18:32 - services.base_service - ERROR - Failed to update status for step: destroy
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: NOT NULL constraint failed: steps.uuid

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/services/base_service.py", line 119, in update_status
    db.commit()
    ~~~~~~~~~^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: steps.uuid
[SQL: INSERT INTO steps (task_name, step_name, status, uuid, timestamp) VALUES (?, ?, ?, ?, ?)]
[parameters: ('test-sg2', 'destroy', '{"resource": "test-sg2", "status": "success", "message": "Set Default region ...\\nDeleting CloudFormation Stack: test-sg2-stack\\nWaiting for stack deletion to complete...\\nStack test-sg2-stack has been successfully deleted.\\n"}', None, '2025-03-13 12:18:32.988851')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-13 12:18:33 - uvicorn.access - INFO - 127.0.0.1:53367 - "POST /build/ HTTP/1.1" 500
2025-03-13 12:18:33 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlite3.IntegrityError: NOT NULL constraint failed: steps.uuid

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 962, in run
    result = context.run(func, *args)
  File "/Users/fan.jin/work/py_builder/routes/build.py", line 14, in trigger_build
    result = build_service.build(request.component, db)
  File "/Users/fan.jin/work/py_builder/services/build_service.py", line 115, in build
    self.update_status(resource, "destroy", result, db, None)
    ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/services/base_service.py", line 124, in update_status
    raise e
  File "/Users/fan.jin/work/py_builder/services/base_service.py", line 119, in update_status
    db.commit()
    ~~~~~~~~~^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
    ~~~~~~~~~~~~^^^^^^^^^^^^^^^
  File "<string>", line 2, in commit
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
    ~~~~~~~~~~~~~~~~~~^^
  File "<string>", line 2, in _prepare_impl
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
    ~~~~~~~~~~~~~~~~~~^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4353, in flush
    self._flush(objects)
    ~~~~~~~~~~~^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    with util.safe_reraise():
         ~~~~~~~~~~~~~~~~~^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/session.py", line 4449, in _flush
    flush_context.execute()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    ~~~~~~~~~~~^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self.mapper,
        ^^^^^^^^^^^^
        uow.states_for_mapper_hierarchy(self.mapper, False, False),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        uow,
        ^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        base_mapper,
        ^^^^^^^^^^^^
    ...<3 lines>...
        insert,
        ^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
        statement,
        params,
        execution_options=execution_options,
    )
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: steps.uuid
[SQL: INSERT INTO steps (task_name, step_name, status, uuid, timestamp) VALUES (?, ?, ?, ?, ?)]
[parameters: ('test-sg2', 'destroy', '{"resource": "test-sg2", "status": "success", "message": "Set Default region ...\\nDeleting CloudFormation Stack: test-sg2-stack\\nWaiting for stack deletion to complete...\\nStack test-sg2-stack has been successfully deleted.\\n"}', None, '2025-03-13 12:18:32.988851')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-03-13 12:20:15 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-03-13 12:20:15 - uvicorn.error - INFO - Shutting down
2025-03-13 12:20:15 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 12:20:15 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 12:20:15 - uvicorn.error - INFO - Finished server process [67650]
2025-03-13 12:20:16 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 12:20:16 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 12:20:16 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 12:20:16 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 12:20:16 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 12:20:16 - uvicorn.error - INFO - Started server process [73828]
2025-03-13 12:20:16 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 12:20:16 - uvicorn.error - INFO - Application startup complete.
2025-03-13 12:20:42 - uvicorn.error - INFO - Shutting down
2025-03-13 12:20:42 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 12:20:42 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 12:20:42 - uvicorn.error - INFO - Finished server process [73828]
2025-03-13 12:20:42 - uvicorn.error - INFO - Stopping reloader process [67648]
2025-03-13 12:20:45 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-03-13 12:20:45 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-03-13 12:20:45 - uvicorn.error - INFO - Started reloader process [73933] using StatReload
2025-03-13 12:20:45 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 12:20:45 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 12:20:45 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 12:20:45 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 12:20:45 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 12:20:45 - uvicorn.error - INFO - Started server process [73935]
2025-03-13 12:20:45 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 12:20:45 - uvicorn.error - INFO - Application startup complete.
2025-03-13 12:20:58 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 12:20:58 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 12:20:58 - services.build_service - DEBUG - New tasks from YAML: {'test-sg', 'test-sg2'}
2025-03-13 12:20:58 - services.build_service - DEBUG - Previous tasks from last successful build: {'test-sg', 'test-sg2'}
2025-03-13 12:20:58 - services.build_service - INFO - Tasks to destroy (removed from new tasks): set()
2025-03-13 12:20:58 - services.build_service - INFO - Starting build for component 'test-infra' with build_id: 2a95512e-f1ef-42c8-8101-805bcea66599
2025-03-13 12:20:58 - services.build_service - INFO - Executing task: test-sg, resource: test-sg
2025-03-13 12:20:58 - services.base_service - DEBUG - Loading configuration for resource: test-sg, environment: np
2025-03-13 12:20:58 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 12:20:58 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 12:20:58 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 12:20:58 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 12:20:58 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 12:20:58 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg
2025-03-13 12:20:58 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 12:20:58 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 12:20:58 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:20:58 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 12:20:58 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:20:58 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-13 12:20:59 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ... 
Deploying test-sg-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack test-sg-stack is up to date

2025-03-13 12:20:59 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': '2a95512e-f1ef-42c8-8101-805bcea66599'}
2025-03-13 12:20:59 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-13 12:20:59 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 12:20:59 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 12:20:59 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 12:20:59 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:20:59 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-13 12:20:59 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Check CloudFormation Stack: test-sg-stack
CREATE_COMPLETE

2025-03-13 12:20:59 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': '2a95512e-f1ef-42c8-8101-805bcea66599'}
2025-03-13 12:20:59 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-13 12:20:59 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 12:20:59 - services.build_service - INFO - Executing task: test-sg2, resource: test-sg2
2025-03-13 12:20:59 - services.base_service - DEBUG - Loading configuration for resource: test-sg2, environment: np
2025-03-13 12:20:59 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 12:20:59 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 12:20:59 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-13 12:20:59 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-13 12:20:59 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 12:20:59 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg2
2025-03-13 12:20:59 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 12:20:59 - services.base_service - DEBUG - Rendering template: resources/test-sg2/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 12:20:59 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:20:59 - services.base_service - DEBUG - Rendering template: resources/test-sg2/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 12:20:59 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:20:59 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/deploy_cfn.sh
2025-03-13 12:21:36 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ... 
Deploying test-sg2-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - test-sg2-stack

2025-03-13 12:21:36 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg2-stack\n', 'uuid': '2a95512e-f1ef-42c8-8101-805bcea66599'}
2025-03-13 12:21:36 - services.base_service - DEBUG - Updating status for task: test-sg2, step: deploy cfn
2025-03-13 12:21:36 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 12:21:36 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 12:21:36 - services.base_service - DEBUG - Rendering template: resources/test-sg2/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 12:21:36 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:21:36 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/status.sh
2025-03-13 12:21:37 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ...
Check CloudFormation Stack: test-sg2-stack
CREATE_COMPLETE

2025-03-13 12:21:37 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': '2a95512e-f1ef-42c8-8101-805bcea66599'}
2025-03-13 12:21:37 - services.base_service - DEBUG - Updating status for task: test-sg2, step: status
2025-03-13 12:21:37 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 12:21:37 - services.base_service - DEBUG - Updating application record with build_id: 2a95512e-f1ef-42c8-8101-805bcea66599, changes: {'status': 'success', 'tasks_built': ['test-sg', 'test-sg2']}
2025-03-13 12:21:37 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104089a90>
2025-03-13 12:21:37 - services.build_service - INFO - Build process for 'test-infra' completed with status: success
2025-03-13 12:21:37 - uvicorn.access - INFO - 127.0.0.1:53407 - "POST /build/ HTTP/1.1" 200
2025-03-13 12:21:53 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 12:21:53 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 12:21:53 - services.build_service - DEBUG - New tasks from YAML: {'test-sg'}
2025-03-13 12:21:53 - services.build_service - DEBUG - Previous tasks from last successful build: {'test-sg', 'test-sg2'}
2025-03-13 12:21:53 - services.build_service - INFO - Tasks to destroy (removed from new tasks): {'test-sg2'}
2025-03-13 12:21:53 - services.build_service - INFO - Starting build for component 'test-infra' with build_id: eabc566d-3855-4231-b56b-74ebf745015a
2025-03-13 12:21:53 - services.build_service - INFO - Destroying removed resource: test-sg2
2025-03-13 12:21:53 - services.base_service - DEBUG - Loading configuration for resource: test-sg2, environment: np
2025-03-13 12:21:53 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 12:21:53 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 12:21:53 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-13 12:21:53 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-13 12:21:53 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 12:21:53 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg2
2025-03-13 12:21:53 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/destroy.sh
2025-03-13 12:22:25 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ...
Deleting CloudFormation Stack: test-sg2-stack
Waiting for stack deletion to complete...
Stack test-sg2-stack has been successfully deleted.

2025-03-13 12:22:25 - services.base_service - DEBUG - Updating status for task: test-sg2, step: destroy
2025-03-13 12:22:25 - services.base_service - DEBUG - Status updated successfully for step: destroy
2025-03-13 12:22:25 - services.build_service - INFO - Destroy result for resource test-sg2: {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: test-sg2-stack\nWaiting for stack deletion to complete...\nStack test-sg2-stack has been successfully deleted.\n', 'uuid': 'eabc566d-3855-4231-b56b-74ebf745015a'}
2025-03-13 12:22:25 - services.build_service - INFO - Executing task: test-sg, resource: test-sg
2025-03-13 12:22:25 - services.base_service - DEBUG - Loading configuration for resource: test-sg, environment: np
2025-03-13 12:22:25 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 12:22:25 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 12:22:25 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 12:22:25 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 12:22:25 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 12:22:25 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg
2025-03-13 12:22:25 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 12:22:25 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 12:22:25 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:22:25 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 12:22:25 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:22:25 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-13 12:22:26 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ... 
Deploying test-sg-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack test-sg-stack is up to date

2025-03-13 12:22:26 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'eabc566d-3855-4231-b56b-74ebf745015a'}
2025-03-13 12:22:26 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-13 12:22:26 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 12:22:26 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 12:22:26 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 12:22:26 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:22:26 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-13 12:22:27 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Check CloudFormation Stack: test-sg-stack
CREATE_COMPLETE

2025-03-13 12:22:27 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'eabc566d-3855-4231-b56b-74ebf745015a'}
2025-03-13 12:22:27 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-13 12:22:27 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 12:22:27 - services.base_service - DEBUG - Updating application record with build_id: eabc566d-3855-4231-b56b-74ebf745015a, changes: {'status': 'success', 'tasks_built': ['test-sg']}
2025-03-13 12:22:27 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104082ea0>
2025-03-13 12:22:27 - services.build_service - INFO - Build process for 'test-infra' completed with status: success
2025-03-13 12:22:27 - uvicorn.access - INFO - 127.0.0.1:53431 - "POST /build/ HTTP/1.1" 200
2025-03-13 12:39:55 - services.status_service - DEBUG - Getting latest application record for: test-infra
2025-03-13 12:39:55 - services.status_service - INFO - Found application record for 'test-infra' with UUID: eabc566d-3855-4231-b56b-74ebf745015a
2025-03-13 12:39:55 - services.status_service - DEBUG - Retrieved 3 step(s) for application UUID: eabc566d-3855-4231-b56b-74ebf745015a
2025-03-13 12:39:55 - services.status_service - DEBUG - Status response constructed: {'uuid': 'eabc566d-3855-4231-b56b-74ebf745015a', 'application_name': 'test-infra', 'action': 'build', 'status': 'success', 'timestamp': '2025-03-13T01:21:53.588186', 'steps': [{'id': 9, 'task_name': 'test-sg2', 'step_name': 'destroy', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: test-sg2-stack\nWaiting for stack deletion to complete...\nStack test-sg2-stack has been successfully deleted.\n', 'uuid': 'eabc566d-3855-4231-b56b-74ebf745015a'}, 'timestamp': '2025-03-13T12:22:25.456212', 'uuid': 'eabc566d-3855-4231-b56b-74ebf745015a'}, {'id': 10, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'eabc566d-3855-4231-b56b-74ebf745015a'}, 'timestamp': '2025-03-13T12:22:26.590104', 'uuid': 'eabc566d-3855-4231-b56b-74ebf745015a'}, {'id': 11, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'eabc566d-3855-4231-b56b-74ebf745015a'}, 'timestamp': '2025-03-13T12:22:27.377173', 'uuid': 'eabc566d-3855-4231-b56b-74ebf745015a'}]}
2025-03-13 12:39:55 - uvicorn.access - INFO - 127.0.0.1:53677 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 12:40:35 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 12:40:35 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 12:40:35 - services.build_service - DEBUG - New tasks from YAML: {'test-sg', 'test-sg2'}
2025-03-13 12:40:35 - services.build_service - DEBUG - Previous tasks from last successful build: {'test-sg'}
2025-03-13 12:40:35 - services.build_service - INFO - Tasks to destroy (removed from new tasks): set()
2025-03-13 12:40:35 - services.build_service - INFO - Starting build for component 'test-infra' with build_id: a8a5ccec-3a09-44e6-a14f-9172eac189bc
2025-03-13 12:40:35 - services.build_service - INFO - Executing task: test-sg, resource: test-sg
2025-03-13 12:40:35 - services.base_service - DEBUG - Loading configuration for resource: test-sg, environment: np
2025-03-13 12:40:35 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 12:40:35 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 12:40:35 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 12:40:35 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 12:40:35 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 12:40:35 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg
2025-03-13 12:40:35 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 12:40:35 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 12:40:35 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:40:35 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 12:40:35 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:40:35 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-13 12:40:36 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ... 
Deploying test-sg-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack test-sg-stack is up to date

2025-03-13 12:40:36 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'a8a5ccec-3a09-44e6-a14f-9172eac189bc'}
2025-03-13 12:40:36 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-13 12:40:36 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 12:40:36 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 12:40:36 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 12:40:36 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:40:36 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-13 12:40:37 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Check CloudFormation Stack: test-sg-stack
CREATE_COMPLETE

2025-03-13 12:40:37 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'a8a5ccec-3a09-44e6-a14f-9172eac189bc'}
2025-03-13 12:40:37 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-13 12:40:37 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 12:40:37 - services.build_service - INFO - Executing task: test-sg2, resource: test-sg2
2025-03-13 12:40:37 - services.base_service - DEBUG - Loading configuration for resource: test-sg2, environment: np
2025-03-13 12:40:37 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 12:40:37 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 12:40:37 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-13 12:40:37 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-13 12:40:37 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 12:40:37 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg2
2025-03-13 12:40:37 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 12:40:37 - services.base_service - DEBUG - Rendering template: resources/test-sg2/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 12:40:37 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:40:37 - services.base_service - DEBUG - Rendering template: resources/test-sg2/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 12:40:37 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:40:37 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/deploy_cfn.sh
2025-03-13 12:40:50 - services.build_service - ERROR - A build for component 'test-infra' is already in progress with uuid: a8a5ccec-3a09-44e6-a14f-9172eac189bc
2025-03-13 12:40:50 - uvicorn.access - INFO - 127.0.0.1:53694 - "POST /build/ HTTP/1.1" 200
2025-03-13 12:40:57 - services.status_service - DEBUG - Getting latest application record for: test-infra
2025-03-13 12:40:57 - services.status_service - INFO - Found application record for 'test-infra' with UUID: a8a5ccec-3a09-44e6-a14f-9172eac189bc
2025-03-13 12:40:57 - services.status_service - DEBUG - Retrieved 2 step(s) for application UUID: a8a5ccec-3a09-44e6-a14f-9172eac189bc
2025-03-13 12:40:57 - services.status_service - DEBUG - Status response constructed: {'uuid': 'a8a5ccec-3a09-44e6-a14f-9172eac189bc', 'application_name': 'test-infra', 'action': 'build', 'status': 'started', 'timestamp': '2025-03-13T01:40:35.379211', 'steps': [{'id': 12, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'a8a5ccec-3a09-44e6-a14f-9172eac189bc'}, 'timestamp': '2025-03-13T12:40:36.547219', 'uuid': 'a8a5ccec-3a09-44e6-a14f-9172eac189bc'}, {'id': 13, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'a8a5ccec-3a09-44e6-a14f-9172eac189bc'}, 'timestamp': '2025-03-13T12:40:37.314822', 'uuid': 'a8a5ccec-3a09-44e6-a14f-9172eac189bc'}]}
2025-03-13 12:40:57 - uvicorn.access - INFO - 127.0.0.1:53695 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 12:41:13 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ... 
Deploying test-sg2-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - test-sg2-stack

2025-03-13 12:41:13 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg2-stack\n', 'uuid': 'a8a5ccec-3a09-44e6-a14f-9172eac189bc'}
2025-03-13 12:41:13 - services.base_service - DEBUG - Updating status for task: test-sg2, step: deploy cfn
2025-03-13 12:41:13 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 12:41:13 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 12:41:13 - services.base_service - DEBUG - Rendering template: resources/test-sg2/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 12:41:13 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 12:41:13 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/status.sh
2025-03-13 12:41:14 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ...
Check CloudFormation Stack: test-sg2-stack
CREATE_COMPLETE

2025-03-13 12:41:14 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': 'a8a5ccec-3a09-44e6-a14f-9172eac189bc'}
2025-03-13 12:41:14 - services.base_service - DEBUG - Updating status for task: test-sg2, step: status
2025-03-13 12:41:14 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 12:41:14 - services.base_service - DEBUG - Updating application record with build_id: a8a5ccec-3a09-44e6-a14f-9172eac189bc, changes: {'status': 'success', 'tasks_built': ['test-sg', 'test-sg2']}
2025-03-13 12:41:14 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x10407b680>
2025-03-13 12:41:14 - services.build_service - INFO - Build process for 'test-infra' completed with status: success
2025-03-13 12:41:14 - uvicorn.access - INFO - 127.0.0.1:53686 - "POST /build/ HTTP/1.1" 200
2025-03-13 14:37:02 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 14:37:02 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 14:37:02 - services.build_service - DEBUG - New tasks from YAML: {'test-sg', 'test-sg2', 'test-s3'}
2025-03-13 14:37:02 - services.build_service - DEBUG - Previous tasks from last successful build: {'test-sg', 'test-sg2'}
2025-03-13 14:37:02 - services.build_service - INFO - Tasks to destroy (removed from new tasks): set()
2025-03-13 14:37:02 - services.build_service - INFO - Starting build for component 'test-infra' with build_id: 59286c52-a5c7-4283-8bc1-006dd7f74a5c
2025-03-13 14:37:02 - services.build_service - INFO - Executing task: test-sg, resource: test-sg
2025-03-13 14:37:02 - services.base_service - DEBUG - Loading configuration for resource: test-sg, environment: np
2025-03-13 14:37:02 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 14:37:02 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 14:37:02 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 14:37:02 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 14:37:02 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 14:37:02 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg
2025-03-13 14:37:02 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 14:37:02 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 14:37:02 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:37:02 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 14:37:02 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:37:02 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-13 14:37:05 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ... 
Deploying test-sg-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack test-sg-stack is up to date

2025-03-13 14:37:05 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': '59286c52-a5c7-4283-8bc1-006dd7f74a5c'}
2025-03-13 14:37:05 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-13 14:37:05 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 14:37:05 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 14:37:05 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 14:37:05 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:37:05 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-13 14:37:06 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Check CloudFormation Stack: test-sg-stack
CREATE_COMPLETE

2025-03-13 14:37:06 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': '59286c52-a5c7-4283-8bc1-006dd7f74a5c'}
2025-03-13 14:37:06 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-13 14:37:06 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 14:37:06 - services.build_service - INFO - Executing task: test-sg2, resource: test-sg2
2025-03-13 14:37:06 - services.base_service - DEBUG - Loading configuration for resource: test-sg2, environment: np
2025-03-13 14:37:06 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 14:37:06 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 14:37:06 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-13 14:37:06 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-13 14:37:06 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 14:37:06 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg2
2025-03-13 14:37:06 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 14:37:06 - services.base_service - DEBUG - Rendering template: resources/test-sg2/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 14:37:06 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:37:06 - services.base_service - DEBUG - Rendering template: resources/test-sg2/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 14:37:06 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:37:06 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/deploy_cfn.sh
2025-03-13 14:37:07 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ... 
Deploying test-sg2-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack test-sg2-stack is up to date

2025-03-13 14:37:07 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg2-stack is up to date\n', 'uuid': '59286c52-a5c7-4283-8bc1-006dd7f74a5c'}
2025-03-13 14:37:07 - services.base_service - DEBUG - Updating status for task: test-sg2, step: deploy cfn
2025-03-13 14:37:07 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 14:37:07 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 14:37:07 - services.base_service - DEBUG - Rendering template: resources/test-sg2/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 14:37:07 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:37:07 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/status.sh
2025-03-13 14:37:08 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ...
Check CloudFormation Stack: test-sg2-stack
CREATE_COMPLETE

2025-03-13 14:37:08 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': '59286c52-a5c7-4283-8bc1-006dd7f74a5c'}
2025-03-13 14:37:08 - services.base_service - DEBUG - Updating status for task: test-sg2, step: status
2025-03-13 14:37:08 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 14:37:08 - services.build_service - INFO - Executing task: test-s3, resource: test-s3
2025-03-13 14:37:08 - services.base_service - DEBUG - Loading configuration for resource: test-s3, environment: np
2025-03-13 14:37:08 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 14:37:08 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 14:37:08 - services.base_service - WARNING - YAML file environments/test-s3/np.yml does not exist.
2025-03-13 14:37:08 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod'}
2025-03-13 14:37:08 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-s3
2025-03-13 14:37:08 - services.build_service - DEBUG - Running step for resource: test-s3
2025-03-13 14:37:08 - services.base_service - DEBUG - Calling subprocess for resource: test-s3 with script: resources/test-s3/deploy_cfn.sh
2025-03-13 14:37:08 - services.base_service - WARNING - Script path resources/test-s3/deploy_cfn.sh does not exist for resource test-s3.
2025-03-13 14:37:08 - services.build_service - DEBUG - Step result for resource 'test-s3': {'uuid': '59286c52-a5c7-4283-8bc1-006dd7f74a5c'}
2025-03-13 14:37:08 - services.base_service - DEBUG - Updating status for task: test-s3, step: deploy cfn
2025-03-13 14:37:08 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 14:37:08 - services.build_service - DEBUG - Running step for resource: test-s3
2025-03-13 14:37:08 - services.base_service - DEBUG - Calling subprocess for resource: test-s3 with script: resources/test-s3/status
2025-03-13 14:37:08 - services.base_service - WARNING - Script path resources/test-s3/status does not exist for resource test-s3.
2025-03-13 14:37:08 - services.build_service - DEBUG - Step result for resource 'test-s3': {'uuid': '59286c52-a5c7-4283-8bc1-006dd7f74a5c'}
2025-03-13 14:37:08 - services.base_service - DEBUG - Updating status for task: test-s3, step: status
2025-03-13 14:37:08 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 14:37:08 - services.base_service - DEBUG - Updating application record with build_id: 59286c52-a5c7-4283-8bc1-006dd7f74a5c, changes: {'status': 'success', 'tasks_built': ['test-sg', 'test-sg2', 'test-s3']}
2025-03-13 14:37:08 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104046b70>
2025-03-13 14:37:08 - services.build_service - INFO - Build process for 'test-infra' completed with status: success
2025-03-13 14:37:08 - uvicorn.access - INFO - 127.0.0.1:54922 - "POST /build/ HTTP/1.1" 500
2025-03-13 14:37:08 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 6 validation errors:
  {'type': 'missing', 'loc': ('response', 'results', 4, 'resource'), 'msg': 'Field required', 'input': {'uuid': '59286c52-a5c7-4283-8bc1-006dd7f74a5c'}}
  {'type': 'missing', 'loc': ('response', 'results', 4, 'status'), 'msg': 'Field required', 'input': {'uuid': '59286c52-a5c7-4283-8bc1-006dd7f74a5c'}}
  {'type': 'missing', 'loc': ('response', 'results', 4, 'message'), 'msg': 'Field required', 'input': {'uuid': '59286c52-a5c7-4283-8bc1-006dd7f74a5c'}}
  {'type': 'missing', 'loc': ('response', 'results', 5, 'resource'), 'msg': 'Field required', 'input': {'uuid': '59286c52-a5c7-4283-8bc1-006dd7f74a5c'}}
  {'type': 'missing', 'loc': ('response', 'results', 5, 'status'), 'msg': 'Field required', 'input': {'uuid': '59286c52-a5c7-4283-8bc1-006dd7f74a5c'}}
  {'type': 'missing', 'loc': ('response', 'results', 5, 'message'), 'msg': 'Field required', 'input': {'uuid': '59286c52-a5c7-4283-8bc1-006dd7f74a5c'}}

2025-03-13 14:39:55 - uvicorn.error - WARNING - StatReload detected changes in 'services/base_service.py'. Reloading...
2025-03-13 14:39:55 - uvicorn.error - INFO - Shutting down
2025-03-13 14:39:55 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 14:39:55 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 14:39:55 - uvicorn.error - INFO - Finished server process [73935]
2025-03-13 14:39:55 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 14:39:56 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 14:39:56 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 14:39:56 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 14:39:56 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 14:39:56 - uvicorn.error - INFO - Started server process [87091]
2025-03-13 14:39:56 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 14:39:56 - uvicorn.error - INFO - Application startup complete.
2025-03-13 14:40:14 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 14:40:14 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 14:40:14 - services.build_service - DEBUG - New tasks from YAML: {'test-sg2', 'test-sg', 'test-s3'}
2025-03-13 14:40:14 - services.build_service - DEBUG - Previous tasks from last successful build: {'test-sg2', 'test-sg', 'test-s3'}
2025-03-13 14:40:14 - services.build_service - INFO - Tasks to destroy (removed from new tasks): set()
2025-03-13 14:40:14 - services.build_service - INFO - Starting build for component 'test-infra' with build_id: 3ebb539d-b639-475b-ba41-ec5c2ae1d2a1
2025-03-13 14:40:14 - services.build_service - INFO - Executing task: test-sg, resource: test-sg
2025-03-13 14:40:14 - services.base_service - DEBUG - Loading configuration for resource: test-sg, environment: np
2025-03-13 14:40:14 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 14:40:14 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 14:40:14 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 14:40:14 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 14:40:14 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 14:40:14 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg
2025-03-13 14:40:14 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 14:40:14 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 14:40:14 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:40:14 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 14:40:14 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:40:14 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-13 14:40:16 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ... 
Deploying test-sg-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack test-sg-stack is up to date

2025-03-13 14:40:16 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': '3ebb539d-b639-475b-ba41-ec5c2ae1d2a1'}
2025-03-13 14:40:16 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-13 14:40:16 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 14:40:16 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 14:40:16 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 14:40:16 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:40:16 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-13 14:40:16 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Check CloudFormation Stack: test-sg-stack
CREATE_COMPLETE

2025-03-13 14:40:16 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': '3ebb539d-b639-475b-ba41-ec5c2ae1d2a1'}
2025-03-13 14:40:16 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-13 14:40:16 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 14:40:16 - services.build_service - INFO - Executing task: test-sg2, resource: test-sg2
2025-03-13 14:40:16 - services.base_service - DEBUG - Loading configuration for resource: test-sg2, environment: np
2025-03-13 14:40:16 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 14:40:16 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 14:40:16 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-13 14:40:16 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-13 14:40:16 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 14:40:16 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg2
2025-03-13 14:40:16 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 14:40:16 - services.base_service - DEBUG - Rendering template: resources/test-sg2/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 14:40:16 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:40:16 - services.base_service - DEBUG - Rendering template: resources/test-sg2/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 14:40:16 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:40:16 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/deploy_cfn.sh
2025-03-13 14:40:17 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ... 
Deploying test-sg2-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack test-sg2-stack is up to date

2025-03-13 14:40:17 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg2-stack is up to date\n', 'uuid': '3ebb539d-b639-475b-ba41-ec5c2ae1d2a1'}
2025-03-13 14:40:17 - services.base_service - DEBUG - Updating status for task: test-sg2, step: deploy cfn
2025-03-13 14:40:17 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 14:40:17 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 14:40:17 - services.base_service - DEBUG - Rendering template: resources/test-sg2/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 14:40:17 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:40:17 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/status.sh
2025-03-13 14:40:18 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ...
Check CloudFormation Stack: test-sg2-stack
CREATE_COMPLETE

2025-03-13 14:40:18 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': '3ebb539d-b639-475b-ba41-ec5c2ae1d2a1'}
2025-03-13 14:40:18 - services.base_service - DEBUG - Updating status for task: test-sg2, step: status
2025-03-13 14:40:18 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 14:40:18 - services.build_service - INFO - Executing task: test-s3, resource: test-s3
2025-03-13 14:40:18 - services.base_service - DEBUG - Loading configuration for resource: test-s3, environment: np
2025-03-13 14:40:18 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 14:40:18 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 14:40:18 - services.base_service - WARNING - YAML file environments/test-s3/np.yml does not exist.
2025-03-13 14:40:18 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod'}
2025-03-13 14:40:18 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-s3
2025-03-13 14:40:18 - services.build_service - DEBUG - Running step for resource: test-s3
2025-03-13 14:40:18 - services.base_service - DEBUG - Calling subprocess for resource: test-s3 with script: resources/test-s3/deploy_cfn.sh
2025-03-13 14:40:18 - services.base_service - WARNING - Script path resources/test-s3/deploy_cfn.sh does not exist for resource test-s3.
2025-03-13 14:40:18 - services.build_service - DEBUG - Step result for resource 'test-s3': {'resource': 'test-s3', 'status': 'error', 'message': 'Script path resources/test-s3/deploy_cfn.sh does not exist.', 'uuid': '3ebb539d-b639-475b-ba41-ec5c2ae1d2a1'}
2025-03-13 14:40:18 - services.base_service - DEBUG - Updating status for task: test-s3, step: deploy cfn
2025-03-13 14:40:18 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 14:40:18 - services.build_service - DEBUG - Running step for resource: test-s3
2025-03-13 14:40:18 - services.base_service - DEBUG - Calling subprocess for resource: test-s3 with script: resources/test-s3/status
2025-03-13 14:40:18 - services.base_service - WARNING - Script path resources/test-s3/status does not exist for resource test-s3.
2025-03-13 14:40:18 - services.build_service - DEBUG - Step result for resource 'test-s3': {'resource': 'test-s3', 'status': 'error', 'message': 'Script path resources/test-s3/status does not exist.', 'uuid': '3ebb539d-b639-475b-ba41-ec5c2ae1d2a1'}
2025-03-13 14:40:18 - services.base_service - DEBUG - Updating status for task: test-s3, step: status
2025-03-13 14:40:18 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 14:40:18 - services.base_service - DEBUG - Updating application record with build_id: 3ebb539d-b639-475b-ba41-ec5c2ae1d2a1, changes: {'status': 'failed', 'tasks_built': ['test-sg2', 'test-sg', 'test-s3']}
2025-03-13 14:40:18 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x107f6da90>
2025-03-13 14:40:18 - services.build_service - INFO - Build process for 'test-infra' completed with status: failed
2025-03-13 14:40:18 - uvicorn.access - INFO - 127.0.0.1:54960 - "POST /build/ HTTP/1.1" 200
2025-03-13 14:42:48 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 14:42:48 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 14:42:48 - services.build_service - DEBUG - New tasks from YAML: {'test-sg2', 'test-sg'}
2025-03-13 14:42:48 - services.build_service - DEBUG - Previous tasks from last successful build: {'test-sg2', 'test-sg', 'test-s3'}
2025-03-13 14:42:48 - services.build_service - INFO - Tasks to destroy (removed from new tasks): {'test-s3'}
2025-03-13 14:42:48 - services.build_service - INFO - Starting build for component 'test-infra' with build_id: ea8078c7-f7f9-45e0-9956-05f0fdf27652
2025-03-13 14:42:48 - services.build_service - INFO - Destroying removed resource: test-s3
2025-03-13 14:42:48 - services.base_service - DEBUG - Loading configuration for resource: test-s3, environment: np
2025-03-13 14:42:48 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 14:42:48 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 14:42:48 - services.base_service - WARNING - YAML file environments/test-s3/np.yml does not exist.
2025-03-13 14:42:48 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod'}
2025-03-13 14:42:48 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-s3
2025-03-13 14:42:48 - services.base_service - DEBUG - Calling subprocess for resource: test-s3 with script: resources/test-s3/destroy.sh
2025-03-13 14:42:48 - services.base_service - WARNING - Script path resources/test-s3/destroy.sh does not exist for resource test-s3.
2025-03-13 14:42:48 - services.base_service - DEBUG - Updating status for task: test-s3, step: destroy
2025-03-13 14:42:48 - services.base_service - DEBUG - Status updated successfully for step: destroy
2025-03-13 14:42:48 - services.build_service - INFO - Destroy result for resource test-s3: {'resource': 'test-s3', 'status': 'error', 'message': 'Script path resources/test-s3/destroy.sh does not exist.', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}
2025-03-13 14:42:48 - services.build_service - INFO - Executing task: test-sg, resource: test-sg
2025-03-13 14:42:48 - services.base_service - DEBUG - Loading configuration for resource: test-sg, environment: np
2025-03-13 14:42:48 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 14:42:48 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 14:42:48 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 14:42:48 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 14:42:48 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 14:42:48 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg
2025-03-13 14:42:48 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 14:42:48 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 14:42:48 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:42:48 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 14:42:48 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:42:48 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-13 14:42:49 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ... 
Deploying test-sg-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack test-sg-stack is up to date

2025-03-13 14:42:49 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}
2025-03-13 14:42:49 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-13 14:42:49 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 14:42:49 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 14:42:49 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 14:42:49 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:42:49 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-13 14:42:50 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Check CloudFormation Stack: test-sg-stack
CREATE_COMPLETE

2025-03-13 14:42:50 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}
2025-03-13 14:42:50 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-13 14:42:50 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 14:42:50 - services.build_service - INFO - Executing task: test-sg2, resource: test-sg2
2025-03-13 14:42:50 - services.base_service - DEBUG - Loading configuration for resource: test-sg2, environment: np
2025-03-13 14:42:50 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 14:42:50 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 14:42:50 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-13 14:42:50 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-13 14:42:50 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 14:42:50 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg2
2025-03-13 14:42:50 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 14:42:50 - services.base_service - DEBUG - Rendering template: resources/test-sg2/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 14:42:50 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:42:50 - services.base_service - DEBUG - Rendering template: resources/test-sg2/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 14:42:50 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:42:50 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/deploy_cfn.sh
2025-03-13 14:42:51 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ... 
Deploying test-sg2-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack test-sg2-stack is up to date

2025-03-13 14:42:51 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg2-stack is up to date\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}
2025-03-13 14:42:51 - services.base_service - DEBUG - Updating status for task: test-sg2, step: deploy cfn
2025-03-13 14:42:51 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 14:42:51 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 14:42:51 - services.base_service - DEBUG - Rendering template: resources/test-sg2/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 14:42:51 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:42:51 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/status.sh
2025-03-13 14:42:52 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ...
Check CloudFormation Stack: test-sg2-stack
CREATE_COMPLETE

2025-03-13 14:42:52 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}
2025-03-13 14:42:52 - services.base_service - DEBUG - Updating status for task: test-sg2, step: status
2025-03-13 14:42:52 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 14:42:52 - services.base_service - DEBUG - Updating application record with build_id: ea8078c7-f7f9-45e0-9956-05f0fdf27652, changes: {'status': 'success', 'tasks_built': ['test-sg2', 'test-sg']}
2025-03-13 14:42:52 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x107f66ea0>
2025-03-13 14:42:52 - services.build_service - INFO - Build process for 'test-infra' completed with status: success
2025-03-13 14:42:52 - uvicorn.access - INFO - 127.0.0.1:55030 - "POST /build/ HTTP/1.1" 200
2025-03-13 14:45:40 - uvicorn.error - WARNING - StatReload detected changes in 'services/unbuild_service.py'. Reloading...
2025-03-13 14:45:40 - uvicorn.error - INFO - Shutting down
2025-03-13 14:45:40 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 14:45:40 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 14:45:40 - uvicorn.error - INFO - Finished server process [87091]
2025-03-13 14:45:40 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 14:45:40 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 14:45:40 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 14:45:40 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 14:45:40 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 14:45:41 - uvicorn.error - INFO - Started server process [96500]
2025-03-13 14:45:41 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 14:45:41 - uvicorn.error - INFO - Application startup complete.
2025-03-13 14:52:10 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-03-13 14:52:10 - uvicorn.error - INFO - Shutting down
2025-03-13 14:52:10 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 14:52:10 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 14:52:10 - uvicorn.error - INFO - Finished server process [96500]
2025-03-13 14:52:11 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 14:52:11 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 14:52:11 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 14:52:11 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 14:52:11 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 14:52:11 - uvicorn.error - INFO - Started server process [12988]
2025-03-13 14:52:11 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 14:52:11 - uvicorn.error - INFO - Application startup complete.
2025-03-13 14:56:34 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-03-13 14:56:34 - uvicorn.error - INFO - Shutting down
2025-03-13 14:56:34 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 14:56:34 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 14:56:34 - uvicorn.error - INFO - Finished server process [12988]
2025-03-13 14:56:35 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 14:56:35 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 14:56:35 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 14:56:35 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 14:56:35 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 14:56:35 - uvicorn.error - INFO - Started server process [16144]
2025-03-13 14:56:35 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 14:56:35 - uvicorn.error - INFO - Application startup complete.
2025-03-13 14:57:46 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-03-13 14:57:46 - uvicorn.error - INFO - Shutting down
2025-03-13 14:57:46 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 14:57:46 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 14:57:46 - uvicorn.error - INFO - Finished server process [16144]
2025-03-13 14:57:46 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 14:57:46 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 14:57:46 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 14:57:46 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 14:57:46 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 14:57:46 - uvicorn.error - INFO - Started server process [25562]
2025-03-13 14:57:46 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 14:57:46 - uvicorn.error - INFO - Application startup complete.
2025-03-13 14:58:08 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-03-13 14:58:08 - uvicorn.error - INFO - Shutting down
2025-03-13 14:58:09 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 14:58:09 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 14:58:09 - uvicorn.error - INFO - Finished server process [25562]
2025-03-13 14:58:09 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 14:58:09 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 14:58:09 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 14:58:09 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 14:58:09 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 14:58:09 - uvicorn.error - INFO - Started server process [25573]
2025-03-13 14:58:09 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 14:58:09 - uvicorn.error - INFO - Application startup complete.
2025-03-13 14:58:27 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-03-13 14:58:27 - uvicorn.error - INFO - Shutting down
2025-03-13 14:58:27 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 14:58:27 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 14:58:27 - uvicorn.error - INFO - Finished server process [25573]
2025-03-13 14:58:27 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 14:58:28 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 14:58:28 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 14:58:28 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 14:58:28 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 14:58:28 - uvicorn.error - INFO - Started server process [25584]
2025-03-13 14:58:28 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 14:58:28 - uvicorn.error - INFO - Application startup complete.
2025-03-13 14:58:37 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-03-13 14:58:37 - uvicorn.error - INFO - Shutting down
2025-03-13 14:58:37 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 14:58:37 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 14:58:37 - uvicorn.error - INFO - Finished server process [25584]
2025-03-13 14:58:37 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 14:58:37 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 14:58:37 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 14:58:37 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 14:58:37 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 14:58:37 - uvicorn.error - INFO - Started server process [25607]
2025-03-13 14:58:37 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 14:58:37 - uvicorn.error - INFO - Application startup complete.
2025-03-13 14:58:45 - uvicorn.error - INFO - Shutting down
2025-03-13 14:58:45 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 14:58:45 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 14:58:45 - uvicorn.error - INFO - Finished server process [25607]
2025-03-13 14:58:45 - uvicorn.error - INFO - Stopping reloader process [73933]
2025-03-13 14:58:46 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-03-13 14:58:46 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-03-13 14:58:46 - uvicorn.error - INFO - Started reloader process [25738] using StatReload
2025-03-13 14:58:46 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 14:58:46 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 14:58:46 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 14:58:46 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 14:58:46 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 14:58:46 - uvicorn.error - INFO - Started server process [25740]
2025-03-13 14:58:46 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 14:58:46 - uvicorn.error - INFO - Application startup complete.
2025-03-13 14:58:50 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 14:58:50 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 14:58:50 - services.build_service - DEBUG - New tasks: {'test-sg', 'test-sg2'}
2025-03-13 14:58:50 - services.build_service - DEBUG - Previous tasks: {'test-sg', 'test-sg2'}
2025-03-13 14:58:50 - services.build_service - INFO - Tasks to destroy: set()
2025-03-13 14:58:50 - services.build_service - INFO - Starting build for 'test-infra' with build_id: eed20295-53d0-4319-9976-12a4199d6c86
2025-03-13 14:58:50 - services.build_service - INFO - Executing task 'test-sg' for resource: test-sg
2025-03-13 14:58:50 - services.base_service - DEBUG - Loading configuration for resource: test-sg, environment: np
2025-03-13 14:58:50 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 14:58:50 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 14:58:50 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 14:58:50 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 14:58:50 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 14:58:50 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg
2025-03-13 14:58:50 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 14:58:50 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 14:58:50 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:58:50 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 14:58:50 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:58:50 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-13 14:58:51 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ... 
Deploying test-sg-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack test-sg-stack is up to date

2025-03-13 14:58:51 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'eed20295-53d0-4319-9976-12a4199d6c86'}
2025-03-13 14:58:51 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-13 14:58:51 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 14:58:51 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 14:58:51 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 14:58:51 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:58:51 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-13 14:58:52 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Check CloudFormation Stack: test-sg-stack
CREATE_COMPLETE

2025-03-13 14:58:52 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'eed20295-53d0-4319-9976-12a4199d6c86'}
2025-03-13 14:58:52 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-13 14:58:52 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 14:58:52 - services.build_service - INFO - Executing task 'test-sg2' for resource: test-sg2
2025-03-13 14:58:52 - services.base_service - DEBUG - Loading configuration for resource: test-sg2, environment: np
2025-03-13 14:58:52 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 14:58:52 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 14:58:52 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-13 14:58:52 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-13 14:58:52 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 14:58:52 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg2
2025-03-13 14:58:52 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 14:58:52 - services.base_service - DEBUG - Rendering template: resources/test-sg2/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 14:58:52 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:58:52 - services.base_service - DEBUG - Rendering template: resources/test-sg2/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 14:58:52 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:58:52 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/deploy_cfn.sh
2025-03-13 14:58:53 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ... 
Deploying test-sg2-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack test-sg2-stack is up to date

2025-03-13 14:58:53 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg2-stack is up to date\n', 'uuid': 'eed20295-53d0-4319-9976-12a4199d6c86'}
2025-03-13 14:58:53 - services.base_service - DEBUG - Updating status for task: test-sg2, step: deploy cfn
2025-03-13 14:58:53 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 14:58:53 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 14:58:53 - services.base_service - DEBUG - Rendering template: resources/test-sg2/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 14:58:53 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 14:58:53 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/status.sh
2025-03-13 14:58:54 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ...
Check CloudFormation Stack: test-sg2-stack
CREATE_COMPLETE

2025-03-13 14:58:54 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': 'eed20295-53d0-4319-9976-12a4199d6c86'}
2025-03-13 14:58:54 - services.base_service - DEBUG - Updating status for task: test-sg2, step: status
2025-03-13 14:58:54 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 14:58:54 - services.base_service - DEBUG - Updating application record with build_id: eed20295-53d0-4319-9976-12a4199d6c86, changes: {'status': 'success', 'tasks_built': ['test-sg', 'test-sg2']}
2025-03-13 14:58:54 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104639a90>
2025-03-13 14:58:54 - services.build_service - INFO - Build for 'test-infra' completed with status: success
2025-03-13 14:58:54 - uvicorn.access - INFO - 127.0.0.1:55237 - "POST /build/ HTTP/1.1" 200
2025-03-13 15:00:33 - uvicorn.error - WARNING - StatReload detected changes in 'services/unbuild_service.py'. Reloading...
2025-03-13 15:00:33 - uvicorn.error - INFO - Shutting down
2025-03-13 15:00:33 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 15:00:33 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 15:00:33 - uvicorn.error - INFO - Finished server process [25740]
2025-03-13 15:00:34 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 15:00:34 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 15:00:34 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 15:00:34 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 15:00:34 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 15:00:34 - uvicorn.error - INFO - Started server process [26119]
2025-03-13 15:00:34 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 15:00:34 - uvicorn.error - INFO - Application startup complete.
2025-03-13 15:01:03 - services.unbuild_service - INFO - Starting unbuild for component: test-infra
2025-03-13 15:01:03 - services.unbuild_service - INFO - Using build_id 'eed20295-53d0-4319-9976-12a4199d6c86' for unbuild of component: test-infra
2025-03-13 15:01:03 - services.base_service - DEBUG - Updating application record with build_id: eed20295-53d0-4319-9976-12a4199d6c86, changes: {'action': 'unbuild', 'status': 'started'}
2025-03-13 15:01:03 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x133a8bcb0>
2025-03-13 15:01:03 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 15:01:03 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 15:01:03 - services.unbuild_service - INFO - Executing unbuild task: test-sg
2025-03-13 15:01:03 - services.base_service - DEBUG - Loading configuration for resource: test-sg, environment: np
2025-03-13 15:01:03 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 15:01:03 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 15:01:03 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 15:01:03 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 15:01:03 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 15:01:03 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg
2025-03-13 15:01:03 - services.unbuild_service - DEBUG - Preparing to destroy resource 'test-sg'
2025-03-13 15:01:03 - services.unbuild_service - DEBUG - Found destroy template: resources/test-sg/destroy.sh.j2
2025-03-13 15:01:03 - services.base_service - DEBUG - Rendering template: resources/test-sg/destroy.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 15:01:03 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 15:01:03 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/destroy.sh
2025-03-13 15:01:35 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Deleting CloudFormation Stack: test-sg-stack
Waiting for stack deletion to complete...
Stack test-sg-stack has been successfully deleted.

2025-03-13 15:01:35 - services.unbuild_service - DEBUG - Destroy result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: test-sg-stack\nWaiting for stack deletion to complete...\nStack test-sg-stack has been successfully deleted.\n', 'uuid': 'eed20295-53d0-4319-9976-12a4199d6c86'}
2025-03-13 15:01:35 - services.base_service - DEBUG - Updating status for task: test-sg, step: test-sg
2025-03-13 15:01:35 - services.base_service - DEBUG - Status updated successfully for step: test-sg
2025-03-13 15:01:35 - services.unbuild_service - INFO - Executing unbuild task: test-sg2
2025-03-13 15:01:35 - services.base_service - DEBUG - Loading configuration for resource: test-sg2, environment: np
2025-03-13 15:01:35 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 15:01:35 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 15:01:35 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-13 15:01:35 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-13 15:01:35 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 15:01:35 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg2
2025-03-13 15:01:35 - services.unbuild_service - DEBUG - Preparing to destroy resource 'test-sg2'
2025-03-13 15:01:35 - services.unbuild_service - DEBUG - Found destroy template: resources/test-sg2/destroy.sh.j2
2025-03-13 15:01:35 - services.base_service - DEBUG - Rendering template: resources/test-sg2/destroy.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 15:01:35 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 15:01:35 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/destroy.sh
2025-03-13 15:02:07 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ...
Deleting CloudFormation Stack: test-sg2-stack
Waiting for stack deletion to complete...
Stack test-sg2-stack has been successfully deleted.

2025-03-13 15:02:07 - services.unbuild_service - DEBUG - Destroy result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: test-sg2-stack\nWaiting for stack deletion to complete...\nStack test-sg2-stack has been successfully deleted.\n', 'uuid': 'eed20295-53d0-4319-9976-12a4199d6c86'}
2025-03-13 15:02:07 - services.base_service - DEBUG - Updating status for task: test-sg2, step: test-sg2
2025-03-13 15:02:07 - services.base_service - DEBUG - Status updated successfully for step: test-sg2
2025-03-13 15:02:07 - services.unbuild_service - INFO - Unbuild process completed successfully for component: test-infra
2025-03-13 15:02:07 - services.base_service - DEBUG - Deleting application record with build_id: eed20295-53d0-4319-9976-12a4199d6c86
2025-03-13 15:02:07 - services.base_service - DEBUG - Application record with build_id eed20295-53d0-4319-9976-12a4199d6c86 deleted.
2025-03-13 15:02:07 - uvicorn.access - INFO - 127.0.0.1:55264 - "POST /unbuild/ HTTP/1.1" 200
2025-03-13 15:02:33 - services.status_service - DEBUG - Getting latest application record for: test-infra
2025-03-13 15:02:33 - services.status_service - INFO - Found application record for 'test-infra' with UUID: ea8078c7-f7f9-45e0-9956-05f0fdf27652
2025-03-13 15:02:33 - services.status_service - DEBUG - Retrieved 5 step(s) for application UUID: ea8078c7-f7f9-45e0-9956-05f0fdf27652
2025-03-13 15:02:33 - services.status_service - DEBUG - Status response constructed: {'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652', 'application_name': 'test-infra', 'action': 'build', 'status': 'success', 'timestamp': '2025-03-13T03:42:48.396085', 'steps': [{'id': 28, 'task_name': 'test-s3', 'step_name': 'destroy', 'status': {'resource': 'test-s3', 'status': 'error', 'message': 'Script path resources/test-s3/destroy.sh does not exist.', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:48.398610', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 29, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:49.500142', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 30, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:50.282436', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 31, 'task_name': 'test-sg2', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg2-stack is up to date\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:51.367804', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 32, 'task_name': 'test-sg2', 'step_name': 'status', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:52.115893', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}]}
2025-03-13 15:02:33 - uvicorn.access - INFO - 127.0.0.1:55300 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 15:53:26 - uvicorn.error - WARNING - StatReload detected changes in 'services/status_service.py'. Reloading...
2025-03-13 15:53:26 - uvicorn.error - INFO - Shutting down
2025-03-13 15:53:26 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 15:53:26 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 15:53:26 - uvicorn.error - INFO - Finished server process [26119]
2025-03-13 15:53:26 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 15:53:26 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 15:53:26 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 15:53:26 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 15:53:26 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 15:53:27 - uvicorn.error - INFO - Started server process [50235]
2025-03-13 15:53:27 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 15:53:27 - uvicorn.error - INFO - Application startup complete.
2025-03-13 15:53:35 - services.status_service - INFO - No active build for 'test-infra'. Returning most recent build (build_id: ea8078c7-f7f9-45e0-9956-05f0fdf27652).
2025-03-13 15:53:35 - services.status_service - DEBUG - Found 5 steps for build_id: ea8078c7-f7f9-45e0-9956-05f0fdf27652
2025-03-13 15:53:35 - services.status_service - DEBUG - Status response for 'test-infra': {'application': 'test-infra', 'build_id': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652', 'build_status': 'success', 'steps': [{'id': 28, 'task_name': 'test-s3', 'step_name': 'destroy', 'status': {'resource': 'test-s3', 'status': 'error', 'message': 'Script path resources/test-s3/destroy.sh does not exist.', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:48.398610', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 29, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:49.500142', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 30, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:50.282436', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 31, 'task_name': 'test-sg2', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg2-stack is up to date\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:51.367804', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 32, 'task_name': 'test-sg2', 'step_name': 'status', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:52.115893', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}]}
2025-03-13 15:53:35 - uvicorn.access - INFO - 127.0.0.1:55854 - "GET /status/?application_name=test-infra HTTP/1.1" 500
2025-03-13 15:53:35 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'missing', 'loc': ('response', 'uuid'), 'msg': 'Field required', 'input': {'application': 'test-infra', 'build_id': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652', 'build_status': 'success', 'steps': [{'id': 28, 'task_name': 'test-s3', 'step_name': 'destroy', 'status': {'resource': 'test-s3', 'status': 'error', 'message': 'Script path resources/test-s3/destroy.sh does not exist.', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:48.398610', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 29, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:49.500142', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 30, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:50.282436', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 31, 'task_name': 'test-sg2', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg2-stack is up to date\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:51.367804', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 32, 'task_name': 'test-sg2', 'step_name': 'status', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:52.115893', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}]}}
  {'type': 'missing', 'loc': ('response', 'application_name'), 'msg': 'Field required', 'input': {'application': 'test-infra', 'build_id': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652', 'build_status': 'success', 'steps': [{'id': 28, 'task_name': 'test-s3', 'step_name': 'destroy', 'status': {'resource': 'test-s3', 'status': 'error', 'message': 'Script path resources/test-s3/destroy.sh does not exist.', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:48.398610', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 29, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:49.500142', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 30, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:50.282436', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 31, 'task_name': 'test-sg2', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg2-stack is up to date\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:51.367804', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 32, 'task_name': 'test-sg2', 'step_name': 'status', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:52.115893', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}]}}

2025-03-13 15:53:45 - services.status_service - INFO - No active build for 'test-infra'. Returning most recent build (build_id: ea8078c7-f7f9-45e0-9956-05f0fdf27652).
2025-03-13 15:53:45 - services.status_service - DEBUG - Found 5 steps for build_id: ea8078c7-f7f9-45e0-9956-05f0fdf27652
2025-03-13 15:53:45 - services.status_service - DEBUG - Status response for 'test-infra': {'application': 'test-infra', 'build_id': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652', 'build_status': 'success', 'steps': [{'id': 28, 'task_name': 'test-s3', 'step_name': 'destroy', 'status': {'resource': 'test-s3', 'status': 'error', 'message': 'Script path resources/test-s3/destroy.sh does not exist.', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:48.398610', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 29, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:49.500142', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 30, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:50.282436', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 31, 'task_name': 'test-sg2', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg2-stack is up to date\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:51.367804', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 32, 'task_name': 'test-sg2', 'step_name': 'status', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:52.115893', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}]}
2025-03-13 15:53:45 - uvicorn.access - INFO - 127.0.0.1:55855 - "GET /status/?application_name=test-infra HTTP/1.1" 500
2025-03-13 15:53:45 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'missing', 'loc': ('response', 'uuid'), 'msg': 'Field required', 'input': {'application': 'test-infra', 'build_id': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652', 'build_status': 'success', 'steps': [{'id': 28, 'task_name': 'test-s3', 'step_name': 'destroy', 'status': {'resource': 'test-s3', 'status': 'error', 'message': 'Script path resources/test-s3/destroy.sh does not exist.', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:48.398610', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 29, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:49.500142', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 30, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:50.282436', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 31, 'task_name': 'test-sg2', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg2-stack is up to date\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:51.367804', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 32, 'task_name': 'test-sg2', 'step_name': 'status', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:52.115893', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}]}}
  {'type': 'missing', 'loc': ('response', 'application_name'), 'msg': 'Field required', 'input': {'application': 'test-infra', 'build_id': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652', 'build_status': 'success', 'steps': [{'id': 28, 'task_name': 'test-s3', 'step_name': 'destroy', 'status': {'resource': 'test-s3', 'status': 'error', 'message': 'Script path resources/test-s3/destroy.sh does not exist.', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:48.398610', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 29, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:49.500142', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 30, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:50.282436', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 31, 'task_name': 'test-sg2', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg2-stack is up to date\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:51.367804', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 32, 'task_name': 'test-sg2', 'step_name': 'status', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:52.115893', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}]}}

2025-03-13 15:54:39 - uvicorn.error - WARNING - StatReload detected changes in 'services/status_service.py'. Reloading...
2025-03-13 15:54:39 - uvicorn.error - INFO - Shutting down
2025-03-13 15:54:40 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 15:54:40 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 15:54:40 - uvicorn.error - INFO - Finished server process [50235]
2025-03-13 15:54:40 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 15:54:40 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 15:54:40 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 15:54:40 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 15:54:40 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 15:54:40 - uvicorn.error - INFO - Started server process [51671]
2025-03-13 15:54:40 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 15:54:40 - uvicorn.error - INFO - Application startup complete.
2025-03-13 15:54:45 - services.status_service - INFO - No active build for 'test-infra'. Using most recent build (UUID: ea8078c7-f7f9-45e0-9956-05f0fdf27652).
2025-03-13 15:54:45 - services.status_service - DEBUG - Found 5 step(s) for build UUID: ea8078c7-f7f9-45e0-9956-05f0fdf27652
2025-03-13 15:54:45 - services.status_service - DEBUG - Status response constructed: {'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652', 'application_name': 'test-infra', 'steps': [{'id': 28, 'task_name': 'test-s3', 'step_name': 'destroy', 'status': {'resource': 'test-s3', 'status': 'error', 'message': 'Script path resources/test-s3/destroy.sh does not exist.', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:48.398610', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 29, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:49.500142', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 30, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:50.282436', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 31, 'task_name': 'test-sg2', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg2-stack is up to date\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:51.367804', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, {'id': 32, 'task_name': 'test-sg2', 'step_name': 'status', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}, 'timestamp': '2025-03-13T14:42:52.115893', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}]}
2025-03-13 15:54:45 - uvicorn.access - INFO - 127.0.0.1:55868 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 15:54:58 - services.unbuild_service - INFO - Starting unbuild for component: test-infra
2025-03-13 15:54:58 - services.unbuild_service - INFO - Using build_id 'ea8078c7-f7f9-45e0-9956-05f0fdf27652' for unbuild of component: test-infra
2025-03-13 15:54:58 - services.base_service - DEBUG - Updating application record with build_id: ea8078c7-f7f9-45e0-9956-05f0fdf27652, changes: {'action': 'unbuild', 'status': 'started'}
2025-03-13 15:54:58 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x10668b4d0>
2025-03-13 15:54:58 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 15:54:58 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 15:54:58 - services.unbuild_service - INFO - Executing unbuild task: test-sg
2025-03-13 15:54:58 - services.base_service - DEBUG - Loading configuration for resource: test-sg, environment: np
2025-03-13 15:54:58 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 15:54:58 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 15:54:58 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 15:54:58 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 15:54:58 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 15:54:58 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg
2025-03-13 15:54:58 - services.unbuild_service - DEBUG - Preparing to destroy resource 'test-sg'
2025-03-13 15:54:58 - services.unbuild_service - DEBUG - Found destroy template: resources/test-sg/destroy.sh.j2
2025-03-13 15:54:58 - services.base_service - DEBUG - Rendering template: resources/test-sg/destroy.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 15:54:58 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 15:54:58 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/destroy.sh
2025-03-13 15:55:00 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Deleting CloudFormation Stack: test-sg-stack
Waiting for stack deletion to complete...
Stack test-sg-stack has been successfully deleted.

2025-03-13 15:55:00 - services.unbuild_service - DEBUG - Destroy result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: test-sg-stack\nWaiting for stack deletion to complete...\nStack test-sg-stack has been successfully deleted.\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}
2025-03-13 15:55:00 - services.base_service - DEBUG - Updating status for task: test-sg, step: test-sg
2025-03-13 15:55:00 - services.base_service - DEBUG - Status updated successfully for step: test-sg
2025-03-13 15:55:00 - services.unbuild_service - INFO - Executing unbuild task: test-sg2
2025-03-13 15:55:00 - services.base_service - DEBUG - Loading configuration for resource: test-sg2, environment: np
2025-03-13 15:55:00 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 15:55:00 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 15:55:00 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-13 15:55:00 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-13 15:55:00 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 15:55:00 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg2
2025-03-13 15:55:00 - services.unbuild_service - DEBUG - Preparing to destroy resource 'test-sg2'
2025-03-13 15:55:00 - services.unbuild_service - DEBUG - Found destroy template: resources/test-sg2/destroy.sh.j2
2025-03-13 15:55:00 - services.base_service - DEBUG - Rendering template: resources/test-sg2/destroy.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 15:55:00 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 15:55:00 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/destroy.sh
2025-03-13 15:55:01 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ...
Deleting CloudFormation Stack: test-sg2-stack
Waiting for stack deletion to complete...
Stack test-sg2-stack has been successfully deleted.

2025-03-13 15:55:01 - services.unbuild_service - DEBUG - Destroy result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: test-sg2-stack\nWaiting for stack deletion to complete...\nStack test-sg2-stack has been successfully deleted.\n', 'uuid': 'ea8078c7-f7f9-45e0-9956-05f0fdf27652'}
2025-03-13 15:55:01 - services.base_service - DEBUG - Updating status for task: test-sg2, step: test-sg2
2025-03-13 15:55:01 - services.base_service - DEBUG - Status updated successfully for step: test-sg2
2025-03-13 15:55:01 - services.unbuild_service - INFO - Unbuild process completed successfully for component: test-infra
2025-03-13 15:55:01 - services.base_service - DEBUG - Deleting application record with build_id: ea8078c7-f7f9-45e0-9956-05f0fdf27652
2025-03-13 15:55:01 - services.base_service - DEBUG - Application record with build_id ea8078c7-f7f9-45e0-9956-05f0fdf27652 deleted.
2025-03-13 15:55:01 - uvicorn.access - INFO - 127.0.0.1:55875 - "POST /unbuild/ HTTP/1.1" 200
2025-03-13 15:55:20 - services.status_service - INFO - No active build for 'test-infra'. Using most recent build (UUID: 3ebb539d-b639-475b-ba41-ec5c2ae1d2a1).
2025-03-13 15:55:20 - services.status_service - DEBUG - Found 6 step(s) for build UUID: 3ebb539d-b639-475b-ba41-ec5c2ae1d2a1
2025-03-13 15:55:20 - services.status_service - DEBUG - Status response constructed: {'uuid': '3ebb539d-b639-475b-ba41-ec5c2ae1d2a1', 'application_name': 'test-infra', 'steps': [{'id': 22, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': '3ebb539d-b639-475b-ba41-ec5c2ae1d2a1'}, 'timestamp': '2025-03-13T14:40:16.001918', 'uuid': '3ebb539d-b639-475b-ba41-ec5c2ae1d2a1'}, {'id': 23, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': '3ebb539d-b639-475b-ba41-ec5c2ae1d2a1'}, 'timestamp': '2025-03-13T14:40:16.734666', 'uuid': '3ebb539d-b639-475b-ba41-ec5c2ae1d2a1'}, {'id': 24, 'task_name': 'test-sg2', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg2-stack is up to date\n', 'uuid': '3ebb539d-b639-475b-ba41-ec5c2ae1d2a1'}, 'timestamp': '2025-03-13T14:40:17.978605', 'uuid': '3ebb539d-b639-475b-ba41-ec5c2ae1d2a1'}, {'id': 25, 'task_name': 'test-sg2', 'step_name': 'status', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': '3ebb539d-b639-475b-ba41-ec5c2ae1d2a1'}, 'timestamp': '2025-03-13T14:40:18.725330', 'uuid': '3ebb539d-b639-475b-ba41-ec5c2ae1d2a1'}, {'id': 26, 'task_name': 'test-s3', 'step_name': 'deploy cfn', 'status': {'resource': 'test-s3', 'status': 'error', 'message': 'Script path resources/test-s3/deploy_cfn.sh does not exist.', 'uuid': '3ebb539d-b639-475b-ba41-ec5c2ae1d2a1'}, 'timestamp': '2025-03-13T14:40:18.728740', 'uuid': '3ebb539d-b639-475b-ba41-ec5c2ae1d2a1'}, {'id': 27, 'task_name': 'test-s3', 'step_name': 'status', 'status': {'resource': 'test-s3', 'status': 'error', 'message': 'Script path resources/test-s3/status does not exist.', 'uuid': '3ebb539d-b639-475b-ba41-ec5c2ae1d2a1'}, 'timestamp': '2025-03-13T14:40:18.729502', 'uuid': '3ebb539d-b639-475b-ba41-ec5c2ae1d2a1'}]}
2025-03-13 15:55:20 - uvicorn.access - INFO - 127.0.0.1:55900 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 15:56:52 - uvicorn.error - INFO - Shutting down
2025-03-13 15:56:52 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 15:56:52 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 15:56:52 - uvicorn.error - INFO - Finished server process [51671]
2025-03-13 15:56:52 - uvicorn.error - INFO - Stopping reloader process [25738]
2025-03-13 15:57:11 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-03-13 15:57:11 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-03-13 15:57:11 - uvicorn.error - INFO - Started reloader process [62535] using StatReload
2025-03-13 15:57:11 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 15:57:11 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 15:57:11 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 15:57:11 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 15:57:11 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 15:57:11 - uvicorn.error - INFO - Started server process [62537]
2025-03-13 15:57:11 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 15:57:11 - uvicorn.error - INFO - Application startup complete.
2025-03-13 15:57:16 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 15:57:16 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 15:57:16 - services.build_service - DEBUG - New tasks: {'test-sg2', 'test-sg'}
2025-03-13 15:57:16 - services.build_service - DEBUG - Previous tasks: set()
2025-03-13 15:57:16 - services.build_service - INFO - Tasks to destroy: set()
2025-03-13 15:57:16 - services.build_service - INFO - Starting build for 'test-infra' with build_id: 05b44b5d-2f7e-4d31-bdc8-023b0ca93c05
2025-03-13 15:57:16 - services.build_service - INFO - Executing task 'test-sg' for resource: test-sg
2025-03-13 15:57:16 - services.base_service - DEBUG - Loading configuration for resource: test-sg, environment: np
2025-03-13 15:57:16 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 15:57:16 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 15:57:16 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 15:57:16 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 15:57:16 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 15:57:16 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg
2025-03-13 15:57:16 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 15:57:16 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 15:57:16 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 15:57:16 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 15:57:16 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 15:57:16 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-13 15:57:23 - services.status_service - INFO - Active build found for 'test-infra' (UUID: 05b44b5d-2f7e-4d31-bdc8-023b0ca93c05).
2025-03-13 15:57:23 - services.status_service - DEBUG - Found 0 step(s) for build UUID: 05b44b5d-2f7e-4d31-bdc8-023b0ca93c05
2025-03-13 15:57:23 - services.status_service - DEBUG - Status response constructed: {'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05', 'application_name': 'test-infra', 'steps': []}
2025-03-13 15:57:23 - uvicorn.access - INFO - 127.0.0.1:55987 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 15:57:29 - services.status_service - INFO - Active build found for 'test-infra' (UUID: 05b44b5d-2f7e-4d31-bdc8-023b0ca93c05).
2025-03-13 15:57:29 - services.status_service - DEBUG - Found 0 step(s) for build UUID: 05b44b5d-2f7e-4d31-bdc8-023b0ca93c05
2025-03-13 15:57:29 - services.status_service - DEBUG - Status response constructed: {'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05', 'application_name': 'test-infra', 'steps': []}
2025-03-13 15:57:29 - uvicorn.access - INFO - 127.0.0.1:55988 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 15:57:47 - services.status_service - INFO - Active build found for 'test-infra' (UUID: 05b44b5d-2f7e-4d31-bdc8-023b0ca93c05).
2025-03-13 15:57:47 - services.status_service - DEBUG - Found 0 step(s) for build UUID: 05b44b5d-2f7e-4d31-bdc8-023b0ca93c05
2025-03-13 15:57:47 - services.status_service - DEBUG - Status response constructed: {'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05', 'application_name': 'test-infra', 'steps': []}
2025-03-13 15:57:47 - uvicorn.access - INFO - 127.0.0.1:55990 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 15:57:53 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ... 
Deploying test-sg-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - test-sg-stack

2025-03-13 15:57:53 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg-stack\n', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}
2025-03-13 15:57:53 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-13 15:57:53 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 15:57:53 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 15:57:53 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 15:57:53 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 15:57:53 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-13 15:57:53 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Check CloudFormation Stack: test-sg-stack
CREATE_COMPLETE

2025-03-13 15:57:53 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}
2025-03-13 15:57:53 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-13 15:57:53 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 15:57:53 - services.build_service - INFO - Executing task 'test-sg2' for resource: test-sg2
2025-03-13 15:57:53 - services.base_service - DEBUG - Loading configuration for resource: test-sg2, environment: np
2025-03-13 15:57:53 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 15:57:53 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 15:57:53 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-13 15:57:53 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-13 15:57:53 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 15:57:53 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg2
2025-03-13 15:57:53 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 15:57:53 - services.base_service - DEBUG - Rendering template: resources/test-sg2/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 15:57:53 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 15:57:53 - services.base_service - DEBUG - Rendering template: resources/test-sg2/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 15:57:53 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 15:57:53 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/deploy_cfn.sh
2025-03-13 15:57:59 - services.status_service - INFO - Active build found for 'test-infra' (UUID: 05b44b5d-2f7e-4d31-bdc8-023b0ca93c05).
2025-03-13 15:57:59 - services.status_service - DEBUG - Found 2 step(s) for build UUID: 05b44b5d-2f7e-4d31-bdc8-023b0ca93c05
2025-03-13 15:57:59 - services.status_service - DEBUG - Status response constructed: {'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05', 'application_name': 'test-infra', 'steps': [{'id': 1, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg-stack\n', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}, 'timestamp': '2025-03-13T15:57:53.067192', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}, {'id': 2, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}, 'timestamp': '2025-03-13T15:57:53.790606', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}]}
2025-03-13 15:57:59 - uvicorn.access - INFO - 127.0.0.1:55996 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 15:58:30 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ... 
Deploying test-sg2-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - test-sg2-stack

2025-03-13 15:58:30 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg2-stack\n', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}
2025-03-13 15:58:30 - services.base_service - DEBUG - Updating status for task: test-sg2, step: deploy cfn
2025-03-13 15:58:30 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 15:58:30 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 15:58:30 - services.base_service - DEBUG - Rendering template: resources/test-sg2/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 15:58:30 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 15:58:30 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/status.sh
2025-03-13 15:58:31 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ...
Check CloudFormation Stack: test-sg2-stack
CREATE_COMPLETE

2025-03-13 15:58:31 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}
2025-03-13 15:58:31 - services.base_service - DEBUG - Updating status for task: test-sg2, step: status
2025-03-13 15:58:31 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 15:58:31 - services.base_service - DEBUG - Updating application record with build_id: 05b44b5d-2f7e-4d31-bdc8-023b0ca93c05, changes: {'status': 'success', 'tasks_built': ['test-sg2', 'test-sg']}
2025-03-13 15:58:31 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x1045e7e00>
2025-03-13 15:58:31 - services.build_service - INFO - Build for 'test-infra' completed with status: success
2025-03-13 15:58:31 - uvicorn.access - INFO - 127.0.0.1:55982 - "POST /build/ HTTP/1.1" 200
2025-03-13 15:58:35 - services.status_service - INFO - No active build for 'test-infra'. Using most recent build (UUID: 05b44b5d-2f7e-4d31-bdc8-023b0ca93c05).
2025-03-13 15:58:35 - services.status_service - DEBUG - Found 4 step(s) for build UUID: 05b44b5d-2f7e-4d31-bdc8-023b0ca93c05
2025-03-13 15:58:35 - services.status_service - DEBUG - Status response constructed: {'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05', 'application_name': 'test-infra', 'steps': [{'id': 1, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg-stack\n', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}, 'timestamp': '2025-03-13T15:57:53.067192', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}, {'id': 2, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}, 'timestamp': '2025-03-13T15:57:53.790606', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}, {'id': 3, 'task_name': 'test-sg2', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg2-stack\n', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}, 'timestamp': '2025-03-13T15:58:30.498728', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}, {'id': 4, 'task_name': 'test-sg2', 'step_name': 'status', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}, 'timestamp': '2025-03-13T15:58:31.235576', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}]}
2025-03-13 15:58:35 - uvicorn.access - INFO - 127.0.0.1:56004 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 15:58:52 - services.status_service - INFO - No active build for 'test-infra'. Using most recent build (UUID: 05b44b5d-2f7e-4d31-bdc8-023b0ca93c05).
2025-03-13 15:58:52 - services.status_service - DEBUG - Found 4 step(s) for build UUID: 05b44b5d-2f7e-4d31-bdc8-023b0ca93c05
2025-03-13 15:58:52 - services.status_service - DEBUG - Status response constructed: {'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05', 'application_name': 'test-infra', 'steps': [{'id': 1, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg-stack\n', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}, 'timestamp': '2025-03-13T15:57:53.067192', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}, {'id': 2, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}, 'timestamp': '2025-03-13T15:57:53.790606', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}, {'id': 3, 'task_name': 'test-sg2', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg2-stack\n', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}, 'timestamp': '2025-03-13T15:58:30.498728', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}, {'id': 4, 'task_name': 'test-sg2', 'step_name': 'status', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}, 'timestamp': '2025-03-13T15:58:31.235576', 'uuid': '05b44b5d-2f7e-4d31-bdc8-023b0ca93c05'}]}
2025-03-13 15:58:52 - uvicorn.access - INFO - 127.0.0.1:56006 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 16:03:06 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 16:03:06 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 16:03:06 - services.build_service - DEBUG - New tasks: {'test-sg'}
2025-03-13 16:03:06 - services.build_service - DEBUG - Previous tasks: {'test-sg2', 'test-sg'}
2025-03-13 16:03:06 - services.build_service - INFO - Tasks to destroy: {'test-sg2'}
2025-03-13 16:03:06 - services.build_service - INFO - Starting build for 'test-infra' with build_id: 4ac6aa69-f05b-481c-a625-2a90a20102c0
2025-03-13 16:03:06 - services.build_service - INFO - Destroying removed resource: test-sg2
2025-03-13 16:03:06 - services.base_service - DEBUG - Loading configuration for resource: test-sg2, environment: np
2025-03-13 16:03:06 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 16:03:06 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 16:03:06 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-13 16:03:06 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-13 16:03:06 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 16:03:06 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg2
2025-03-13 16:03:06 - services.base_service - DEBUG - Rendering template: resources/test-sg2/destroy.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 16:03:06 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:03:06 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/destroy.sh
2025-03-13 16:03:23 - services.status_service - INFO - Active build found for 'test-infra' (UUID: 4ac6aa69-f05b-481c-a625-2a90a20102c0).
2025-03-13 16:03:23 - services.status_service - DEBUG - Found 0 step(s) for build UUID: 4ac6aa69-f05b-481c-a625-2a90a20102c0
2025-03-13 16:03:23 - services.status_service - DEBUG - Status response constructed: {'uuid': '4ac6aa69-f05b-481c-a625-2a90a20102c0', 'application_name': 'test-infra', 'steps': []}
2025-03-13 16:03:23 - uvicorn.access - INFO - 127.0.0.1:56083 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 16:03:34 - services.status_service - INFO - Active build found for 'test-infra' (UUID: 4ac6aa69-f05b-481c-a625-2a90a20102c0).
2025-03-13 16:03:34 - services.status_service - DEBUG - Found 0 step(s) for build UUID: 4ac6aa69-f05b-481c-a625-2a90a20102c0
2025-03-13 16:03:34 - services.status_service - DEBUG - Status response constructed: {'uuid': '4ac6aa69-f05b-481c-a625-2a90a20102c0', 'application_name': 'test-infra', 'steps': []}
2025-03-13 16:03:34 - uvicorn.access - INFO - 127.0.0.1:56087 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 16:03:38 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ...
Deleting CloudFormation Stack: test-sg2-stack
Waiting for stack deletion to complete...
Stack test-sg2-stack has been successfully deleted.

2025-03-13 16:03:38 - services.base_service - DEBUG - Updating status for task: test-sg2, step: destroy
2025-03-13 16:03:38 - services.base_service - DEBUG - Status updated successfully for step: destroy
2025-03-13 16:03:38 - services.build_service - INFO - Destroy result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: test-sg2-stack\nWaiting for stack deletion to complete...\nStack test-sg2-stack has been successfully deleted.\n', 'uuid': '4ac6aa69-f05b-481c-a625-2a90a20102c0'}
2025-03-13 16:03:38 - services.build_service - INFO - Executing task 'test-sg' for resource: test-sg
2025-03-13 16:03:38 - services.base_service - DEBUG - Loading configuration for resource: test-sg, environment: np
2025-03-13 16:03:38 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 16:03:38 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 16:03:38 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 16:03:38 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 16:03:38 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:03:38 - services.base_service - DEBUG - Configuration loaded and merged for resource: test-sg
2025-03-13 16:03:38 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 16:03:38 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:03:38 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:03:38 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:03:38 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:03:38 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-13 16:03:39 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ... 
Deploying test-sg-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack test-sg-stack is up to date

2025-03-13 16:03:39 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': '4ac6aa69-f05b-481c-a625-2a90a20102c0'}
2025-03-13 16:03:39 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-13 16:03:39 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 16:03:39 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 16:03:39 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:03:39 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:03:39 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-13 16:03:40 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Check CloudFormation Stack: test-sg-stack
CREATE_COMPLETE

2025-03-13 16:03:40 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': '4ac6aa69-f05b-481c-a625-2a90a20102c0'}
2025-03-13 16:03:40 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-13 16:03:40 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 16:03:40 - services.base_service - DEBUG - Updating application record with build_id: 4ac6aa69-f05b-481c-a625-2a90a20102c0, changes: {'status': 'success', 'tasks_built': ['test-sg']}
2025-03-13 16:03:40 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104656950>
2025-03-13 16:03:40 - services.build_service - INFO - Build for 'test-infra' completed with status: success
2025-03-13 16:03:40 - uvicorn.access - INFO - 127.0.0.1:56076 - "POST /build/ HTTP/1.1" 200
2025-03-13 16:19:07 - uvicorn.error - WARNING - StatReload detected changes in 'services/status_service.py'. Reloading...
2025-03-13 16:19:07 - uvicorn.error - INFO - Shutting down
2025-03-13 16:19:07 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 16:19:07 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 16:19:07 - uvicorn.error - INFO - Finished server process [62537]
2025-03-13 16:19:07 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:19:08 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:19:08 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:19:08 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:19:08 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:19:08 - uvicorn.error - INFO - Started server process [8042]
2025-03-13 16:19:08 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 16:19:08 - uvicorn.error - INFO - Application startup complete.
2025-03-13 16:19:45 - uvicorn.error - WARNING - StatReload detected changes in 'services/base_service.py'. Reloading...
2025-03-13 16:19:45 - uvicorn.error - INFO - Shutting down
2025-03-13 16:19:45 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 16:19:45 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 16:19:45 - uvicorn.error - INFO - Finished server process [8042]
2025-03-13 16:19:45 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:19:45 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:19:45 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:19:45 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:19:45 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:19:45 - uvicorn.error - INFO - Started server process [8090]
2025-03-13 16:19:45 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 16:19:45 - uvicorn.error - INFO - Application startup complete.
2025-03-13 16:19:51 - uvicorn.error - WARNING - StatReload detected changes in 'services/base_service.py'. Reloading...
2025-03-13 16:19:51 - uvicorn.error - INFO - Shutting down
2025-03-13 16:19:51 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 16:19:51 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 16:19:51 - uvicorn.error - INFO - Finished server process [8090]
2025-03-13 16:19:51 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:19:52 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:19:52 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:19:52 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:19:52 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:19:52 - uvicorn.error - INFO - Started server process [8096]
2025-03-13 16:19:52 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 16:19:52 - uvicorn.error - INFO - Application startup complete.
2025-03-13 16:20:18 - services.unbuild_service - INFO - Starting unbuild for component: test-infra
2025-03-13 16:20:18 - services.unbuild_service - INFO - Using build_id '4ac6aa69-f05b-481c-a625-2a90a20102c0' for unbuild of component: test-infra
2025-03-13 16:20:18 - uvicorn.access - INFO - 127.0.0.1:56320 - "POST /unbuild/ HTTP/1.1" 500
2025-03-13 16:20:18 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 962, in run
    result = context.run(func, *args)
  File "/Users/fan.jin/work/py_builder/routes/unbuild.py", line 15, in trigger_unbuild
    result = unbuild_service.unbuild(request.component, db)
  File "/Users/fan.jin/work/py_builder/services/unbuild_service.py", line 78, in unbuild
    self.update_application_record(db, build_id, action="unbuild", status="started")
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'UnbuildService' object has no attribute 'update_application_record'
2025-03-13 16:21:07 - uvicorn.error - WARNING - StatReload detected changes in 'services/unbuild_service.py'. Reloading...
2025-03-13 16:21:07 - uvicorn.error - INFO - Shutting down
2025-03-13 16:21:08 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 16:21:08 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 16:21:08 - uvicorn.error - INFO - Finished server process [8096]
2025-03-13 16:21:08 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:21:08 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:21:08 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:21:08 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:21:08 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:21:08 - uvicorn.error - INFO - Started server process [19518]
2025-03-13 16:21:08 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 16:21:08 - uvicorn.error - INFO - Application startup complete.
2025-03-13 16:21:23 - services.unbuild_service - INFO - Starting unbuild for component: test-infra
2025-03-13 16:21:23 - services.unbuild_service - INFO - Using build_id '4ac6aa69-f05b-481c-a625-2a90a20102c0' for unbuild of component: test-infra
2025-03-13 16:21:23 - uvicorn.access - INFO - 127.0.0.1:56332 - "POST /unbuild/ HTTP/1.1" 500
2025-03-13 16:21:23 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 962, in run
    result = context.run(func, *args)
  File "/Users/fan.jin/work/py_builder/routes/unbuild.py", line 15, in trigger_unbuild
    result = unbuild_service.unbuild(request.component, db)
  File "/Users/fan.jin/work/py_builder/services/unbuild_service.py", line 78, in unbuild
    BaseService.update_application_record(db, build_id, action="unbuild", status="started")
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'BaseService' has no attribute 'update_application_record'
2025-03-13 16:22:18 - uvicorn.error - WARNING - StatReload detected changes in 'services/base_service.py'. Reloading...
2025-03-13 16:22:18 - uvicorn.error - INFO - Shutting down
2025-03-13 16:22:18 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 16:22:18 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 16:22:18 - uvicorn.error - INFO - Finished server process [19518]
2025-03-13 16:22:18 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:22:18 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:22:18 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:22:18 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:22:18 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:22:18 - uvicorn.error - INFO - Started server process [19568]
2025-03-13 16:22:18 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 16:22:18 - uvicorn.error - INFO - Application startup complete.
2025-03-13 16:25:34 - uvicorn.error - INFO - Shutting down
2025-03-13 16:25:34 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 16:25:34 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 16:25:34 - uvicorn.error - INFO - Finished server process [19568]
2025-03-13 16:25:34 - uvicorn.error - INFO - Stopping reloader process [62535]
2025-03-13 16:25:35 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-03-13 16:25:35 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-03-13 16:25:35 - uvicorn.error - INFO - Started reloader process [24718] using StatReload
2025-03-13 16:25:35 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:25:35 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:25:35 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:25:35 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:25:35 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:25:36 - uvicorn.error - INFO - Started server process [24816]
2025-03-13 16:25:36 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 16:25:36 - uvicorn.error - INFO - Application startup complete.
2025-03-13 16:25:39 - services.unbuild_service - INFO - Starting unbuild for component: test-infra
2025-03-13 16:25:39 - services.unbuild_service - INFO - Using build_id '4ac6aa69-f05b-481c-a625-2a90a20102c0' for unbuild of component: test-infra
2025-03-13 16:25:39 - services.base_service - DEBUG - Updating application record with build_id: 4ac6aa69-f05b-481c-a625-2a90a20102c0, changes: {'action': 'unbuild', 'status': 'started'}
2025-03-13 16:25:39 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x1084afcb0>
2025-03-13 16:25:39 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 16:25:39 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 16:25:39 - services.unbuild_service - INFO - Executing unbuild task: test-sg
2025-03-13 16:25:39 - uvicorn.access - INFO - 127.0.0.1:56491 - "POST /unbuild/ HTTP/1.1" 500
2025-03-13 16:25:39 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 962, in run
    result = context.run(func, *args)
  File "/Users/fan.jin/work/py_builder/routes/unbuild.py", line 15, in trigger_unbuild
    result = unbuild_service.unbuild(request.component, db)
  File "/Users/fan.jin/work/py_builder/services/unbuild_service.py", line 97, in unbuild
    task_results = self.execute_task(task, db, build_id)
  File "/Users/fan.jin/work/py_builder/services/unbuild_service.py", line 36, in execute_task
    envs = self.load_config(task)
           ^^^^^^^^^^^^^^^^
AttributeError: 'UnbuildService' object has no attribute 'load_config'
2025-03-13 16:27:09 - uvicorn.error - WARNING - StatReload detected changes in 'services/unbuild_service.py'. Reloading...
2025-03-13 16:27:09 - uvicorn.error - INFO - Shutting down
2025-03-13 16:27:09 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 16:27:09 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 16:27:09 - uvicorn.error - INFO - Finished server process [24816]
2025-03-13 16:27:09 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:27:09 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:27:09 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:27:09 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:27:09 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:27:09 - uvicorn.error - INFO - Started server process [31616]
2025-03-13 16:27:09 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 16:27:09 - uvicorn.error - INFO - Application startup complete.
2025-03-13 16:27:25 - services.unbuild_service - INFO - Starting unbuild for component: test-infra
2025-03-13 16:27:25 - services.unbuild_service - ERROR - An unbuild for 'test-infra' is already in progress (UUID: 4ac6aa69-f05b-481c-a625-2a90a20102c0)
2025-03-13 16:27:25 - uvicorn.access - INFO - 127.0.0.1:56503 - "POST /unbuild/ HTTP/1.1" 200
2025-03-13 16:27:43 - services.unbuild_service - INFO - Starting unbuild for component: test-infra
2025-03-13 16:27:43 - services.unbuild_service - ERROR - An unbuild for 'test-infra' is already in progress (UUID: 4ac6aa69-f05b-481c-a625-2a90a20102c0)
2025-03-13 16:27:43 - uvicorn.access - INFO - 127.0.0.1:56508 - "POST /unbuild/ HTTP/1.1" 200
2025-03-13 16:27:59 - uvicorn.error - INFO - Shutting down
2025-03-13 16:27:59 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 16:27:59 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 16:27:59 - uvicorn.error - INFO - Finished server process [31616]
2025-03-13 16:27:59 - uvicorn.error - INFO - Stopping reloader process [24718]
2025-03-13 16:28:01 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-03-13 16:28:01 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-03-13 16:28:01 - uvicorn.error - INFO - Started reloader process [31709] using StatReload
2025-03-13 16:28:01 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:28:01 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:28:01 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:28:01 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:28:01 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:28:01 - uvicorn.error - INFO - Started server process [31711]
2025-03-13 16:28:01 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 16:28:01 - uvicorn.error - INFO - Application startup complete.
2025-03-13 16:28:08 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 16:28:08 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 16:28:08 - services.build_service - DEBUG - New tasks: {'test-sg'}
2025-03-13 16:28:08 - services.build_service - DEBUG - Previous tasks: set()
2025-03-13 16:28:08 - services.build_service - INFO - Tasks to destroy: set()
2025-03-13 16:28:08 - services.build_service - INFO - Starting build for 'test-infra' with build_id: 3ca8507c-ac26-4d96-a916-8f3ebfea7bd3
2025-03-13 16:28:08 - services.build_service - INFO - Executing task 'test-sg' for resource: test-sg
2025-03-13 16:28:08 - uvicorn.access - INFO - 127.0.0.1:56509 - "POST /build/ HTTP/1.1" 500
2025-03-13 16:28:08 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 962, in run
    result = context.run(func, *args)
  File "/Users/fan.jin/work/py_builder/routes/build.py", line 14, in trigger_build
    result = build_service.build(request.component, db)
  File "/Users/fan.jin/work/py_builder/services/build_service.py", line 137, in build
    task_results = self.execute_task(task, db, build_id)
  File "/Users/fan.jin/work/py_builder/services/build_service.py", line 49, in execute_task
    envs = self.load_config(task)
           ^^^^^^^^^^^^^^^^
AttributeError: 'BuildService' object has no attribute 'load_config'
2025-03-13 16:29:16 - uvicorn.error - WARNING - StatReload detected changes in 'services/base_service.py'. Reloading...
2025-03-13 16:29:16 - uvicorn.error - INFO - Shutting down
2025-03-13 16:29:16 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 16:29:16 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 16:29:16 - uvicorn.error - INFO - Finished server process [31711]
2025-03-13 16:29:16 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:29:16 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:29:16 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:29:16 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:29:17 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:29:17 - uvicorn.error - INFO - Started server process [31897]
2025-03-13 16:29:17 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 16:29:17 - uvicorn.error - INFO - Application startup complete.
2025-03-13 16:29:47 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-03-13 16:29:47 - uvicorn.error - INFO - Shutting down
2025-03-13 16:29:47 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 16:29:47 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 16:29:47 - uvicorn.error - INFO - Finished server process [31897]
2025-03-13 16:29:47 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:29:48 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:29:48 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:29:48 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:29:48 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:29:56 - uvicorn.error - INFO - Stopping reloader process [31709]
2025-03-13 16:29:58 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-03-13 16:29:58 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-03-13 16:29:58 - uvicorn.error - INFO - Started reloader process [31952] using StatReload
2025-03-13 16:29:58 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:29:58 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:29:58 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:29:58 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:29:58 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:30:41 - uvicorn.error - INFO - Stopping reloader process [31952]
2025-03-13 16:30:44 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-03-13 16:30:44 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-03-13 16:30:44 - uvicorn.error - INFO - Started reloader process [43051] using StatReload
2025-03-13 16:30:45 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:30:45 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:30:45 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:30:45 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:30:45 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:30:47 - uvicorn.error - INFO - Stopping reloader process [43051]
2025-03-13 16:32:51 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-03-13 16:32:51 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-03-13 16:32:51 - uvicorn.error - INFO - Started reloader process [43452] using StatReload
2025-03-13 16:32:51 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:32:51 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:32:51 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:32:51 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:32:51 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:32:51 - uvicorn.error - INFO - Started server process [43454]
2025-03-13 16:32:51 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 16:32:51 - uvicorn.error - INFO - Application startup complete.
2025-03-13 16:32:55 - services.build_service - ERROR - Build already in progress for component 'test-infra' (UUID: 3ca8507c-ac26-4d96-a916-8f3ebfea7bd3)
2025-03-13 16:32:55 - uvicorn.access - INFO - 127.0.0.1:56539 - "POST /build/ HTTP/1.1" 200
2025-03-13 16:33:01 - uvicorn.error - INFO - Shutting down
2025-03-13 16:33:01 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 16:33:01 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 16:33:01 - uvicorn.error - INFO - Finished server process [43454]
2025-03-13 16:33:01 - uvicorn.error - INFO - Stopping reloader process [43452]
2025-03-13 16:35:36 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-03-13 16:35:36 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-03-13 16:35:36 - uvicorn.error - INFO - Started reloader process [46365] using StatReload
2025-03-13 16:35:36 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:35:37 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:35:37 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:35:37 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:35:37 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:35:37 - uvicorn.error - INFO - Started server process [46466]
2025-03-13 16:35:37 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 16:35:37 - uvicorn.error - INFO - Application startup complete.
2025-03-13 16:35:40 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 16:35:40 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 16:35:40 - services.build_service - DEBUG - New tasks: {'test-sg'}
2025-03-13 16:35:40 - services.build_service - DEBUG - Previous tasks: set()
2025-03-13 16:35:40 - services.build_service - INFO - Tasks to destroy: set()
2025-03-13 16:35:40 - services.build_service - INFO - Starting build for 'test-infra' with build_id: 919f34a0-5a7d-415a-a55a-0e34fad83686
2025-03-13 16:35:40 - services.build_service - INFO - Executing task 'test-sg' for resource: test-sg (action: build)
2025-03-13 16:35:40 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 16:35:40 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 16:35:40 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 16:35:40 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 16:35:40 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:35:40 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 16:35:40 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:35:40 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:35:40 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:35:40 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:35:40 - uvicorn.access - INFO - 127.0.0.1:56574 - "POST /build/ HTTP/1.1" 500
2025-03-13 16:35:40 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 962, in run
    result = context.run(func, *args)
  File "/Users/fan.jin/work/py_builder/routes/build.py", line 14, in trigger_build
    result = build_service.build(request.component, db)
  File "/Users/fan.jin/work/py_builder/services/build_service.py", line 123, in build
    task_results = self.execute_task(task, "build", db, build_id)
  File "/Users/fan.jin/work/py_builder/services/build_service.py", line 51, in execute_task
    result = self.run_step(resource_name, step, envs, db, build_id)
  File "/Users/fan.jin/work/py_builder/services/build_service.py", line 38, in run_step
    result = self.call_subprocess(resource_name, rendered_script_path, build_id)
             ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'BuildService' object has no attribute 'call_subprocess'
2025-03-13 16:37:15 - uvicorn.error - WARNING - StatReload detected changes in 'services/base_service.py'. Reloading...
2025-03-13 16:37:15 - uvicorn.error - INFO - Shutting down
2025-03-13 16:37:15 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 16:37:15 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 16:37:15 - uvicorn.error - INFO - Finished server process [46466]
2025-03-13 16:37:15 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:37:16 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:37:16 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:37:16 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:37:16 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:37:16 - uvicorn.error - INFO - Started server process [55208]
2025-03-13 16:37:16 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 16:37:16 - uvicorn.error - INFO - Application startup complete.
2025-03-13 16:37:32 - uvicorn.error - WARNING - StatReload detected changes in 'services/base_service.py'. Reloading...
2025-03-13 16:37:32 - uvicorn.error - INFO - Shutting down
2025-03-13 16:37:32 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 16:37:32 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 16:37:32 - uvicorn.error - INFO - Finished server process [55208]
2025-03-13 16:37:32 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:37:32 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:37:32 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:37:32 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:37:33 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:37:33 - uvicorn.error - INFO - Started server process [55219]
2025-03-13 16:37:33 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 16:37:33 - uvicorn.error - INFO - Application startup complete.
2025-03-13 16:38:55 - uvicorn.error - WARNING - StatReload detected changes in 'services/base_service.py'. Reloading...
2025-03-13 16:38:55 - uvicorn.error - INFO - Shutting down
2025-03-13 16:38:55 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 16:38:55 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 16:38:55 - uvicorn.error - INFO - Finished server process [55219]
2025-03-13 16:38:56 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:38:56 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:38:56 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:38:56 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:38:56 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:38:56 - uvicorn.error - INFO - Started server process [55382]
2025-03-13 16:38:56 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 16:38:56 - uvicorn.error - INFO - Application startup complete.
2025-03-13 16:39:03 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-03-13 16:39:03 - uvicorn.error - INFO - Shutting down
2025-03-13 16:39:04 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 16:39:04 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 16:39:04 - uvicorn.error - INFO - Finished server process [55382]
2025-03-13 16:39:04 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:39:04 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:39:04 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:39:04 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:39:04 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:39:04 - uvicorn.error - INFO - Started server process [55400]
2025-03-13 16:39:04 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 16:39:04 - uvicorn.error - INFO - Application startup complete.
2025-03-13 16:39:15 - uvicorn.error - WARNING - StatReload detected changes in 'services/unbuild_service.py'. Reloading...
2025-03-13 16:39:15 - uvicorn.error - INFO - Shutting down
2025-03-13 16:39:15 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 16:39:15 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 16:39:15 - uvicorn.error - INFO - Finished server process [55400]
2025-03-13 16:39:15 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:39:15 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:39:15 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:39:15 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:39:15 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:39:16 - uvicorn.error - INFO - Started server process [55411]
2025-03-13 16:39:16 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 16:39:16 - uvicorn.error - INFO - Application startup complete.
2025-03-13 16:39:26 - uvicorn.error - WARNING - StatReload detected changes in 'services/status_service.py'. Reloading...
2025-03-13 16:39:26 - uvicorn.error - INFO - Shutting down
2025-03-13 16:39:26 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 16:39:26 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 16:39:26 - uvicorn.error - INFO - Finished server process [55411]
2025-03-13 16:39:26 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:39:26 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:39:26 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:39:26 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:39:26 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:39:26 - uvicorn.error - INFO - Started server process [55427]
2025-03-13 16:39:26 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 16:39:26 - uvicorn.error - INFO - Application startup complete.
2025-03-13 16:39:28 - uvicorn.error - INFO - Shutting down
2025-03-13 16:39:28 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 16:39:28 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 16:39:28 - uvicorn.error - INFO - Finished server process [55427]
2025-03-13 16:39:28 - uvicorn.error - INFO - Stopping reloader process [46365]
2025-03-13 16:39:39 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-03-13 16:39:39 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-03-13 16:39:39 - uvicorn.error - INFO - Started reloader process [55464] using StatReload
2025-03-13 16:39:39 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:39:40 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:39:40 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:39:40 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:39:40 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:39:40 - uvicorn.error - INFO - Started server process [55466]
2025-03-13 16:39:40 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 16:39:40 - uvicorn.error - INFO - Application startup complete.
2025-03-13 16:39:46 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 16:39:46 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 16:39:46 - services.build_service - DEBUG - New tasks: {'test-sg'}
2025-03-13 16:39:46 - services.build_service - DEBUG - Previous tasks: set()
2025-03-13 16:39:46 - services.build_service - INFO - Tasks to destroy: set()
2025-03-13 16:39:46 - services.build_service - INFO - Starting build for 'test-infra' with build_id: e5a6417c-0e3c-41d3-a0e0-494ff41fdfae
2025-03-13 16:39:46 - services.build_service - INFO - Executing task 'test-sg' for resource: test-sg (action: build)
2025-03-13 16:39:46 - services.base_service - DEBUG - Loading config for resource: test-sg, environment: np
2025-03-13 16:39:46 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 16:39:46 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 16:39:46 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 16:39:46 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 16:39:46 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:39:46 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:39:46 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 16:39:46 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:39:46 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:39:46 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:39:46 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:39:46 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-13 16:39:47 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ... 
Deploying test-sg-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack test-sg-stack is up to date

2025-03-13 16:39:47 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae'}
2025-03-13 16:39:47 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-13 16:39:47 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 16:39:47 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 16:39:47 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:39:47 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:39:47 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-13 16:39:48 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Check CloudFormation Stack: test-sg-stack
CREATE_COMPLETE

2025-03-13 16:39:48 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae'}
2025-03-13 16:39:48 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-13 16:39:48 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 16:39:48 - services.base_service - DEBUG - Updating application record with build_id: e5a6417c-0e3c-41d3-a0e0-494ff41fdfae, changes: {'status': 'success', 'tasks_built': ['test-sg']}
2025-03-13 16:39:48 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x10412fe00>
2025-03-13 16:39:48 - services.build_service - INFO - Build for 'test-infra' completed with status: success
2025-03-13 16:39:48 - uvicorn.access - INFO - 127.0.0.1:56606 - "POST /build/ HTTP/1.1" 200
2025-03-13 16:39:56 - services.status_service - INFO - No active build for 'test-infra'. Using most recent build (UUID: e5a6417c-0e3c-41d3-a0e0-494ff41fdfae).
2025-03-13 16:39:56 - services.status_service - DEBUG - Found 2 step(s) for build UUID: e5a6417c-0e3c-41d3-a0e0-494ff41fdfae
2025-03-13 16:39:56 - services.status_service - DEBUG - Status response constructed: {'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae', 'application_name': 'test-infra', 'steps': [{'id': 1, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae'}, 'timestamp': '2025-03-13T16:39:47.622002', 'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae'}, {'id': 2, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae'}, 'timestamp': '2025-03-13T16:39:48.416322', 'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae'}]}
2025-03-13 16:39:56 - uvicorn.access - INFO - 127.0.0.1:56615 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 16:40:10 - services.unbuild_service - INFO - Starting unbuild for component: test-infra
2025-03-13 16:40:10 - services.unbuild_service - INFO - Using build_id 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae' for unbuild of component: test-infra
2025-03-13 16:40:10 - services.base_service - DEBUG - Updating application record with build_id: e5a6417c-0e3c-41d3-a0e0-494ff41fdfae, changes: {'action': 'unbuild', 'status': 'started'}
2025-03-13 16:40:10 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x10418b9d0>
2025-03-13 16:40:10 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 16:40:10 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 16:40:10 - services.unbuild_service - INFO - Executing unbuild task: test-sg
2025-03-13 16:40:10 - services.unbuild_service - DEBUG - Preparing to destroy resource 'test-sg'
2025-03-13 16:40:10 - services.base_service - DEBUG - Loading config for resource: test-sg, environment: np
2025-03-13 16:40:10 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 16:40:10 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 16:40:10 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 16:40:10 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 16:40:10 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:40:10 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:40:10 - services.unbuild_service - DEBUG - Found destroy template for resource 'test-sg': resources/test-sg/destroy.sh.j2
2025-03-13 16:40:10 - services.base_service - DEBUG - Rendering template: resources/test-sg/destroy.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:40:10 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:40:10 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/destroy.sh
2025-03-13 16:40:15 - services.status_service - INFO - Active build found for 'test-infra' (UUID: e5a6417c-0e3c-41d3-a0e0-494ff41fdfae).
2025-03-13 16:40:15 - services.status_service - DEBUG - Found 2 step(s) for build UUID: e5a6417c-0e3c-41d3-a0e0-494ff41fdfae
2025-03-13 16:40:15 - services.status_service - DEBUG - Status response constructed: {'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae', 'application_name': 'test-infra', 'steps': [{'id': 1, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae'}, 'timestamp': '2025-03-13T16:39:47.622002', 'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae'}, {'id': 2, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae'}, 'timestamp': '2025-03-13T16:39:48.416322', 'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae'}]}
2025-03-13 16:40:15 - uvicorn.access - INFO - 127.0.0.1:56625 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 16:40:29 - services.status_service - INFO - Active build found for 'test-infra' (UUID: e5a6417c-0e3c-41d3-a0e0-494ff41fdfae).
2025-03-13 16:40:29 - services.status_service - DEBUG - Found 2 step(s) for build UUID: e5a6417c-0e3c-41d3-a0e0-494ff41fdfae
2025-03-13 16:40:29 - services.status_service - DEBUG - Status response constructed: {'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae', 'application_name': 'test-infra', 'steps': [{'id': 1, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae'}, 'timestamp': '2025-03-13T16:39:47.622002', 'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae'}, {'id': 2, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae'}, 'timestamp': '2025-03-13T16:39:48.416322', 'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae'}]}
2025-03-13 16:40:29 - uvicorn.access - INFO - 127.0.0.1:56631 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 16:40:33 - services.status_service - INFO - Active build found for 'test-infra' (UUID: e5a6417c-0e3c-41d3-a0e0-494ff41fdfae).
2025-03-13 16:40:33 - services.status_service - DEBUG - Found 2 step(s) for build UUID: e5a6417c-0e3c-41d3-a0e0-494ff41fdfae
2025-03-13 16:40:33 - services.status_service - DEBUG - Status response constructed: {'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae', 'application_name': 'test-infra', 'steps': [{'id': 1, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae'}, 'timestamp': '2025-03-13T16:39:47.622002', 'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae'}, {'id': 2, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae'}, 'timestamp': '2025-03-13T16:39:48.416322', 'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae'}]}
2025-03-13 16:40:33 - uvicorn.access - INFO - 127.0.0.1:56633 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 16:40:42 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Deleting CloudFormation Stack: test-sg-stack
Waiting for stack deletion to complete...
Stack test-sg-stack has been successfully deleted.

2025-03-13 16:40:42 - services.unbuild_service - DEBUG - Destroy result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: test-sg-stack\nWaiting for stack deletion to complete...\nStack test-sg-stack has been successfully deleted.\n', 'uuid': 'e5a6417c-0e3c-41d3-a0e0-494ff41fdfae'}
2025-03-13 16:40:42 - services.base_service - DEBUG - Updating status for task: test-sg, step: destroy
2025-03-13 16:40:42 - services.base_service - DEBUG - Status updated successfully for step: destroy
2025-03-13 16:40:42 - services.base_service - DEBUG - Updating status for task: test-sg, step: test-sg
2025-03-13 16:40:42 - services.base_service - DEBUG - Status updated successfully for step: test-sg
2025-03-13 16:40:42 - services.unbuild_service - INFO - Unbuild process completed successfully for component: test-infra
2025-03-13 16:40:42 - services.base_service - DEBUG - Deleting application record with build_id: e5a6417c-0e3c-41d3-a0e0-494ff41fdfae
2025-03-13 16:40:42 - services.base_service - DEBUG - Application record with build_id e5a6417c-0e3c-41d3-a0e0-494ff41fdfae deleted.
2025-03-13 16:40:42 - uvicorn.access - INFO - 127.0.0.1:56617 - "POST /unbuild/ HTTP/1.1" 200
2025-03-13 16:40:52 - services.status_service - ERROR - No build record found for application 'test-infra'.
2025-03-13 16:40:52 - uvicorn.access - INFO - 127.0.0.1:56637 - "GET /status/?application_name=test-infra HTTP/1.1" 404
2025-03-13 16:44:43 - uvicorn.error - WARNING - StatReload detected changes in 'services/status_service.py'. Reloading...
2025-03-13 16:44:43 - uvicorn.error - INFO - Shutting down
2025-03-13 16:44:43 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-13 16:44:43 - uvicorn.error - INFO - Application shutdown complete.
2025-03-13 16:44:43 - uvicorn.error - INFO - Finished server process [55466]
2025-03-13 16:44:43 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-13 16:44:44 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-13 16:44:44 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-13 16:44:44 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-13 16:44:44 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-13 16:44:44 - uvicorn.error - INFO - Started server process [67586]
2025-03-13 16:44:44 - uvicorn.error - INFO - Waiting for application startup.
2025-03-13 16:44:44 - uvicorn.error - INFO - Application startup complete.
2025-03-13 16:44:50 - services.status_service - ERROR - No record found for application 'test-infra'.
2025-03-13 16:44:50 - uvicorn.access - INFO - 127.0.0.1:56664 - "GET /status/?application_name=test-infra HTTP/1.1" 404
2025-03-13 16:44:57 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 16:44:57 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 16:44:57 - services.build_service - DEBUG - New tasks: {'test-sg'}
2025-03-13 16:44:57 - services.build_service - DEBUG - Previous tasks: set()
2025-03-13 16:44:57 - services.build_service - INFO - Tasks to destroy: set()
2025-03-13 16:44:57 - services.build_service - INFO - Starting build for 'test-infra' with build_id: a130df34-294a-40d8-82fe-a2f2d5cb959d
2025-03-13 16:44:57 - services.build_service - INFO - Executing task 'test-sg' for resource: test-sg (action: build)
2025-03-13 16:44:57 - services.base_service - DEBUG - Loading config for resource: test-sg, environment: np
2025-03-13 16:44:57 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 16:44:57 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 16:44:57 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 16:44:57 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 16:44:57 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:44:57 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:44:57 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 16:44:57 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:44:57 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:44:57 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:44:57 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:44:57 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-13 16:45:02 - services.status_service - INFO - Active record found for 'test-infra' (UUID: a130df34-294a-40d8-82fe-a2f2d5cb959d, action: build).
2025-03-13 16:45:02 - services.status_service - DEBUG - Found 0 step(s) for record UUID: a130df34-294a-40d8-82fe-a2f2d5cb959d
2025-03-13 16:45:02 - services.status_service - DEBUG - Status response constructed: {'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d', 'application_name': 'test-infra', 'action': 'build', 'status': 'started', 'steps': []}
2025-03-13 16:45:02 - uvicorn.access - INFO - 127.0.0.1:56670 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 16:45:34 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ... 
Deploying test-sg-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - test-sg-stack

2025-03-13 16:45:34 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg-stack\n', 'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d'}
2025-03-13 16:45:34 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-13 16:45:34 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 16:45:34 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 16:45:34 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:45:34 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:45:34 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-13 16:45:34 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Check CloudFormation Stack: test-sg-stack
CREATE_COMPLETE

2025-03-13 16:45:34 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d'}
2025-03-13 16:45:34 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-13 16:45:34 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 16:45:34 - services.base_service - DEBUG - Updating application record with build_id: a130df34-294a-40d8-82fe-a2f2d5cb959d, changes: {'status': 'success', 'tasks_built': ['test-sg']}
2025-03-13 16:45:34 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x107139e80>
2025-03-13 16:45:34 - services.build_service - INFO - Build for 'test-infra' completed with status: success
2025-03-13 16:45:34 - uvicorn.access - INFO - 127.0.0.1:56666 - "POST /build/ HTTP/1.1" 200
2025-03-13 16:45:40 - services.status_service - INFO - No active record for 'test-infra'. Using most recent record (UUID: a130df34-294a-40d8-82fe-a2f2d5cb959d, action: build).
2025-03-13 16:45:40 - services.status_service - DEBUG - Found 2 step(s) for record UUID: a130df34-294a-40d8-82fe-a2f2d5cb959d
2025-03-13 16:45:40 - services.status_service - DEBUG - Status response constructed: {'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d', 'application_name': 'test-infra', 'action': 'build', 'status': 'success', 'steps': [{'id': 5, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg-stack\n', 'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d'}, 'timestamp': '2025-03-13T16:45:34.196875', 'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d'}, {'id': 6, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d'}, 'timestamp': '2025-03-13T16:45:34.991271', 'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d'}]}
2025-03-13 16:45:40 - uvicorn.access - INFO - 127.0.0.1:56683 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 16:45:49 - services.unbuild_service - INFO - Starting unbuild for component: test-infra
2025-03-13 16:45:49 - services.unbuild_service - INFO - Using build_id 'a130df34-294a-40d8-82fe-a2f2d5cb959d' for unbuild of component: test-infra
2025-03-13 16:45:49 - services.base_service - DEBUG - Updating application record with build_id: a130df34-294a-40d8-82fe-a2f2d5cb959d, changes: {'action': 'unbuild', 'status': 'started'}
2025-03-13 16:45:49 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x107182c40>
2025-03-13 16:45:49 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 16:45:49 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 16:45:49 - services.unbuild_service - INFO - Executing unbuild task: test-sg
2025-03-13 16:45:49 - services.unbuild_service - DEBUG - Preparing to destroy resource 'test-sg'
2025-03-13 16:45:49 - services.base_service - DEBUG - Loading config for resource: test-sg, environment: np
2025-03-13 16:45:49 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 16:45:49 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 16:45:49 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 16:45:49 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 16:45:49 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:45:49 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:45:49 - services.unbuild_service - DEBUG - Found destroy template for resource 'test-sg': resources/test-sg/destroy.sh.j2
2025-03-13 16:45:49 - services.base_service - DEBUG - Rendering template: resources/test-sg/destroy.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:45:49 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:45:49 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/destroy.sh
2025-03-13 16:45:53 - services.status_service - INFO - Active record found for 'test-infra' (UUID: a130df34-294a-40d8-82fe-a2f2d5cb959d, action: unbuild).
2025-03-13 16:45:53 - services.status_service - DEBUG - Found 2 step(s) for record UUID: a130df34-294a-40d8-82fe-a2f2d5cb959d
2025-03-13 16:45:53 - services.status_service - DEBUG - Status response constructed: {'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d', 'application_name': 'test-infra', 'action': 'unbuild', 'status': 'started', 'steps': [{'id': 5, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg-stack\n', 'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d'}, 'timestamp': '2025-03-13T16:45:34.196875', 'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d'}, {'id': 6, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d'}, 'timestamp': '2025-03-13T16:45:34.991271', 'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d'}]}
2025-03-13 16:45:53 - uvicorn.access - INFO - 127.0.0.1:56691 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 16:46:00 - services.status_service - INFO - Active record found for 'test-infra' (UUID: a130df34-294a-40d8-82fe-a2f2d5cb959d, action: unbuild).
2025-03-13 16:46:00 - services.status_service - DEBUG - Found 2 step(s) for record UUID: a130df34-294a-40d8-82fe-a2f2d5cb959d
2025-03-13 16:46:00 - services.status_service - DEBUG - Status response constructed: {'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d', 'application_name': 'test-infra', 'action': 'unbuild', 'status': 'started', 'steps': [{'id': 5, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg-stack\n', 'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d'}, 'timestamp': '2025-03-13T16:45:34.196875', 'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d'}, {'id': 6, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d'}, 'timestamp': '2025-03-13T16:45:34.991271', 'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d'}]}
2025-03-13 16:46:00 - uvicorn.access - INFO - 127.0.0.1:56692 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 16:46:07 - services.status_service - INFO - Active record found for 'test-infra' (UUID: a130df34-294a-40d8-82fe-a2f2d5cb959d, action: unbuild).
2025-03-13 16:46:07 - services.status_service - DEBUG - Found 2 step(s) for record UUID: a130df34-294a-40d8-82fe-a2f2d5cb959d
2025-03-13 16:46:07 - services.status_service - DEBUG - Status response constructed: {'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d', 'application_name': 'test-infra', 'action': 'unbuild', 'status': 'started', 'steps': [{'id': 5, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg-stack\n', 'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d'}, 'timestamp': '2025-03-13T16:45:34.196875', 'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d'}, {'id': 6, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d'}, 'timestamp': '2025-03-13T16:45:34.991271', 'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d'}]}
2025-03-13 16:46:07 - uvicorn.access - INFO - 127.0.0.1:56693 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 16:46:21 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Deleting CloudFormation Stack: test-sg-stack
Waiting for stack deletion to complete...
Stack test-sg-stack has been successfully deleted.

2025-03-13 16:46:21 - services.unbuild_service - DEBUG - Destroy result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: test-sg-stack\nWaiting for stack deletion to complete...\nStack test-sg-stack has been successfully deleted.\n', 'uuid': 'a130df34-294a-40d8-82fe-a2f2d5cb959d'}
2025-03-13 16:46:21 - services.base_service - DEBUG - Updating status for task: test-sg, step: destroy
2025-03-13 16:46:21 - services.base_service - DEBUG - Status updated successfully for step: destroy
2025-03-13 16:46:21 - services.base_service - DEBUG - Updating status for task: test-sg, step: test-sg
2025-03-13 16:46:21 - services.base_service - DEBUG - Status updated successfully for step: test-sg
2025-03-13 16:46:21 - services.unbuild_service - INFO - Unbuild process completed successfully for component: test-infra
2025-03-13 16:46:21 - services.base_service - DEBUG - Deleting application record with build_id: a130df34-294a-40d8-82fe-a2f2d5cb959d
2025-03-13 16:46:21 - services.base_service - DEBUG - Application record with build_id a130df34-294a-40d8-82fe-a2f2d5cb959d deleted.
2025-03-13 16:46:21 - uvicorn.access - INFO - 127.0.0.1:56686 - "POST /unbuild/ HTTP/1.1" 200
2025-03-13 16:46:28 - services.status_service - ERROR - No record found for application 'test-infra'.
2025-03-13 16:46:28 - uvicorn.access - INFO - 127.0.0.1:56695 - "GET /status/?application_name=test-infra HTTP/1.1" 404
2025-03-13 16:48:53 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 16:48:53 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 16:48:53 - services.build_service - DEBUG - New tasks: {'test-sg'}
2025-03-13 16:48:53 - services.build_service - DEBUG - Previous tasks: set()
2025-03-13 16:48:53 - services.build_service - INFO - Tasks to destroy: set()
2025-03-13 16:48:53 - services.build_service - INFO - Starting build for 'test-infra' with build_id: 0290d878-93dc-433f-8146-d75c3616c4c5
2025-03-13 16:48:53 - services.build_service - INFO - Executing task 'test-sg' for resource: test-sg (action: build)
2025-03-13 16:48:53 - services.base_service - DEBUG - Loading config for resource: test-sg, environment: np
2025-03-13 16:48:53 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 16:48:53 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 16:48:53 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 16:48:53 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 16:48:53 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:48:53 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:48:53 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 16:48:53 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:48:53 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:48:53 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:48:53 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:48:53 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-13 16:49:00 - services.status_service - INFO - Active record found for 'test-infra' (UUID: 0290d878-93dc-433f-8146-d75c3616c4c5, action: build).
2025-03-13 16:49:00 - services.status_service - DEBUG - Found 0 step(s) for record UUID: 0290d878-93dc-433f-8146-d75c3616c4c5
2025-03-13 16:49:00 - services.status_service - DEBUG - Status response constructed: {'uuid': '0290d878-93dc-433f-8146-d75c3616c4c5', 'application_name': 'test-infra', 'action': 'build', 'status': 'started', 'steps': []}
2025-03-13 16:49:00 - uvicorn.access - INFO - 127.0.0.1:56708 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 16:49:30 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ... 
Deploying test-sg-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - test-sg-stack

2025-03-13 16:49:30 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg-stack\n', 'uuid': '0290d878-93dc-433f-8146-d75c3616c4c5'}
2025-03-13 16:49:30 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-13 16:49:30 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 16:49:30 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 16:49:30 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:49:30 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:49:30 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-13 16:49:31 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Check CloudFormation Stack: test-sg-stack
CREATE_COMPLETE

2025-03-13 16:49:31 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': '0290d878-93dc-433f-8146-d75c3616c4c5'}
2025-03-13 16:49:31 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-13 16:49:31 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 16:49:31 - services.base_service - DEBUG - Updating application record with build_id: 0290d878-93dc-433f-8146-d75c3616c4c5, changes: {'status': 'success', 'tasks_built': ['test-sg']}
2025-03-13 16:49:31 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x107179e10>
2025-03-13 16:49:31 - services.build_service - INFO - Build for 'test-infra' completed with status: success
2025-03-13 16:49:31 - uvicorn.access - INFO - 127.0.0.1:56705 - "POST /build/ HTTP/1.1" 200
2025-03-13 16:50:00 - services.status_service - INFO - No active record for 'test-infra'. Using most recent record (UUID: 0290d878-93dc-433f-8146-d75c3616c4c5, action: build).
2025-03-13 16:50:00 - services.status_service - DEBUG - Found 2 step(s) for record UUID: 0290d878-93dc-433f-8146-d75c3616c4c5
2025-03-13 16:50:00 - services.status_service - DEBUG - Status response constructed: {'uuid': '0290d878-93dc-433f-8146-d75c3616c4c5', 'application_name': 'test-infra', 'action': 'build', 'status': 'success', 'steps': [{'id': 9, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg-stack\n', 'uuid': '0290d878-93dc-433f-8146-d75c3616c4c5'}, 'timestamp': '2025-03-13T16:49:30.267513', 'uuid': '0290d878-93dc-433f-8146-d75c3616c4c5'}, {'id': 10, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': '0290d878-93dc-433f-8146-d75c3616c4c5'}, 'timestamp': '2025-03-13T16:49:31.095985', 'uuid': '0290d878-93dc-433f-8146-d75c3616c4c5'}]}
2025-03-13 16:50:00 - uvicorn.access - INFO - 127.0.0.1:56724 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 16:50:19 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 16:50:19 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 16:50:19 - services.build_service - DEBUG - New tasks: {'test-sg', 'test-sg2'}
2025-03-13 16:50:19 - services.build_service - DEBUG - Previous tasks: {'test-sg'}
2025-03-13 16:50:19 - services.build_service - INFO - Tasks to destroy: set()
2025-03-13 16:50:19 - services.build_service - INFO - Starting build for 'test-infra' with build_id: d1e7843e-da09-4ae6-aedd-1bf25e4f0a34
2025-03-13 16:50:19 - services.build_service - INFO - Executing task 'test-sg' for resource: test-sg (action: build)
2025-03-13 16:50:19 - services.base_service - DEBUG - Loading config for resource: test-sg, environment: np
2025-03-13 16:50:19 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 16:50:19 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 16:50:19 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 16:50:19 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 16:50:19 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:50:19 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:50:19 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 16:50:19 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:50:19 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:50:19 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:50:19 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:50:19 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-13 16:50:20 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ... 
Deploying test-sg-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack test-sg-stack is up to date

2025-03-13 16:50:20 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'd1e7843e-da09-4ae6-aedd-1bf25e4f0a34'}
2025-03-13 16:50:20 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-13 16:50:20 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 16:50:20 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 16:50:20 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:50:20 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:50:20 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-13 16:50:21 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Check CloudFormation Stack: test-sg-stack
CREATE_COMPLETE

2025-03-13 16:50:21 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'd1e7843e-da09-4ae6-aedd-1bf25e4f0a34'}
2025-03-13 16:50:21 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-13 16:50:21 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 16:50:21 - services.build_service - INFO - Executing task 'test-sg2' for resource: test-sg2 (action: build)
2025-03-13 16:50:21 - services.base_service - DEBUG - Loading config for resource: test-sg2, environment: np
2025-03-13 16:50:21 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 16:50:21 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 16:50:21 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-13 16:50:21 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-13 16:50:21 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 16:50:21 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 16:50:21 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 16:50:21 - services.base_service - DEBUG - Rendering template: resources/test-sg2/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 16:50:21 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:50:21 - services.base_service - DEBUG - Rendering template: resources/test-sg2/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 16:50:21 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:50:21 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/deploy_cfn.sh
2025-03-13 16:50:57 - services.status_service - INFO - Active record found for 'test-infra' (UUID: d1e7843e-da09-4ae6-aedd-1bf25e4f0a34, action: build).
2025-03-13 16:50:57 - services.status_service - DEBUG - Found 2 step(s) for record UUID: d1e7843e-da09-4ae6-aedd-1bf25e4f0a34
2025-03-13 16:50:57 - services.status_service - DEBUG - Status response constructed: {'uuid': 'd1e7843e-da09-4ae6-aedd-1bf25e4f0a34', 'application_name': 'test-infra', 'action': 'build', 'status': 'started', 'steps': [{'id': 11, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'd1e7843e-da09-4ae6-aedd-1bf25e4f0a34'}, 'timestamp': '2025-03-13T16:50:20.551479', 'uuid': 'd1e7843e-da09-4ae6-aedd-1bf25e4f0a34'}, {'id': 12, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'd1e7843e-da09-4ae6-aedd-1bf25e4f0a34'}, 'timestamp': '2025-03-13T16:50:21.366108', 'uuid': 'd1e7843e-da09-4ae6-aedd-1bf25e4f0a34'}]}
2025-03-13 16:50:57 - uvicorn.access - INFO - 127.0.0.1:56744 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 16:50:58 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ... 
Deploying test-sg2-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - test-sg2-stack

2025-03-13 16:50:58 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg2-stack\n', 'uuid': 'd1e7843e-da09-4ae6-aedd-1bf25e4f0a34'}
2025-03-13 16:50:58 - services.base_service - DEBUG - Updating status for task: test-sg2, step: deploy cfn
2025-03-13 16:50:58 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 16:50:58 - services.build_service - DEBUG - Running step for resource: test-sg2
2025-03-13 16:50:58 - services.base_service - DEBUG - Rendering template: resources/test-sg2/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 16:50:58 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:50:58 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/status.sh
2025-03-13 16:50:58 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ...
Check CloudFormation Stack: test-sg2-stack
CREATE_COMPLETE

2025-03-13 16:50:58 - services.build_service - DEBUG - Step result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': 'd1e7843e-da09-4ae6-aedd-1bf25e4f0a34'}
2025-03-13 16:50:58 - services.base_service - DEBUG - Updating status for task: test-sg2, step: status
2025-03-13 16:50:58 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 16:50:58 - services.base_service - DEBUG - Updating application record with build_id: d1e7843e-da09-4ae6-aedd-1bf25e4f0a34, changes: {'status': 'success', 'tasks_built': ['test-sg', 'test-sg2']}
2025-03-13 16:50:58 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x10720c5f0>
2025-03-13 16:50:58 - services.build_service - INFO - Build for 'test-infra' completed with status: success
2025-03-13 16:50:58 - uvicorn.access - INFO - 127.0.0.1:56727 - "POST /build/ HTTP/1.1" 200
2025-03-13 16:51:02 - services.status_service - INFO - No active record for 'test-infra'. Using most recent record (UUID: d1e7843e-da09-4ae6-aedd-1bf25e4f0a34, action: build).
2025-03-13 16:51:02 - services.status_service - DEBUG - Found 4 step(s) for record UUID: d1e7843e-da09-4ae6-aedd-1bf25e4f0a34
2025-03-13 16:51:02 - services.status_service - DEBUG - Status response constructed: {'uuid': 'd1e7843e-da09-4ae6-aedd-1bf25e4f0a34', 'application_name': 'test-infra', 'action': 'build', 'status': 'success', 'steps': [{'id': 11, 'task_name': 'test-sg', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': 'd1e7843e-da09-4ae6-aedd-1bf25e4f0a34'}, 'timestamp': '2025-03-13T16:50:20.551479', 'uuid': 'd1e7843e-da09-4ae6-aedd-1bf25e4f0a34'}, {'id': 12, 'task_name': 'test-sg', 'step_name': 'status', 'status': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': 'd1e7843e-da09-4ae6-aedd-1bf25e4f0a34'}, 'timestamp': '2025-03-13T16:50:21.366108', 'uuid': 'd1e7843e-da09-4ae6-aedd-1bf25e4f0a34'}, {'id': 13, 'task_name': 'test-sg2', 'step_name': 'deploy cfn', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg2-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - test-sg2-stack\n', 'uuid': 'd1e7843e-da09-4ae6-aedd-1bf25e4f0a34'}, 'timestamp': '2025-03-13T16:50:58.166033', 'uuid': 'd1e7843e-da09-4ae6-aedd-1bf25e4f0a34'}, {'id': 14, 'task_name': 'test-sg2', 'step_name': 'status', 'status': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg2-stack\nCREATE_COMPLETE\n', 'uuid': 'd1e7843e-da09-4ae6-aedd-1bf25e4f0a34'}, 'timestamp': '2025-03-13T16:50:58.983271', 'uuid': 'd1e7843e-da09-4ae6-aedd-1bf25e4f0a34'}]}
2025-03-13 16:51:02 - uvicorn.access - INFO - 127.0.0.1:56748 - "GET /status/?application_name=test-infra HTTP/1.1" 200
2025-03-13 16:51:20 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 16:51:20 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 16:51:20 - services.build_service - DEBUG - New tasks: {'test-sg'}
2025-03-13 16:51:20 - services.build_service - DEBUG - Previous tasks: {'test-sg', 'test-sg2'}
2025-03-13 16:51:20 - services.build_service - INFO - Tasks to destroy: {'test-sg2'}
2025-03-13 16:51:20 - services.build_service - INFO - Starting build for 'test-infra' with build_id: 8bf84e17-a8c0-4dbc-958a-10d794c0906e
2025-03-13 16:51:20 - services.build_service - INFO - Destroying removed resource: test-sg2
2025-03-13 16:51:20 - services.base_service - DEBUG - Loading config for resource: test-sg2, environment: np
2025-03-13 16:51:20 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 16:51:20 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 16:51:20 - services.base_service - DEBUG - Loading YAML file: environments/test-sg2/np.yml
2025-03-13 16:51:20 - services.base_service - DEBUG - YAML file environments/test-sg2/np.yml loaded successfully.
2025-03-13 16:51:20 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 16:51:20 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg2-stack'}
2025-03-13 16:51:20 - services.base_service - DEBUG - Calling subprocess for resource: test-sg2 with script: resources/test-sg2/destroy.sh
2025-03-13 16:51:52 - services.base_service - DEBUG - Subprocess for resource test-sg2 succeeded: Set Default region ...
Deleting CloudFormation Stack: test-sg2-stack
Waiting for stack deletion to complete...
Stack test-sg2-stack has been successfully deleted.

2025-03-13 16:51:52 - services.base_service - DEBUG - Updating status for task: test-sg2, step: destroy
2025-03-13 16:51:52 - services.base_service - DEBUG - Status updated successfully for step: destroy
2025-03-13 16:51:52 - services.build_service - INFO - Destroy result for resource 'test-sg2': {'resource': 'test-sg2', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: test-sg2-stack\nWaiting for stack deletion to complete...\nStack test-sg2-stack has been successfully deleted.\n', 'uuid': '8bf84e17-a8c0-4dbc-958a-10d794c0906e'}
2025-03-13 16:51:52 - services.build_service - INFO - Executing task 'test-sg' for resource: test-sg (action: build)
2025-03-13 16:51:52 - services.base_service - DEBUG - Loading config for resource: test-sg, environment: np
2025-03-13 16:51:52 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 16:51:52 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 16:51:52 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 16:51:52 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 16:51:52 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:51:52 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:51:52 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 16:51:52 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:51:52 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:51:52 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:51:52 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:51:52 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-13 16:51:53 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ... 
Deploying test-sg-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack test-sg-stack is up to date

2025-03-13 16:51:53 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': '8bf84e17-a8c0-4dbc-958a-10d794c0906e'}
2025-03-13 16:51:53 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-13 16:51:53 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 16:51:53 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 16:51:53 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:51:53 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:51:53 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-13 16:51:54 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Check CloudFormation Stack: test-sg-stack
CREATE_COMPLETE

2025-03-13 16:51:54 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': '8bf84e17-a8c0-4dbc-958a-10d794c0906e'}
2025-03-13 16:51:54 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-13 16:51:54 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 16:51:54 - services.base_service - DEBUG - Updating application record with build_id: 8bf84e17-a8c0-4dbc-958a-10d794c0906e, changes: {'status': 'success', 'tasks_built': ['test-sg']}
2025-03-13 16:51:54 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x10717cdd0>
2025-03-13 16:51:54 - services.build_service - INFO - Build for 'test-infra' completed with status: success
2025-03-13 16:51:54 - uvicorn.access - INFO - 127.0.0.1:56749 - "POST /build/ HTTP/1.1" 200
2025-03-13 16:52:10 - services.base_service - DEBUG - Loading YAML file: tasks/test-infra.yml
2025-03-13 16:52:10 - services.base_service - DEBUG - YAML file tasks/test-infra.yml loaded successfully.
2025-03-13 16:52:10 - services.build_service - DEBUG - New tasks: {'test-sg'}
2025-03-13 16:52:10 - services.build_service - DEBUG - Previous tasks: {'test-sg'}
2025-03-13 16:52:10 - services.build_service - INFO - Tasks to destroy: set()
2025-03-13 16:52:10 - services.build_service - INFO - Starting build for 'test-infra' with build_id: 9ef63c0c-e4d8-4d3e-9752-1a0a6dc34087
2025-03-13 16:52:10 - services.build_service - INFO - Executing task 'test-sg' for resource: test-sg (action: build)
2025-03-13 16:52:10 - services.base_service - DEBUG - Loading config for resource: test-sg, environment: np
2025-03-13 16:52:10 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-03-13 16:52:10 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-03-13 16:52:10 - services.base_service - DEBUG - Loading YAML file: environments/test-sg/np.yml
2025-03-13 16:52:10 - services.base_service - DEBUG - YAML file environments/test-sg/np.yml loaded successfully.
2025-03-13 16:52:10 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:52:10 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:52:10 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 16:52:10 - services.base_service - DEBUG - Rendering template: resources/test-sg/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:52:10 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:52:10 - services.base_service - DEBUG - Rendering template: resources/test-sg/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:52:10 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:52:10 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/deploy_cfn.sh
2025-03-13 16:52:11 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ... 
Deploying test-sg-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack test-sg-stack is up to date

2025-03-13 16:52:11 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ... \nDeploying test-sg-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack test-sg-stack is up to date\n', 'uuid': '9ef63c0c-e4d8-4d3e-9752-1a0a6dc34087'}
2025-03-13 16:52:11 - services.base_service - DEBUG - Updating status for task: test-sg, step: deploy cfn
2025-03-13 16:52:11 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-03-13 16:52:11 - services.build_service - DEBUG - Running step for resource: test-sg
2025-03-13 16:52:11 - services.base_service - DEBUG - Rendering template: resources/test-sg/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'ami_id': 'ami-0fa460378b45153ba', 'stack_name': 'test-sg-stack'}
2025-03-13 16:52:11 - services.base_service - DEBUG - Template rendered successfully.
2025-03-13 16:52:11 - services.base_service - DEBUG - Calling subprocess for resource: test-sg with script: resources/test-sg/status.sh
2025-03-13 16:52:12 - services.base_service - DEBUG - Subprocess for resource test-sg succeeded: Set Default region ...
Check CloudFormation Stack: test-sg-stack
CREATE_COMPLETE

2025-03-13 16:52:12 - services.build_service - DEBUG - Step result for resource 'test-sg': {'resource': 'test-sg', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: test-sg-stack\nCREATE_COMPLETE\n', 'uuid': '9ef63c0c-e4d8-4d3e-9752-1a0a6dc34087'}
2025-03-13 16:52:12 - services.base_service - DEBUG - Updating status for task: test-sg, step: status
2025-03-13 16:52:12 - services.base_service - DEBUG - Status updated successfully for step: status
2025-03-13 16:52:12 - services.base_service - DEBUG - Updating application record with build_id: 9ef63c0c-e4d8-4d3e-9752-1a0a6dc34087, changes: {'status': 'success', 'tasks_built': ['test-sg']}
2025-03-13 16:52:12 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x1070436a0>
2025-03-13 16:52:12 - services.build_service - INFO - Build for 'test-infra' completed with status: success
2025-03-13 16:52:12 - uvicorn.access - INFO - 127.0.0.1:56762 - "POST /build/ HTTP/1.1" 200
2025-03-14 09:56:40 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_base_service.py'. Reloading...
2025-03-14 09:56:40 - uvicorn.error - INFO - Shutting down
2025-03-14 09:56:40 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 09:56:40 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 09:56:40 - uvicorn.error - INFO - Finished server process [67586]
2025-03-14 09:56:41 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 09:56:41 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 09:56:41 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 09:56:41 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 09:56:42 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 09:56:42 - uvicorn.error - INFO - Started server process [74073]
2025-03-14 09:56:42 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 09:56:42 - uvicorn.error - INFO - Application startup complete.
2025-03-14 09:56:55 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_base_service.py'. Reloading...
2025-03-14 09:56:55 - uvicorn.error - INFO - Shutting down
2025-03-14 09:56:55 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 09:56:55 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 09:56:55 - uvicorn.error - INFO - Finished server process [74073]
2025-03-14 09:56:55 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 09:56:56 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 09:56:56 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 09:56:56 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 09:56:56 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 09:56:56 - uvicorn.error - INFO - Started server process [80780]
2025-03-14 09:56:56 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 09:56:56 - uvicorn.error - INFO - Application startup complete.
2025-03-14 10:05:41 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_base_service.py'. Reloading...
2025-03-14 10:05:41 - uvicorn.error - INFO - Shutting down
2025-03-14 10:05:41 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 10:05:41 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 10:05:41 - uvicorn.error - INFO - Finished server process [80780]
2025-03-14 10:05:41 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 10:05:42 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 10:05:42 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 10:05:42 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 10:05:42 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 10:05:42 - uvicorn.error - INFO - Started server process [6681]
2025-03-14 10:05:42 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 10:05:42 - uvicorn.error - INFO - Application startup complete.
2025-03-14 10:06:17 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_base_service.py'. Reloading...
2025-03-14 10:06:17 - uvicorn.error - INFO - Shutting down
2025-03-14 10:06:17 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 10:06:17 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 10:06:17 - uvicorn.error - INFO - Finished server process [6681]
2025-03-14 10:06:17 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 10:06:18 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 10:06:18 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 10:06:18 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 10:06:18 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 10:06:18 - uvicorn.error - INFO - Started server process [6871]
2025-03-14 10:06:18 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 10:06:18 - uvicorn.error - INFO - Application startup complete.
2025-03-14 10:09:47 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_build_service.py'. Reloading...
2025-03-14 10:09:47 - uvicorn.error - INFO - Shutting down
2025-03-14 10:09:47 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 10:09:47 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 10:09:47 - uvicorn.error - INFO - Finished server process [6871]
2025-03-14 10:09:47 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 10:09:47 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 10:09:47 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 10:09:47 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 10:09:47 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 10:09:47 - uvicorn.error - INFO - Started server process [32205]
2025-03-14 10:09:47 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 10:09:47 - uvicorn.error - INFO - Application startup complete.
2025-03-14 10:11:09 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_build_service.py'. Reloading...
2025-03-14 10:11:09 - uvicorn.error - INFO - Shutting down
2025-03-14 10:11:09 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 10:11:09 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 10:11:09 - uvicorn.error - INFO - Finished server process [32205]
2025-03-14 10:11:09 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 10:11:09 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 10:11:09 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 10:11:09 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 10:11:09 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 10:11:09 - uvicorn.error - INFO - Started server process [32353]
2025-03-14 10:11:09 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 10:11:09 - uvicorn.error - INFO - Application startup complete.
2025-03-14 10:27:27 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 10:27:27 - uvicorn.error - INFO - Shutting down
2025-03-14 10:27:27 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 10:27:27 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 10:27:27 - uvicorn.error - INFO - Finished server process [32353]
2025-03-14 10:27:27 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 10:27:27 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 10:27:27 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 10:27:27 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 10:27:27 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 10:27:27 - uvicorn.error - INFO - Started server process [35448]
2025-03-14 10:27:27 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 10:27:27 - uvicorn.error - INFO - Application startup complete.
2025-03-14 10:28:59 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 10:28:59 - uvicorn.error - INFO - Shutting down
2025-03-14 10:28:59 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 10:28:59 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 10:28:59 - uvicorn.error - INFO - Finished server process [35448]
2025-03-14 10:28:59 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 10:28:59 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 10:28:59 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 10:28:59 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 10:28:59 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 10:28:59 - uvicorn.error - INFO - Started server process [35625]
2025-03-14 10:28:59 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 10:28:59 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:05:39 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:05:39 - uvicorn.error - INFO - Shutting down
2025-03-14 11:05:39 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:05:39 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:05:39 - uvicorn.error - INFO - Finished server process [35625]
2025-03-14 11:05:39 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:05:40 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:05:40 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:05:40 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:05:40 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:05:40 - uvicorn.error - INFO - Started server process [97621]
2025-03-14 11:05:40 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:05:40 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:11:26 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:11:26 - uvicorn.error - INFO - Shutting down
2025-03-14 11:11:26 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:11:26 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:11:26 - uvicorn.error - INFO - Finished server process [97621]
2025-03-14 11:11:26 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:11:26 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:11:26 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:11:26 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:11:26 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:11:26 - uvicorn.error - INFO - Started server process [25201]
2025-03-14 11:11:26 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:11:26 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:11:40 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:11:40 - uvicorn.error - INFO - Shutting down
2025-03-14 11:11:40 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:11:40 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:11:40 - uvicorn.error - INFO - Finished server process [25201]
2025-03-14 11:11:40 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:11:40 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:11:40 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:11:40 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:11:40 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:11:40 - uvicorn.error - INFO - Started server process [25274]
2025-03-14 11:11:40 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:11:40 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:11:44 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:11:44 - uvicorn.error - INFO - Shutting down
2025-03-14 11:11:44 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:11:44 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:11:44 - uvicorn.error - INFO - Finished server process [25274]
2025-03-14 11:11:44 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:11:44 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:11:44 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:11:44 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:11:44 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:11:44 - uvicorn.error - INFO - Started server process [25281]
2025-03-14 11:11:44 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:11:44 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:12:58 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:12:58 - uvicorn.error - INFO - Shutting down
2025-03-14 11:12:58 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:12:58 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:12:58 - uvicorn.error - INFO - Finished server process [25281]
2025-03-14 11:12:58 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:12:59 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:12:59 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:12:59 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:12:59 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:12:59 - uvicorn.error - INFO - Started server process [25357]
2025-03-14 11:12:59 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:12:59 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:13:26 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:13:26 - uvicorn.error - INFO - Shutting down
2025-03-14 11:13:26 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:13:26 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:13:26 - uvicorn.error - INFO - Finished server process [25357]
2025-03-14 11:13:26 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:13:26 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:13:26 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:13:26 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:13:26 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:13:26 - uvicorn.error - INFO - Started server process [34005]
2025-03-14 11:13:26 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:13:26 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:13:45 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:13:45 - uvicorn.error - INFO - Shutting down
2025-03-14 11:13:46 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:13:46 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:13:46 - uvicorn.error - INFO - Finished server process [34005]
2025-03-14 11:13:46 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:13:46 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:13:46 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:13:46 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:13:46 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:13:46 - uvicorn.error - INFO - Started server process [51911]
2025-03-14 11:13:46 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:13:46 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:13:54 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:13:54 - uvicorn.error - INFO - Shutting down
2025-03-14 11:13:55 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:13:55 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:13:55 - uvicorn.error - INFO - Finished server process [51911]
2025-03-14 11:13:55 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:13:55 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:13:55 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:13:55 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:13:55 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:13:55 - uvicorn.error - INFO - Started server process [51944]
2025-03-14 11:13:55 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:13:55 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:15:08 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:15:08 - uvicorn.error - INFO - Shutting down
2025-03-14 11:15:08 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:15:08 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:15:08 - uvicorn.error - INFO - Finished server process [51944]
2025-03-14 11:15:08 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:15:09 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:15:09 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:15:09 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:15:09 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:15:09 - uvicorn.error - INFO - Started server process [52154]
2025-03-14 11:15:09 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:15:09 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:15:25 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:15:25 - uvicorn.error - INFO - Shutting down
2025-03-14 11:15:25 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:15:25 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:15:25 - uvicorn.error - INFO - Finished server process [52154]
2025-03-14 11:15:25 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:15:25 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:15:25 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:15:25 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:15:26 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:15:26 - uvicorn.error - INFO - Started server process [52169]
2025-03-14 11:15:26 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:15:26 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:15:32 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:15:32 - uvicorn.error - INFO - Shutting down
2025-03-14 11:15:32 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:15:32 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:15:32 - uvicorn.error - INFO - Finished server process [52169]
2025-03-14 11:15:32 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:15:32 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:15:32 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:15:32 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:15:32 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:15:32 - uvicorn.error - INFO - Started server process [52177]
2025-03-14 11:15:32 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:15:32 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:16:03 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:16:03 - uvicorn.error - INFO - Shutting down
2025-03-14 11:16:03 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:16:03 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:16:03 - uvicorn.error - INFO - Finished server process [52177]
2025-03-14 11:16:03 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:16:03 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:16:03 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:16:03 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:16:03 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:16:03 - uvicorn.error - INFO - Started server process [52189]
2025-03-14 11:16:03 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:16:03 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:16:08 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:16:08 - uvicorn.error - INFO - Shutting down
2025-03-14 11:16:08 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:16:08 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:16:08 - uvicorn.error - INFO - Finished server process [52189]
2025-03-14 11:16:09 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:16:09 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:16:09 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:16:09 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:16:09 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:16:09 - uvicorn.error - INFO - Started server process [52202]
2025-03-14 11:16:09 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:16:09 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:16:29 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:16:29 - uvicorn.error - INFO - Shutting down
2025-03-14 11:16:29 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:16:29 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:16:29 - uvicorn.error - INFO - Finished server process [52202]
2025-03-14 11:16:29 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:16:29 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:16:29 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:16:29 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:16:29 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:16:29 - uvicorn.error - INFO - Started server process [52273]
2025-03-14 11:16:29 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:16:29 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:16:36 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:16:37 - uvicorn.error - INFO - Shutting down
2025-03-14 11:16:37 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:16:37 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:16:37 - uvicorn.error - INFO - Finished server process [52273]
2025-03-14 11:16:37 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:16:37 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:16:37 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:16:37 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:16:37 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:16:37 - uvicorn.error - INFO - Started server process [52277]
2025-03-14 11:16:37 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:16:37 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:18:13 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:18:13 - uvicorn.error - INFO - Shutting down
2025-03-14 11:18:13 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:18:13 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:18:13 - uvicorn.error - INFO - Finished server process [52277]
2025-03-14 11:18:13 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:18:14 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:18:14 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:18:14 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:18:14 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:18:14 - uvicorn.error - INFO - Started server process [52758]
2025-03-14 11:18:14 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:18:14 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:20:16 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:20:16 - uvicorn.error - INFO - Shutting down
2025-03-14 11:20:16 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:20:16 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:20:16 - uvicorn.error - INFO - Finished server process [52758]
2025-03-14 11:20:16 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:20:16 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:20:16 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:20:16 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:20:16 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:20:16 - uvicorn.error - INFO - Started server process [79313]
2025-03-14 11:20:16 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:20:16 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:20:19 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:20:19 - uvicorn.error - INFO - Shutting down
2025-03-14 11:20:19 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:20:19 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:20:19 - uvicorn.error - INFO - Finished server process [79313]
2025-03-14 11:20:19 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:20:19 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:20:19 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:20:19 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:20:19 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:20:19 - uvicorn.error - INFO - Started server process [79326]
2025-03-14 11:20:19 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:20:19 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:21:38 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:21:38 - uvicorn.error - INFO - Shutting down
2025-03-14 11:21:38 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:21:38 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:21:38 - uvicorn.error - INFO - Finished server process [79326]
2025-03-14 11:21:38 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:21:39 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:21:39 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:21:39 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:21:39 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:21:39 - uvicorn.error - INFO - Started server process [79443]
2025-03-14 11:21:39 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:21:39 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:22:13 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:22:13 - uvicorn.error - INFO - Shutting down
2025-03-14 11:22:13 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:22:13 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:22:13 - uvicorn.error - INFO - Finished server process [79443]
2025-03-14 11:22:13 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:22:13 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:22:13 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:22:13 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:22:13 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:22:13 - uvicorn.error - INFO - Started server process [79486]
2025-03-14 11:22:13 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:22:13 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:22:32 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:22:32 - uvicorn.error - INFO - Shutting down
2025-03-14 11:22:32 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:22:32 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:22:32 - uvicorn.error - INFO - Finished server process [79486]
2025-03-14 11:22:32 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:22:32 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:22:32 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:22:32 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:22:32 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:22:32 - uvicorn.error - INFO - Started server process [79517]
2025-03-14 11:22:32 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:22:32 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:23:26 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:23:26 - uvicorn.error - INFO - Shutting down
2025-03-14 11:23:26 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:23:26 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:23:26 - uvicorn.error - INFO - Finished server process [79517]
2025-03-14 11:23:27 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:23:27 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:23:27 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:23:27 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:23:27 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:23:27 - uvicorn.error - INFO - Started server process [87345]
2025-03-14 11:23:27 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:23:27 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:23:32 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:23:32 - uvicorn.error - INFO - Shutting down
2025-03-14 11:23:32 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:23:32 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:23:32 - uvicorn.error - INFO - Finished server process [87345]
2025-03-14 11:23:32 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:23:32 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:23:32 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:23:32 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:23:32 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:23:32 - uvicorn.error - INFO - Started server process [92330]
2025-03-14 11:23:32 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:23:32 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:23:54 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:23:54 - uvicorn.error - INFO - Shutting down
2025-03-14 11:23:54 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:23:54 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:23:54 - uvicorn.error - INFO - Finished server process [92330]
2025-03-14 11:23:54 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:23:55 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:23:55 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:23:55 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:23:55 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:23:55 - uvicorn.error - INFO - Started server process [6711]
2025-03-14 11:23:55 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:23:55 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:24:37 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:24:37 - uvicorn.error - INFO - Shutting down
2025-03-14 11:24:37 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:24:37 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:24:37 - uvicorn.error - INFO - Finished server process [6711]
2025-03-14 11:24:38 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:24:38 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:24:38 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:24:38 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:24:38 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:24:38 - uvicorn.error - INFO - Started server process [6877]
2025-03-14 11:24:38 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:24:38 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:24:59 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:24:59 - uvicorn.error - INFO - Shutting down
2025-03-14 11:24:59 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:24:59 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:24:59 - uvicorn.error - INFO - Finished server process [6877]
2025-03-14 11:24:59 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:24:59 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:24:59 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:24:59 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:24:59 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:24:59 - uvicorn.error - INFO - Started server process [6914]
2025-03-14 11:24:59 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:24:59 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:26:27 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:26:27 - uvicorn.error - INFO - Shutting down
2025-03-14 11:26:27 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:26:27 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:26:27 - uvicorn.error - INFO - Finished server process [6914]
2025-03-14 11:26:27 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:26:27 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:26:27 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:26:27 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:26:27 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:26:27 - uvicorn.error - INFO - Started server process [7042]
2025-03-14 11:26:27 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:26:27 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:29:43 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:29:43 - uvicorn.error - INFO - Shutting down
2025-03-14 11:29:43 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:29:43 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:29:43 - uvicorn.error - INFO - Finished server process [7042]
2025-03-14 11:29:43 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:29:43 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:29:43 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:29:43 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:29:43 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:29:43 - uvicorn.error - INFO - Started server process [34468]
2025-03-14 11:29:43 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:29:43 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:30:07 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:30:07 - uvicorn.error - INFO - Shutting down
2025-03-14 11:30:07 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:30:07 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:30:07 - uvicorn.error - INFO - Finished server process [34468]
2025-03-14 11:30:07 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:30:07 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:30:07 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:30:07 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:30:07 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:30:07 - uvicorn.error - INFO - Started server process [34500]
2025-03-14 11:30:07 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:30:07 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:30:14 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:30:14 - uvicorn.error - INFO - Shutting down
2025-03-14 11:30:14 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:30:14 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:30:14 - uvicorn.error - INFO - Finished server process [34500]
2025-03-14 11:30:15 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:30:15 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:30:15 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:30:15 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:30:15 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:30:15 - uvicorn.error - INFO - Started server process [34503]
2025-03-14 11:30:15 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:30:15 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:30:21 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:30:21 - uvicorn.error - INFO - Shutting down
2025-03-14 11:30:21 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:30:21 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:30:21 - uvicorn.error - INFO - Finished server process [34503]
2025-03-14 11:30:21 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:30:22 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:30:22 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:30:22 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:30:22 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:30:22 - uvicorn.error - INFO - Started server process [34512]
2025-03-14 11:30:22 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:30:22 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:30:33 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:30:33 - uvicorn.error - INFO - Shutting down
2025-03-14 11:30:33 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:30:33 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:30:33 - uvicorn.error - INFO - Finished server process [34512]
2025-03-14 11:30:33 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:30:33 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:30:33 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:30:33 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:30:33 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:30:33 - uvicorn.error - INFO - Started server process [34519]
2025-03-14 11:30:33 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:30:33 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:30:53 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:30:53 - uvicorn.error - INFO - Shutting down
2025-03-14 11:30:53 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:30:53 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:30:53 - uvicorn.error - INFO - Finished server process [34519]
2025-03-14 11:30:53 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:30:54 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:30:54 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:30:54 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:30:54 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:30:54 - uvicorn.error - INFO - Started server process [34618]
2025-03-14 11:30:54 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:30:54 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:31:39 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:31:39 - uvicorn.error - INFO - Shutting down
2025-03-14 11:31:39 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:31:39 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:31:39 - uvicorn.error - INFO - Finished server process [34618]
2025-03-14 11:31:39 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:31:39 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:31:39 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:31:39 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:31:39 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:31:39 - uvicorn.error - INFO - Started server process [34667]
2025-03-14 11:31:39 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:31:39 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:31:46 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:31:46 - uvicorn.error - INFO - Shutting down
2025-03-14 11:31:46 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:31:46 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:31:46 - uvicorn.error - INFO - Finished server process [34667]
2025-03-14 11:31:47 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:31:47 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:31:47 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:31:47 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:31:47 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:31:47 - uvicorn.error - INFO - Started server process [34676]
2025-03-14 11:31:47 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:31:47 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:32:00 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:32:00 - uvicorn.error - INFO - Shutting down
2025-03-14 11:32:00 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:32:00 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:32:00 - uvicorn.error - INFO - Finished server process [34676]
2025-03-14 11:32:00 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:32:01 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:32:01 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:32:01 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:32:01 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:32:01 - uvicorn.error - INFO - Started server process [34683]
2025-03-14 11:32:01 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:32:01 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:32:12 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:32:12 - uvicorn.error - INFO - Shutting down
2025-03-14 11:32:12 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:32:12 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:32:12 - uvicorn.error - INFO - Finished server process [34683]
2025-03-14 11:32:13 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:32:13 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:32:13 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:32:13 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:32:13 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:32:13 - uvicorn.error - INFO - Started server process [34702]
2025-03-14 11:32:13 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:32:13 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:32:47 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:32:47 - uvicorn.error - INFO - Shutting down
2025-03-14 11:32:47 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:32:47 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:32:47 - uvicorn.error - INFO - Finished server process [34702]
2025-03-14 11:32:47 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:32:48 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:32:48 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:32:48 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:32:48 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:32:48 - uvicorn.error - INFO - Started server process [34804]
2025-03-14 11:32:48 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:32:48 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:33:09 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_unbuild_service.py'. Reloading...
2025-03-14 11:33:09 - uvicorn.error - INFO - Shutting down
2025-03-14 11:33:10 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:33:10 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:33:10 - uvicorn.error - INFO - Finished server process [34804]
2025-03-14 11:33:10 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:33:10 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:33:10 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:33:10 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:33:10 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:33:10 - uvicorn.error - INFO - Started server process [34825]
2025-03-14 11:33:10 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:33:10 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:45:46 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_status_service.py'. Reloading...
2025-03-14 11:45:46 - uvicorn.error - INFO - Shutting down
2025-03-14 11:45:46 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:45:46 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:45:46 - uvicorn.error - INFO - Finished server process [34825]
2025-03-14 11:45:47 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:45:47 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:45:47 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:45:47 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:45:47 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:45:47 - uvicorn.error - INFO - Started server process [17656]
2025-03-14 11:45:47 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:45:47 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:51:16 - uvicorn.error - WARNING - StatReload detected changes in 'services/base_service.py'. Reloading...
2025-03-14 11:51:16 - uvicorn.error - INFO - Shutting down
2025-03-14 11:51:16 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:51:16 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:51:16 - uvicorn.error - INFO - Finished server process [17656]
2025-03-14 11:51:16 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:51:16 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:51:16 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:51:16 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:51:16 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:51:16 - uvicorn.error - INFO - Started server process [45542]
2025-03-14 11:51:16 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:51:16 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:51:56 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-03-14 11:51:56 - uvicorn.error - INFO - Shutting down
2025-03-14 11:51:56 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:51:56 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:51:56 - uvicorn.error - INFO - Finished server process [45542]
2025-03-14 11:51:56 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:51:57 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:51:57 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:51:57 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:51:57 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:51:57 - uvicorn.error - INFO - Started server process [45638]
2025-03-14 11:51:57 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:51:57 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:52:22 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-03-14 11:52:22 - uvicorn.error - INFO - Shutting down
2025-03-14 11:52:22 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:52:22 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:52:22 - uvicorn.error - INFO - Finished server process [45638]
2025-03-14 11:52:23 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:52:23 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:52:23 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:52:23 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:52:23 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:52:23 - uvicorn.error - INFO - Started server process [45658]
2025-03-14 11:52:23 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:52:23 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:52:49 - uvicorn.error - WARNING - StatReload detected changes in 'routes/status.py'. Reloading...
2025-03-14 11:52:49 - uvicorn.error - INFO - Shutting down
2025-03-14 11:52:49 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:52:49 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:52:49 - uvicorn.error - INFO - Finished server process [45658]
2025-03-14 11:52:49 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:52:50 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:52:50 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:52:50 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:52:50 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:52:50 - uvicorn.error - INFO - Started server process [45692]
2025-03-14 11:52:50 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:52:50 - uvicorn.error - INFO - Application startup complete.
2025-03-14 11:56:23 - uvicorn.error - WARNING - StatReload detected changes in 'services/test_status_service.py'. Reloading...
2025-03-14 11:56:23 - uvicorn.error - INFO - Shutting down
2025-03-14 11:56:23 - uvicorn.error - INFO - Waiting for application shutdown.
2025-03-14 11:56:23 - uvicorn.error - INFO - Application shutdown complete.
2025-03-14 11:56:23 - uvicorn.error - INFO - Finished server process [45692]
2025-03-14 11:56:23 - asyncio - DEBUG - Using selector: KqueueSelector
2025-03-14 11:56:23 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-03-14 11:56:23 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-03-14 11:56:23 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-03-14 11:56:23 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-03-14 11:56:23 - uvicorn.error - INFO - Started server process [73362]
2025-03-14 11:56:23 - uvicorn.error - INFO - Waiting for application startup.
2025-03-14 11:56:23 - uvicorn.error - INFO - Application startup complete.
2025-04-01 12:32:19 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-04-01 12:32:19 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-04-01 12:32:19 - uvicorn.error - INFO - Started reloader process [18792] using StatReload
2025-04-01 12:32:20 - asyncio - DEBUG - Using selector: KqueueSelector
2025-04-01 12:32:20 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-04-01 12:32:20 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-04-01 12:32:20 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-04-01 12:32:21 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-04-01 12:32:21 - uvicorn.error - INFO - Started server process [18794]
2025-04-01 12:32:21 - uvicorn.error - INFO - Waiting for application startup.
2025-04-01 12:32:21 - uvicorn.error - INFO - Application startup complete.
2025-04-01 12:32:57 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 12:32:57 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 12:32:57 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 12:32:57 - services.build_service - DEBUG - Previous tasks: set()
2025-04-01 12:32:57 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 12:32:57 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: ce640982-7593-47c0-bfbb-d17041823b85
2025-04-01 12:32:57 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 12:32:57 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 12:32:57 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 12:32:57 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 12:32:57 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 12:32:57 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 12:32:57 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:32:57 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:32:57 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 12:32:57 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:32:57 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 12:32:57 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 12:32:57 - services.base_service - WARNING - Script path resources/ecs-jenkins-instance-profile/deploy_cfn.sh does not exist for resource ecs-jenkins-instance-profile.
2025-04-01 12:32:57 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'error', 'message': 'Script path resources/ecs-jenkins-instance-profile/deploy_cfn.sh does not exist.', 'uuid': 'ce640982-7593-47c0-bfbb-d17041823b85'}
2025-04-01 12:32:57 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 12:32:57 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 12:32:57 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 12:32:57 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:32:57 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 12:32:57 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 12:32:58 - services.base_service - ERROR - Subprocess for resource ecs-jenkins-instance-profile failed: 
An error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-instance-profile-stack does not exist

2025-04-01 12:32:58 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'error', 'message': '\nAn error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-instance-profile-stack does not exist\n', 'uuid': 'ce640982-7593-47c0-bfbb-d17041823b85'}
2025-04-01 12:32:58 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 12:32:58 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 12:32:58 - services.base_service - DEBUG - Updating application record with build_id: ce640982-7593-47c0-bfbb-d17041823b85, changes: {'status': 'failed', 'tasks_built': ['ECS-Jenkins-Instance-Profile']}
2025-04-01 12:32:58 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104f37e00>
2025-04-01 12:32:58 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: failed
2025-04-01 12:32:58 - uvicorn.access - INFO - 127.0.0.1:49521 - "POST /build/ HTTP/1.1" 200
2025-04-01 12:34:16 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 12:34:16 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 12:34:16 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 12:34:16 - services.build_service - DEBUG - Previous tasks: set()
2025-04-01 12:34:16 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 12:34:16 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: 3dced950-23da-4ff4-8323-7e5a7fc02784
2025-04-01 12:34:16 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 12:34:16 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 12:34:16 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 12:34:16 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 12:34:16 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 12:34:16 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 12:34:16 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:34:16 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:34:16 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 12:34:16 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:34:16 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 12:34:16 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:34:16 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 12:34:16 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 12:34:17 - services.base_service - ERROR - Subprocess for resource ecs-jenkins-instance-profile failed: 
while parsing a block collection
  in "<unicode string>", line 66, column 15:
                  - 'acm:List*'
                  ^ (line: 66)
expected <block end>, but found ','
  in "<unicode string>", line 87, column 27:
                  - "backup:*",
                              ^ (line: 87)

2025-04-01 12:34:17 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'error', 'message': '\nwhile parsing a block collection\n  in "<unicode string>", line 66, column 15:\n                  - \'acm:List*\'\n                  ^ (line: 66)\nexpected <block end>, but found \',\'\n  in "<unicode string>", line 87, column 27:\n                  - "backup:*",\n                              ^ (line: 87)\n', 'uuid': '3dced950-23da-4ff4-8323-7e5a7fc02784'}
2025-04-01 12:34:17 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 12:34:17 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 12:34:17 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 12:34:17 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:34:17 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 12:34:17 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 12:34:17 - services.base_service - ERROR - Subprocess for resource ecs-jenkins-instance-profile failed: 
An error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-instance-profile-stack does not exist

2025-04-01 12:34:17 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'error', 'message': '\nAn error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-instance-profile-stack does not exist\n', 'uuid': '3dced950-23da-4ff4-8323-7e5a7fc02784'}
2025-04-01 12:34:17 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 12:34:17 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 12:34:17 - services.base_service - DEBUG - Updating application record with build_id: 3dced950-23da-4ff4-8323-7e5a7fc02784, changes: {'status': 'failed', 'tasks_built': ['ECS-Jenkins-Instance-Profile']}
2025-04-01 12:34:17 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104f83250>
2025-04-01 12:34:17 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: failed
2025-04-01 12:34:17 - uvicorn.access - INFO - 127.0.0.1:49535 - "POST /build/ HTTP/1.1" 200
2025-04-01 12:35:14 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 12:35:14 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 12:35:14 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 12:35:14 - services.build_service - DEBUG - Previous tasks: set()
2025-04-01 12:35:14 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 12:35:14 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: a2bb7607-f4db-4736-83bd-5371b5e93f9e
2025-04-01 12:35:14 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 12:35:14 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 12:35:14 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 12:35:14 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 12:35:14 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 12:35:14 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 12:35:14 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:35:14 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:35:14 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 12:35:14 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:35:14 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 12:35:14 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:35:14 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 12:35:14 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 12:35:14 - services.base_service - ERROR - Subprocess for resource ecs-jenkins-instance-profile failed: 
while parsing a block collection
  in "<unicode string>", line 66, column 15:
                  - 'acm:List*'
                  ^ (line: 66)
expected <block end>, but found ','
  in "<unicode string>", line 87, column 27:
                  - "backup:*",
                              ^ (line: 87)

2025-04-01 12:35:14 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'error', 'message': '\nwhile parsing a block collection\n  in "<unicode string>", line 66, column 15:\n                  - \'acm:List*\'\n                  ^ (line: 66)\nexpected <block end>, but found \',\'\n  in "<unicode string>", line 87, column 27:\n                  - "backup:*",\n                              ^ (line: 87)\n', 'uuid': 'a2bb7607-f4db-4736-83bd-5371b5e93f9e'}
2025-04-01 12:35:14 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 12:35:14 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 12:35:14 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 12:35:14 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:35:14 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 12:35:14 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 12:35:15 - services.base_service - ERROR - Subprocess for resource ecs-jenkins-instance-profile failed: 
An error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-instance-profile-stack does not exist

2025-04-01 12:35:15 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'error', 'message': '\nAn error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-instance-profile-stack does not exist\n', 'uuid': 'a2bb7607-f4db-4736-83bd-5371b5e93f9e'}
2025-04-01 12:35:15 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 12:35:15 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 12:35:15 - services.base_service - DEBUG - Updating application record with build_id: a2bb7607-f4db-4736-83bd-5371b5e93f9e, changes: {'status': 'failed', 'tasks_built': ['ECS-Jenkins-Instance-Profile']}
2025-04-01 12:35:15 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104f83b10>
2025-04-01 12:35:15 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: failed
2025-04-01 12:35:15 - uvicorn.access - INFO - 127.0.0.1:49542 - "POST /build/ HTTP/1.1" 200
2025-04-01 12:35:44 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 12:35:44 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 12:35:44 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 12:35:44 - services.build_service - DEBUG - Previous tasks: set()
2025-04-01 12:35:44 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 12:35:44 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: 0726bc46-eea1-4528-8315-a2ffa53eaabf
2025-04-01 12:35:44 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 12:35:44 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 12:35:44 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 12:35:44 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 12:35:44 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 12:35:44 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 12:35:44 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:35:44 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:35:44 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 12:35:44 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:35:44 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 12:35:44 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:35:44 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 12:35:44 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 12:35:45 - services.base_service - ERROR - Subprocess for resource ecs-jenkins-instance-profile failed: 
An error occurred (ValidationError) when calling the CreateChangeSet operation: Template format error: Unresolved resource dependencies [ECSJenkinsInstanceProfileRole] in the Resources block of the template

2025-04-01 12:35:45 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'error', 'message': '\nAn error occurred (ValidationError) when calling the CreateChangeSet operation: Template format error: Unresolved resource dependencies [ECSJenkinsInstanceProfileRole] in the Resources block of the template\n', 'uuid': '0726bc46-eea1-4528-8315-a2ffa53eaabf'}
2025-04-01 12:35:45 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 12:35:45 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 12:35:45 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 12:35:45 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:35:45 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 12:35:45 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 12:35:46 - services.base_service - ERROR - Subprocess for resource ecs-jenkins-instance-profile failed: 
An error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-instance-profile-stack does not exist

2025-04-01 12:35:46 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'error', 'message': '\nAn error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-instance-profile-stack does not exist\n', 'uuid': '0726bc46-eea1-4528-8315-a2ffa53eaabf'}
2025-04-01 12:35:46 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 12:35:46 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 12:35:46 - services.base_service - DEBUG - Updating application record with build_id: 0726bc46-eea1-4528-8315-a2ffa53eaabf, changes: {'status': 'failed', 'tasks_built': ['ECS-Jenkins-Instance-Profile']}
2025-04-01 12:35:46 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104f8b820>
2025-04-01 12:35:46 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: failed
2025-04-01 12:35:46 - uvicorn.access - INFO - 127.0.0.1:49548 - "POST /build/ HTTP/1.1" 200
2025-04-01 12:36:09 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 12:36:09 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 12:36:09 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 12:36:09 - services.build_service - DEBUG - Previous tasks: set()
2025-04-01 12:36:09 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 12:36:09 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: d427d6cd-0895-4de0-bb68-f49c917d51c3
2025-04-01 12:36:09 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 12:36:09 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 12:36:09 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 12:36:09 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 12:36:09 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 12:36:09 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 12:36:09 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:36:09 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:36:09 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 12:36:09 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:36:09 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 12:36:09 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:36:09 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 12:36:09 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 12:39:17 - services.base_service - ERROR - Subprocess for resource ecs-jenkins-instance-profile failed: 
Failed to create/update the stack. Run the following command
to fetch the list of events leading up to the failure
aws cloudformation describe-stack-events --stack-name ecs-jenkins-instance-profile-stack

2025-04-01 12:39:17 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'error', 'message': '\nFailed to create/update the stack. Run the following command\nto fetch the list of events leading up to the failure\naws cloudformation describe-stack-events --stack-name ecs-jenkins-instance-profile-stack\n', 'uuid': 'd427d6cd-0895-4de0-bb68-f49c917d51c3'}
2025-04-01 12:39:17 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 12:39:17 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 12:39:17 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 12:39:17 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:39:17 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 12:39:17 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 12:39:18 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
ROLLBACK_COMPLETE

2025-04-01 12:39:18 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nROLLBACK_COMPLETE\n', 'uuid': 'd427d6cd-0895-4de0-bb68-f49c917d51c3'}
2025-04-01 12:39:18 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 12:39:18 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 12:39:18 - services.base_service - DEBUG - Updating application record with build_id: d427d6cd-0895-4de0-bb68-f49c917d51c3, changes: {'status': 'failed', 'tasks_built': ['ECS-Jenkins-Instance-Profile']}
2025-04-01 12:39:18 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104f8b360>
2025-04-01 12:39:18 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: failed
2025-04-01 12:39:18 - uvicorn.access - INFO - 127.0.0.1:49555 - "POST /build/ HTTP/1.1" 200
2025-04-01 12:42:31 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 12:42:31 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 12:42:31 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 12:42:31 - services.build_service - DEBUG - Previous tasks: set()
2025-04-01 12:42:31 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 12:42:31 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: a3e26c9d-9a5e-41b1-bd69-c9dc78b36564
2025-04-01 12:42:31 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 12:42:31 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 12:42:31 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 12:42:31 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 12:42:31 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 12:42:31 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 12:42:31 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:42:31 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:42:31 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 12:42:31 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:42:31 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 12:42:31 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:42:31 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 12:42:31 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 12:44:08 - services.base_service - ERROR - Subprocess for resource ecs-jenkins-instance-profile failed: 
Failed to create/update the stack. Run the following command
to fetch the list of events leading up to the failure
aws cloudformation describe-stack-events --stack-name ecs-jenkins-instance-profile-stack

2025-04-01 12:44:08 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'error', 'message': '\nFailed to create/update the stack. Run the following command\nto fetch the list of events leading up to the failure\naws cloudformation describe-stack-events --stack-name ecs-jenkins-instance-profile-stack\n', 'uuid': 'a3e26c9d-9a5e-41b1-bd69-c9dc78b36564'}
2025-04-01 12:44:08 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 12:44:08 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 12:44:08 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 12:44:08 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack'}
2025-04-01 12:44:08 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 12:44:08 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 12:44:09 - services.base_service - ERROR - Subprocess for resource ecs-jenkins-instance-profile failed: 
An error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-instance-profile-stack does not exist

2025-04-01 12:44:09 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'error', 'message': '\nAn error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-instance-profile-stack does not exist\n', 'uuid': 'a3e26c9d-9a5e-41b1-bd69-c9dc78b36564'}
2025-04-01 12:44:09 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 12:44:09 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 12:44:09 - services.base_service - DEBUG - Updating application record with build_id: a3e26c9d-9a5e-41b1-bd69-c9dc78b36564, changes: {'status': 'failed', 'tasks_built': ['ECS-Jenkins-Instance-Profile']}
2025-04-01 12:44:09 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104ff9d90>
2025-04-01 12:44:09 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: failed
2025-04-01 12:44:09 - uvicorn.access - INFO - 127.0.0.1:49687 - "POST /build/ HTTP/1.1" 200
2025-04-01 12:45:02 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 12:45:02 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 12:45:02 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 12:45:02 - services.build_service - DEBUG - Previous tasks: set()
2025-04-01 12:45:02 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 12:45:02 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: 801e8b9f-4ede-4d5e-b97c-6c8e420de0c4
2025-04-01 12:45:02 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 12:45:02 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 12:45:02 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 12:45:02 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 12:45:02 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 12:45:02 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 12:45:02 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 12:45:02 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 12:45:02 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 12:45:02 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 12:45:02 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 12:45:02 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 12:45:02 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 12:45:02 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 12:48:10 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - ecs-jenkins-instance-profile-stack

2025-04-01 12:48:10 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - ecs-jenkins-instance-profile-stack\n', 'uuid': '801e8b9f-4ede-4d5e-b97c-6c8e420de0c4'}
2025-04-01 12:48:10 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 12:48:10 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 12:48:10 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 12:48:10 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'isubnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'ML0219', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'instance_type': 't3a.small', 'rds_instance_class': 'db.t3.large', 'rds_storage': '512', 'efs_stack_name': 'Unison-EFS-Stack', 'rds_port': '1521', 'rds_ssl_port': '8528', 'costcentre': 'V_Unison', 'applicationid': 'ML0219', 'appcat': 'B', 'account_type': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 12:48:10 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 12:48:10 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 12:48:10 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-01 12:48:10 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': '801e8b9f-4ede-4d5e-b97c-6c8e420de0c4'}
2025-04-01 12:48:10 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 12:48:11 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 12:48:11 - services.base_service - DEBUG - Updating application record with build_id: 801e8b9f-4ede-4d5e-b97c-6c8e420de0c4, changes: {'status': 'success', 'tasks_built': ['ECS-Jenkins-Instance-Profile']}
2025-04-01 12:48:11 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104f7b790>
2025-04-01 12:48:11 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: success
2025-04-01 12:48:11 - uvicorn.access - INFO - 127.0.0.1:49761 - "POST /build/ HTTP/1.1" 200
2025-04-01 13:19:09 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 13:19:09 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 13:19:09 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:19:09 - services.build_service - DEBUG - Previous tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:19:09 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 13:19:09 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: a6cc5db1-6e2c-4099-8616-3f7a90a80a36
2025-04-01 13:19:09 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 13:19:09 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 13:19:09 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:19:09 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:19:09 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 13:19:09 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 13:19:09 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload-kms-id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:19:09 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload-kms-id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:19:09 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:19:09 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload-kms-id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:19:09 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:19:09 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload-kms-id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:19:09 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:19:09 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 13:19:10 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-01 13:19:10 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': 'a6cc5db1-6e2c-4099-8616-3f7a90a80a36'}
2025-04-01 13:19:10 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 13:19:10 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 13:19:10 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:19:10 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload-kms-id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:19:10 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:19:10 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 13:19:11 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-01 13:19:11 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': 'a6cc5db1-6e2c-4099-8616-3f7a90a80a36'}
2025-04-01 13:19:11 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 13:19:11 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 13:19:11 - services.base_service - DEBUG - Updating application record with build_id: a6cc5db1-6e2c-4099-8616-3f7a90a80a36, changes: {'status': 'success', 'tasks_built': ['ECS-Jenkins-Instance-Profile']}
2025-04-01 13:19:11 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104fa7350>
2025-04-01 13:19:11 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: success
2025-04-01 13:19:11 - uvicorn.access - INFO - 127.0.0.1:50270 - "POST /build/ HTTP/1.1" 200
2025-04-01 13:19:34 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 13:19:34 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 13:19:34 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins', 'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:19:34 - services.build_service - DEBUG - Previous tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:19:34 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 13:19:34 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: 45314d72-f26b-4f27-a541-aedfb7153534
2025-04-01 13:19:34 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 13:19:34 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 13:19:34 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:19:34 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:19:34 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 13:19:34 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 13:19:34 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload-kms-id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:19:34 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload-kms-id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:19:34 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:19:34 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload-kms-id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:19:34 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:19:34 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload-kms-id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:19:34 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:19:34 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 13:19:36 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-01 13:19:36 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': '45314d72-f26b-4f27-a541-aedfb7153534'}
2025-04-01 13:19:36 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 13:19:36 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 13:19:36 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:19:36 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload-kms-id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:19:36 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:19:36 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 13:19:37 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-01 13:19:37 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': '45314d72-f26b-4f27-a541-aedfb7153534'}
2025-04-01 13:19:37 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 13:19:37 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 13:19:37 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-01 13:19:37 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-01 13:19:37 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:19:37 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:19:37 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-01 13:19:37 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-01 13:19:37 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload-kms-id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins'}
2025-04-01 13:19:37 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload-kms-id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins'}
2025-04-01 13:19:37 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 13:19:37 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload-kms-id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins'}
2025-04-01 13:19:37 - uvicorn.access - INFO - 127.0.0.1:50284 - "POST /build/ HTTP/1.1" 500
2025-04-01 13:19:37 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 962, in run
    result = context.run(func, *args)
  File "/Users/fan.jin/work/py_builder/routes/build.py", line 14, in trigger_build
    result = build_service.build(request.component, db)
  File "/Users/fan.jin/work/py_builder/services/build_service.py", line 117, in build
    task_results = self.execute_task(task, "build", db, build_id)
  File "/Users/fan.jin/work/py_builder/services/build_service.py", line 49, in execute_task
    result = self.run_step(resource_name, step, envs, db, build_id)
  File "/Users/fan.jin/work/py_builder/services/build_service.py", line 32, in run_step
    rendered_template = self.render_template(template_path, envs)
  File "/Users/fan.jin/work/py_builder/services/base_service.py", line 53, in render_template
    rendered = template.render(context)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "resources/ecs-jenkins/cfn.yml.j2", line 248, in top-level template code
    KmsKeyId: {{ workload-kms-id }}
    ^^^^^^^^^^^
jinja2.exceptions.UndefinedError: 'workload' is undefined
2025-04-01 13:20:45 - services.build_service - ERROR - Build already in progress for component 'ecs-jenkins' (UUID: 45314d72-f26b-4f27-a541-aedfb7153534)
2025-04-01 13:20:45 - uvicorn.access - INFO - 127.0.0.1:50337 - "POST /build/ HTTP/1.1" 200
2025-04-01 13:21:44 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 13:21:44 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 13:21:44 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins', 'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:21:44 - services.build_service - DEBUG - Previous tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:21:44 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 13:21:44 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: 596f6641-6ae7-49de-9854-068095145538
2025-04-01 13:21:44 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 13:21:44 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 13:21:44 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:21:44 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:21:44 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 13:21:44 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 13:21:44 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:21:44 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:21:44 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:21:44 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:21:44 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:21:44 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:21:44 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:21:44 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 13:21:45 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-01 13:21:45 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': '596f6641-6ae7-49de-9854-068095145538'}
2025-04-01 13:21:45 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 13:21:45 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 13:21:45 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:21:45 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:21:45 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:21:45 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 13:21:46 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-01 13:21:46 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': '596f6641-6ae7-49de-9854-068095145538'}
2025-04-01 13:21:46 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 13:21:46 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 13:21:46 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-01 13:21:46 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-01 13:21:46 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:21:46 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:21:46 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-01 13:21:46 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-01 13:21:46 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins'}
2025-04-01 13:21:46 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins'}
2025-04-01 13:21:46 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 13:21:46 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins'}
2025-04-01 13:21:46 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:21:46 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-01 13:21:46 - services.base_service - WARNING - Script path resources/ecs-jenkins/deploy_cfn.sh does not exist for resource ecs-jenkins.
2025-04-01 13:21:46 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': 'Script path resources/ecs-jenkins/deploy_cfn.sh does not exist.', 'uuid': '596f6641-6ae7-49de-9854-068095145538'}
2025-04-01 13:21:46 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-01 13:21:46 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 13:21:46 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 13:21:46 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-01 13:21:46 - services.base_service - WARNING - Script path resources/ecs-jenkins/status.sh does not exist for resource ecs-jenkins.
2025-04-01 13:21:46 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': 'Script path resources/ecs-jenkins/status.sh does not exist.', 'uuid': '596f6641-6ae7-49de-9854-068095145538'}
2025-04-01 13:21:46 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-01 13:21:46 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 13:21:46 - services.base_service - DEBUG - Updating application record with build_id: 596f6641-6ae7-49de-9854-068095145538, changes: {'status': 'failed', 'tasks_built': ['ECS-Jenkins', 'ECS-Jenkins-Instance-Profile']}
2025-04-01 13:21:46 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x105711470>
2025-04-01 13:21:46 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: failed
2025-04-01 13:21:46 - uvicorn.access - INFO - 127.0.0.1:50361 - "POST /build/ HTTP/1.1" 200
2025-04-01 13:30:00 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 13:30:00 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 13:30:00 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins', 'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:30:00 - services.build_service - DEBUG - Previous tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:30:00 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 13:30:00 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: 81eea846-8519-461a-a9ab-95a2bf98f8d4
2025-04-01 13:30:00 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 13:30:00 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 13:30:00 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:30:00 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:30:00 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 13:30:00 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 13:30:00 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:30:00 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:30:00 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:30:00 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:30:00 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:30:00 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:30:00 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:30:00 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 13:30:02 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-01 13:30:02 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': '81eea846-8519-461a-a9ab-95a2bf98f8d4'}
2025-04-01 13:30:02 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 13:30:02 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 13:30:02 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:30:02 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:30:02 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:30:02 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 13:30:03 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-01 13:30:03 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': '81eea846-8519-461a-a9ab-95a2bf98f8d4'}
2025-04-01 13:30:03 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 13:30:03 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 13:30:03 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-01 13:30:03 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-01 13:30:03 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:30:03 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:30:03 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-01 13:30:03 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-01 13:30:03 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod'}
2025-04-01 13:30:03 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod'}
2025-04-01 13:30:03 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 13:30:03 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod'}
2025-04-01 13:30:03 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:30:03 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod'}
2025-04-01 13:30:03 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:30:03 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-01 13:30:05 - services.base_service - ERROR - Subprocess for resource ecs-jenkins failed: 
An error occurred (ValidationError) when calling the CreateChangeSet operation: Parameters: [CertARN, Container, OriginIpRange] must have values

2025-04-01 13:30:05 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nAn error occurred (ValidationError) when calling the CreateChangeSet operation: Parameters: [CertARN, Container, OriginIpRange] must have values\n', 'uuid': '81eea846-8519-461a-a9ab-95a2bf98f8d4'}
2025-04-01 13:30:05 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-01 13:30:05 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 13:30:05 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 13:30:05 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod'}
2025-04-01 13:30:05 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:30:05 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-01 13:30:06 - services.base_service - ERROR - Subprocess for resource ecs-jenkins failed: 
An error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-stack does not exist

2025-04-01 13:30:06 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nAn error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-stack does not exist\n', 'uuid': '81eea846-8519-461a-a9ab-95a2bf98f8d4'}
2025-04-01 13:30:06 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-01 13:30:06 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 13:30:06 - services.base_service - DEBUG - Updating application record with build_id: 81eea846-8519-461a-a9ab-95a2bf98f8d4, changes: {'status': 'failed', 'tasks_built': ['ECS-Jenkins', 'ECS-Jenkins-Instance-Profile']}
2025-04-01 13:30:06 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104f7d310>
2025-04-01 13:30:06 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: failed
2025-04-01 13:30:06 - uvicorn.access - INFO - 127.0.0.1:50531 - "POST /build/ HTTP/1.1" 200
2025-04-01 13:32:33 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 13:32:33 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 13:32:33 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins', 'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:32:33 - services.build_service - DEBUG - Previous tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:32:33 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 13:32:33 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: e8d690de-810e-4c34-a5c6-2d2ee5d7cba9
2025-04-01 13:32:33 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 13:32:33 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 13:32:33 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:32:33 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:32:33 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 13:32:33 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 13:32:33 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:32:33 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:32:33 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:32:33 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:32:33 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:32:33 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:32:33 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:32:33 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 13:32:34 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-01 13:32:34 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': 'e8d690de-810e-4c34-a5c6-2d2ee5d7cba9'}
2025-04-01 13:32:34 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 13:32:34 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 13:32:34 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:32:34 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:32:34 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:32:34 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 13:32:35 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-01 13:32:35 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': 'e8d690de-810e-4c34-a5c6-2d2ee5d7cba9'}
2025-04-01 13:32:35 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 13:32:35 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 13:32:35 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-01 13:32:35 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-01 13:32:35 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:32:35 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:32:35 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-01 13:32:35 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-01 13:32:35 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:32:35 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:32:35 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 13:32:35 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:32:35 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:32:35 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:32:35 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:32:35 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-01 13:32:36 - services.base_service - ERROR - Subprocess for resource ecs-jenkins failed: 
An error occurred (ValidationError) when calling the CreateChangeSet operation: Template format error: Unresolved resource dependencies [ToolingVPCCIDR, PrivateVPCCIDR] in the Resources block of the template

2025-04-01 13:32:36 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nAn error occurred (ValidationError) when calling the CreateChangeSet operation: Template format error: Unresolved resource dependencies [ToolingVPCCIDR, PrivateVPCCIDR] in the Resources block of the template\n', 'uuid': 'e8d690de-810e-4c34-a5c6-2d2ee5d7cba9'}
2025-04-01 13:32:36 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-01 13:32:36 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 13:32:36 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 13:32:36 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:32:36 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:32:36 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-01 13:32:37 - services.base_service - ERROR - Subprocess for resource ecs-jenkins failed: 
An error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-stack does not exist

2025-04-01 13:32:37 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nAn error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-stack does not exist\n', 'uuid': 'e8d690de-810e-4c34-a5c6-2d2ee5d7cba9'}
2025-04-01 13:32:37 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-01 13:32:37 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 13:32:37 - services.base_service - DEBUG - Updating application record with build_id: e8d690de-810e-4c34-a5c6-2d2ee5d7cba9, changes: {'status': 'failed', 'tasks_built': ['ECS-Jenkins', 'ECS-Jenkins-Instance-Profile']}
2025-04-01 13:32:37 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104c0f750>
2025-04-01 13:32:37 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: failed
2025-04-01 13:32:37 - uvicorn.access - INFO - 127.0.0.1:50599 - "POST /build/ HTTP/1.1" 200
2025-04-01 13:35:25 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 13:35:25 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 13:35:25 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins', 'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:35:25 - services.build_service - DEBUG - Previous tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:35:25 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 13:35:25 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: be018e8e-c354-4daf-bc19-0eb2aba14b0c
2025-04-01 13:35:25 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 13:35:25 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 13:35:25 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:35:25 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:35:25 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 13:35:25 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 13:35:25 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:35:25 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:35:25 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:35:25 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:35:25 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:35:25 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:35:25 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:35:25 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 13:35:26 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-01 13:35:26 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': 'be018e8e-c354-4daf-bc19-0eb2aba14b0c'}
2025-04-01 13:35:26 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 13:35:26 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 13:35:26 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:35:26 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:35:26 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:35:26 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 13:35:27 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-01 13:35:27 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': 'be018e8e-c354-4daf-bc19-0eb2aba14b0c'}
2025-04-01 13:35:27 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 13:35:27 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 13:35:27 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-01 13:35:27 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-01 13:35:27 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:35:27 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:35:27 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-01 13:35:27 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-01 13:35:27 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:35:27 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:35:27 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 13:35:27 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:35:27 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:35:27 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:35:27 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:35:27 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-01 13:35:28 - services.base_service - ERROR - Subprocess for resource ecs-jenkins failed: 
An error occurred (ValidationError) when calling the CreateChangeSet operation: Template format error: Unresolved resource dependencies [EcsInstanceRole] in the Resources block of the template

2025-04-01 13:35:28 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nAn error occurred (ValidationError) when calling the CreateChangeSet operation: Template format error: Unresolved resource dependencies [EcsInstanceRole] in the Resources block of the template\n', 'uuid': 'be018e8e-c354-4daf-bc19-0eb2aba14b0c'}
2025-04-01 13:35:28 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-01 13:35:28 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 13:35:28 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 13:35:28 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:35:28 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:35:28 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-01 13:35:29 - services.base_service - ERROR - Subprocess for resource ecs-jenkins failed: 
An error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-stack does not exist

2025-04-01 13:35:29 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nAn error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-stack does not exist\n', 'uuid': 'be018e8e-c354-4daf-bc19-0eb2aba14b0c'}
2025-04-01 13:35:29 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-01 13:35:29 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 13:35:29 - services.base_service - DEBUG - Updating application record with build_id: be018e8e-c354-4daf-bc19-0eb2aba14b0c, changes: {'status': 'failed', 'tasks_built': ['ECS-Jenkins', 'ECS-Jenkins-Instance-Profile']}
2025-04-01 13:35:29 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104ff7f70>
2025-04-01 13:35:29 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: failed
2025-04-01 13:35:29 - uvicorn.access - INFO - 127.0.0.1:50631 - "POST /build/ HTTP/1.1" 200
2025-04-01 13:36:12 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 13:36:12 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 13:36:12 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins', 'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:36:12 - services.build_service - DEBUG - Previous tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:36:12 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 13:36:12 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: e12da5ef-118b-48ae-b248-3b5846d89cf4
2025-04-01 13:36:12 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 13:36:12 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 13:36:12 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:36:12 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:36:12 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 13:36:12 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 13:36:12 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:36:12 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:36:12 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:36:12 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:36:12 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:36:12 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:36:12 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:36:12 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 13:36:13 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-01 13:36:13 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': 'e12da5ef-118b-48ae-b248-3b5846d89cf4'}
2025-04-01 13:36:13 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 13:36:13 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 13:36:13 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:36:13 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:36:13 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:36:13 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 13:36:14 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-01 13:36:14 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': 'e12da5ef-118b-48ae-b248-3b5846d89cf4'}
2025-04-01 13:36:14 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 13:36:14 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 13:36:14 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-01 13:36:14 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-01 13:36:14 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:36:14 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:36:14 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-01 13:36:14 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-01 13:36:14 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:36:14 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:36:14 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 13:36:14 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:36:14 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:36:14 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:36:14 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:36:14 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-01 13:36:51 - services.base_service - ERROR - Subprocess for resource ecs-jenkins failed: 
Failed to create/update the stack. Run the following command
to fetch the list of events leading up to the failure
aws cloudformation describe-stack-events --stack-name ecs-jenkins-stack

2025-04-01 13:36:51 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nFailed to create/update the stack. Run the following command\nto fetch the list of events leading up to the failure\naws cloudformation describe-stack-events --stack-name ecs-jenkins-stack\n', 'uuid': 'e12da5ef-118b-48ae-b248-3b5846d89cf4'}
2025-04-01 13:36:51 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-01 13:36:51 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 13:36:51 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 13:36:51 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:36:51 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:36:51 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-01 13:36:52 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-stack
ROLLBACK_FAILED

2025-04-01 13:36:52 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nROLLBACK_FAILED\n', 'uuid': 'e12da5ef-118b-48ae-b248-3b5846d89cf4'}
2025-04-01 13:36:52 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-01 13:36:52 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 13:36:52 - services.base_service - DEBUG - Updating application record with build_id: e12da5ef-118b-48ae-b248-3b5846d89cf4, changes: {'status': 'failed', 'tasks_built': ['ECS-Jenkins', 'ECS-Jenkins-Instance-Profile']}
2025-04-01 13:36:52 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x1052c7c80>
2025-04-01 13:36:52 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: failed
2025-04-01 13:36:52 - uvicorn.access - INFO - 127.0.0.1:50650 - "POST /build/ HTTP/1.1" 200
2025-04-01 13:41:06 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 13:41:06 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 13:41:06 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins', 'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:41:06 - services.build_service - DEBUG - Previous tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:41:06 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 13:41:06 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: f43c090c-284c-4b98-8dcf-13ba69004e90
2025-04-01 13:41:06 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 13:41:06 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 13:41:06 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:41:06 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:41:06 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 13:41:06 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 13:41:06 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:41:06 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:41:06 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:41:06 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:41:06 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:41:06 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:41:06 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:41:06 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 13:41:07 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-01 13:41:07 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': 'f43c090c-284c-4b98-8dcf-13ba69004e90'}
2025-04-01 13:41:07 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 13:41:07 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 13:41:07 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:41:07 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:41:07 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:41:07 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 13:41:08 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-01 13:41:08 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': 'f43c090c-284c-4b98-8dcf-13ba69004e90'}
2025-04-01 13:41:08 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 13:41:08 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 13:41:08 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-01 13:41:08 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-01 13:41:08 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:41:08 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:41:08 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-01 13:41:08 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-01 13:41:08 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:41:08 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:41:08 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 13:41:08 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:41:08 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:41:08 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:41:08 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:41:08 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-01 13:43:46 - services.base_service - ERROR - Subprocess for resource ecs-jenkins failed: 
Failed to create/update the stack. Run the following command
to fetch the list of events leading up to the failure
aws cloudformation describe-stack-events --stack-name ecs-jenkins-stack

2025-04-01 13:43:46 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nFailed to create/update the stack. Run the following command\nto fetch the list of events leading up to the failure\naws cloudformation describe-stack-events --stack-name ecs-jenkins-stack\n', 'uuid': 'f43c090c-284c-4b98-8dcf-13ba69004e90'}
2025-04-01 13:43:46 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-01 13:43:46 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 13:43:46 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 13:43:46 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:43:46 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:43:46 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-01 13:43:46 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-stack
ROLLBACK_COMPLETE

2025-04-01 13:43:46 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nROLLBACK_COMPLETE\n', 'uuid': 'f43c090c-284c-4b98-8dcf-13ba69004e90'}
2025-04-01 13:43:46 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-01 13:43:46 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 13:43:46 - services.base_service - DEBUG - Updating application record with build_id: f43c090c-284c-4b98-8dcf-13ba69004e90, changes: {'status': 'failed', 'tasks_built': ['ECS-Jenkins', 'ECS-Jenkins-Instance-Profile']}
2025-04-01 13:43:46 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x10576dd50>
2025-04-01 13:43:46 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: failed
2025-04-01 13:43:46 - uvicorn.access - INFO - 127.0.0.1:50716 - "POST /build/ HTTP/1.1" 200
2025-04-01 13:46:33 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 13:46:33 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 13:46:33 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins', 'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:46:33 - services.build_service - DEBUG - Previous tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:46:33 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 13:46:33 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: 15332956-b1a1-4557-96ba-09b87b14c4b9
2025-04-01 13:46:33 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 13:46:33 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 13:46:33 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:46:33 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:46:33 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 13:46:33 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 13:46:33 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:46:33 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:46:33 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:46:33 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:46:33 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:46:33 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:46:33 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:46:33 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 13:46:34 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-01 13:46:34 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': '15332956-b1a1-4557-96ba-09b87b14c4b9'}
2025-04-01 13:46:34 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 13:46:34 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 13:46:34 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:46:34 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:46:34 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:46:34 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 13:46:35 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-01 13:46:35 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': '15332956-b1a1-4557-96ba-09b87b14c4b9'}
2025-04-01 13:46:35 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 13:46:35 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 13:46:35 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-01 13:46:35 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-01 13:46:35 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:46:35 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:46:35 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-01 13:46:35 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-01 13:46:35 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:46:35 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:46:35 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 13:46:35 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:46:35 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:46:35 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:46:35 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:46:35 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-01 13:49:13 - services.base_service - ERROR - Subprocess for resource ecs-jenkins failed: 
Failed to create/update the stack. Run the following command
to fetch the list of events leading up to the failure
aws cloudformation describe-stack-events --stack-name ecs-jenkins-stack

2025-04-01 13:49:13 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nFailed to create/update the stack. Run the following command\nto fetch the list of events leading up to the failure\naws cloudformation describe-stack-events --stack-name ecs-jenkins-stack\n', 'uuid': '15332956-b1a1-4557-96ba-09b87b14c4b9'}
2025-04-01 13:49:13 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-01 13:49:13 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 13:49:13 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 13:49:13 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:49:13 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:49:13 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-01 13:49:14 - services.base_service - ERROR - Subprocess for resource ecs-jenkins failed: 
An error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-stack does not exist

2025-04-01 13:49:14 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nAn error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-stack does not exist\n', 'uuid': '15332956-b1a1-4557-96ba-09b87b14c4b9'}
2025-04-01 13:49:14 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-01 13:49:14 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 13:49:14 - services.base_service - DEBUG - Updating application record with build_id: 15332956-b1a1-4557-96ba-09b87b14c4b9, changes: {'status': 'failed', 'tasks_built': ['ECS-Jenkins', 'ECS-Jenkins-Instance-Profile']}
2025-04-01 13:49:14 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104fea5d0>
2025-04-01 13:49:14 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: failed
2025-04-01 13:49:18 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 13:49:18 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 13:49:18 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins', 'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:49:18 - services.build_service - DEBUG - Previous tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:49:18 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 13:49:18 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: f96d951f-e732-467c-9f75-33ddac493c50
2025-04-01 13:49:18 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 13:49:18 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 13:49:18 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:49:18 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:49:18 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 13:49:18 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 13:49:18 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:49:18 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:49:18 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:49:18 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:49:18 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:49:18 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:49:18 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:49:18 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 13:49:19 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-01 13:49:19 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': 'f96d951f-e732-467c-9f75-33ddac493c50'}
2025-04-01 13:49:19 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 13:49:19 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 13:49:19 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:49:19 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:49:19 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:49:19 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 13:49:20 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-01 13:49:20 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': 'f96d951f-e732-467c-9f75-33ddac493c50'}
2025-04-01 13:49:20 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 13:49:20 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 13:49:20 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-01 13:49:20 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-01 13:49:20 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:49:20 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:49:20 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-01 13:49:20 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-01 13:49:20 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:49:20 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:49:20 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 13:49:20 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:49:20 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:49:20 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:49:20 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:49:20 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-01 13:49:21 - services.base_service - ERROR - Subprocess for resource ecs-jenkins failed: 
An error occurred (ValidationError) when calling the CreateChangeSet operation: Template format error: Unresolved resource dependencies [PrivateSubnetIds] in the Resources block of the template

2025-04-01 13:49:21 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nAn error occurred (ValidationError) when calling the CreateChangeSet operation: Template format error: Unresolved resource dependencies [PrivateSubnetIds] in the Resources block of the template\n', 'uuid': 'f96d951f-e732-467c-9f75-33ddac493c50'}
2025-04-01 13:49:21 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-01 13:49:21 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 13:49:21 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 13:49:21 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:49:21 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:49:21 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-01 13:49:22 - services.base_service - ERROR - Subprocess for resource ecs-jenkins failed: 
An error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-stack does not exist

2025-04-01 13:49:22 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nAn error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-stack does not exist\n', 'uuid': 'f96d951f-e732-467c-9f75-33ddac493c50'}
2025-04-01 13:49:22 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-01 13:49:22 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 13:49:22 - services.base_service - DEBUG - Updating application record with build_id: f96d951f-e732-467c-9f75-33ddac493c50, changes: {'status': 'failed', 'tasks_built': ['ECS-Jenkins', 'ECS-Jenkins-Instance-Profile']}
2025-04-01 13:49:22 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104f3cbd0>
2025-04-01 13:49:22 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: failed
2025-04-01 13:49:22 - uvicorn.access - INFO - 127.0.0.1:50863 - "POST /build/ HTTP/1.1" 200
2025-04-01 13:49:46 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 13:49:46 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 13:49:46 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins', 'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:49:46 - services.build_service - DEBUG - Previous tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 13:49:46 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 13:49:46 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: 3f1cf680-b2e5-4b75-bbbb-7f21cb778ff2
2025-04-01 13:49:46 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 13:49:46 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 13:49:46 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:49:46 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:49:46 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 13:49:46 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 13:49:46 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:49:46 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:49:46 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:49:46 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:49:46 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:49:46 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:49:46 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:49:46 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 13:49:47 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-01 13:49:47 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': '3f1cf680-b2e5-4b75-bbbb-7f21cb778ff2'}
2025-04-01 13:49:47 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 13:49:47 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 13:49:47 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 13:49:47 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 13:49:47 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:49:47 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 13:49:48 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-01 13:49:48 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': '3f1cf680-b2e5-4b75-bbbb-7f21cb778ff2'}
2025-04-01 13:49:48 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 13:49:48 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 13:49:48 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-01 13:49:48 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-01 13:49:48 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 13:49:48 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 13:49:48 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-01 13:49:48 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-01 13:49:48 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:49:48 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:49:48 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 13:49:48 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:49:48 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:49:48 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 13:49:48 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 13:49:48 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-01 14:43:20 - services.base_service - ERROR - Subprocess for resource ecs-jenkins failed: 
Failed to create/update the stack. Run the following command
to fetch the list of events leading up to the failure
aws cloudformation describe-stack-events --stack-name ecs-jenkins-stack

2025-04-01 14:43:20 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nFailed to create/update the stack. Run the following command\nto fetch the list of events leading up to the failure\naws cloudformation describe-stack-events --stack-name ecs-jenkins-stack\n', 'uuid': '3f1cf680-b2e5-4b75-bbbb-7f21cb778ff2'}
2025-04-01 14:43:20 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-01 14:43:20 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 14:43:20 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 14:43:20 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 14:43:20 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 14:43:20 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-01 14:43:21 - services.base_service - ERROR - Subprocess for resource ecs-jenkins failed: 
An error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-stack does not exist

2025-04-01 14:43:21 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nAn error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-stack does not exist\n', 'uuid': '3f1cf680-b2e5-4b75-bbbb-7f21cb778ff2'}
2025-04-01 14:43:21 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-01 14:43:21 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 14:43:21 - services.base_service - DEBUG - Updating application record with build_id: 3f1cf680-b2e5-4b75-bbbb-7f21cb778ff2, changes: {'status': 'failed', 'tasks_built': ['ECS-Jenkins', 'ECS-Jenkins-Instance-Profile']}
2025-04-01 14:43:21 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104f55d50>
2025-04-01 14:43:21 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: failed
2025-04-01 14:43:21 - uvicorn.access - INFO - 127.0.0.1:50877 - "POST /build/ HTTP/1.1" 200
2025-04-01 14:45:02 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 14:45:02 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 14:45:02 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins', 'ECS-Jenkins-Instance-Profile'}
2025-04-01 14:45:02 - services.build_service - DEBUG - Previous tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 14:45:02 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 14:45:02 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: e7b2d99c-baf3-44cc-b2b8-aa5c1adaf2d4
2025-04-01 14:45:02 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 14:45:02 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 14:45:02 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 14:45:02 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 14:45:02 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 14:45:02 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 14:45:02 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 14:45:02 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 14:45:02 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 14:45:02 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 14:45:02 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 14:45:02 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 14:45:02 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 14:45:02 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 14:45:03 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-01 14:45:03 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': 'e7b2d99c-baf3-44cc-b2b8-aa5c1adaf2d4'}
2025-04-01 14:45:03 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 14:45:03 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 14:45:03 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 14:45:03 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 14:45:03 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 14:45:03 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 14:45:04 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-01 14:45:04 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': 'e7b2d99c-baf3-44cc-b2b8-aa5c1adaf2d4'}
2025-04-01 14:45:04 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 14:45:04 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 14:45:04 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-01 14:45:04 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-01 14:45:04 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 14:45:04 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 14:45:04 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-01 14:45:04 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-01 14:45:04 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 14:45:04 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 14:45:04 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 14:45:04 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 14:45:04 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 14:45:04 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 14:45:04 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 14:45:04 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-01 14:47:12 - services.base_service - ERROR - Subprocess for resource ecs-jenkins failed: 
Failed to create/update the stack. Run the following command
to fetch the list of events leading up to the failure
aws cloudformation describe-stack-events --stack-name ecs-jenkins-stack

2025-04-01 14:47:12 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nFailed to create/update the stack. Run the following command\nto fetch the list of events leading up to the failure\naws cloudformation describe-stack-events --stack-name ecs-jenkins-stack\n', 'uuid': 'e7b2d99c-baf3-44cc-b2b8-aa5c1adaf2d4'}
2025-04-01 14:47:12 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-01 14:47:12 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 14:47:12 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 14:47:12 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 14:47:12 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 14:47:12 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-01 14:47:13 - services.base_service - ERROR - Subprocess for resource ecs-jenkins failed: 
An error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-stack does not exist

2025-04-01 14:47:13 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nAn error occurred (ValidationError) when calling the DescribeStacks operation: Stack with id ecs-jenkins-stack does not exist\n', 'uuid': 'e7b2d99c-baf3-44cc-b2b8-aa5c1adaf2d4'}
2025-04-01 14:47:13 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-01 14:47:13 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 14:47:13 - services.base_service - DEBUG - Updating application record with build_id: e7b2d99c-baf3-44cc-b2b8-aa5c1adaf2d4, changes: {'status': 'failed', 'tasks_built': ['ECS-Jenkins', 'ECS-Jenkins-Instance-Profile']}
2025-04-01 14:47:13 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x10523c150>
2025-04-01 14:47:13 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: failed
2025-04-01 14:51:29 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 14:51:29 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 14:51:29 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins', 'ECS-Jenkins-Instance-Profile'}
2025-04-01 14:51:29 - services.build_service - DEBUG - Previous tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 14:51:29 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 14:51:29 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: b63d9d38-7881-47d0-a6c5-5e990985f46c
2025-04-01 14:51:29 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 14:51:29 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 14:51:29 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 14:51:29 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 14:51:29 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 14:51:29 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 14:51:29 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 14:51:29 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 14:51:29 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 14:51:29 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 14:51:29 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 14:51:29 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 14:51:29 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 14:51:29 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 14:52:36 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - ecs-jenkins-instance-profile-stack

2025-04-01 14:52:36 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - ecs-jenkins-instance-profile-stack\n', 'uuid': 'b63d9d38-7881-47d0-a6c5-5e990985f46c'}
2025-04-01 14:52:36 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 14:52:36 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 14:52:36 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 14:52:36 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 14:52:36 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 14:52:36 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 14:52:37 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
UPDATE_COMPLETE

2025-04-01 14:52:37 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nUPDATE_COMPLETE\n', 'uuid': 'b63d9d38-7881-47d0-a6c5-5e990985f46c'}
2025-04-01 14:52:37 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 14:52:37 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 14:52:37 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-01 14:52:37 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-01 14:52:37 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 14:52:37 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 14:52:37 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-01 14:52:37 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-01 14:52:37 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 14:52:37 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 14:52:37 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 14:52:37 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 14:52:37 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 14:52:37 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 14:52:37 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 14:52:37 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-01 15:52:43 - services.base_service - ERROR - Subprocess for resource ecs-jenkins failed: 
Failed to create/update the stack. Run the following command
to fetch the list of events leading up to the failure
aws cloudformation describe-stack-events --stack-name ecs-jenkins-stack

2025-04-01 15:52:43 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nFailed to create/update the stack. Run the following command\nto fetch the list of events leading up to the failure\naws cloudformation describe-stack-events --stack-name ecs-jenkins-stack\n', 'uuid': 'b63d9d38-7881-47d0-a6c5-5e990985f46c'}
2025-04-01 15:52:43 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-01 15:52:43 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 15:52:43 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 15:52:43 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 15:52:43 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 15:52:43 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-01 15:52:43 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-stack
CREATE_IN_PROGRESS

2025-04-01 15:52:43 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nCREATE_IN_PROGRESS\n', 'uuid': 'b63d9d38-7881-47d0-a6c5-5e990985f46c'}
2025-04-01 15:52:43 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-01 15:52:43 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 15:52:43 - services.base_service - DEBUG - Updating application record with build_id: b63d9d38-7881-47d0-a6c5-5e990985f46c, changes: {'status': 'failed', 'tasks_built': ['ECS-Jenkins', 'ECS-Jenkins-Instance-Profile']}
2025-04-01 15:52:43 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104f3cbd0>
2025-04-01 15:52:43 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: failed
2025-04-01 15:52:43 - uvicorn.access - INFO - 127.0.0.1:52039 - "POST /build/ HTTP/1.1" 200
2025-04-01 16:28:03 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 16:28:03 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 16:28:03 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins', 'ECS-Jenkins-Instance-Profile'}
2025-04-01 16:28:03 - services.build_service - DEBUG - Previous tasks: {'ECS-Jenkins-Instance-Profile'}
2025-04-01 16:28:03 - services.build_service - INFO - Tasks to destroy: set()
2025-04-01 16:28:03 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: 501dd641-dffe-45c2-bf0f-ee77159f3ae1
2025-04-01 16:28:03 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-01 16:28:03 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 16:28:03 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 16:28:03 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 16:28:03 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 16:28:03 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 16:28:03 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 16:28:03 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 16:28:03 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 16:28:03 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 16:28:03 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 16:28:03 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 16:28:03 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 16:28:03 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-01 16:28:04 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-01 16:28:04 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': '501dd641-dffe-45c2-bf0f-ee77159f3ae1'}
2025-04-01 16:28:04 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-01 16:28:04 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 16:28:04 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-01 16:28:04 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 16:28:04 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 16:28:04 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-01 16:28:05 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
UPDATE_COMPLETE

2025-04-01 16:28:05 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nUPDATE_COMPLETE\n', 'uuid': '501dd641-dffe-45c2-bf0f-ee77159f3ae1'}
2025-04-01 16:28:05 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-01 16:28:05 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 16:28:05 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-01 16:28:05 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-01 16:28:05 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 16:28:05 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 16:28:05 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-01 16:28:05 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-01 16:28:05 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 16:28:05 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 16:28:05 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 16:28:05 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 16:28:05 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 16:28:05 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 16:28:05 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 16:28:05 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-01 16:28:47 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - ecs-jenkins-stack

2025-04-01 16:28:47 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - ecs-jenkins-stack\n', 'uuid': '501dd641-dffe-45c2-bf0f-ee77159f3ae1'}
2025-04-01 16:28:47 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-01 16:28:47 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-01 16:28:47 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-01 16:28:47 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 16:28:47 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 16:28:47 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-01 16:28:48 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-stack
UPDATE_COMPLETE

2025-04-01 16:28:48 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nUPDATE_COMPLETE\n', 'uuid': '501dd641-dffe-45c2-bf0f-ee77159f3ae1'}
2025-04-01 16:28:48 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-01 16:28:48 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-01 16:28:48 - services.base_service - DEBUG - Updating application record with build_id: 501dd641-dffe-45c2-bf0f-ee77159f3ae1, changes: {'status': 'success', 'tasks_built': ['ECS-Jenkins', 'ECS-Jenkins-Instance-Profile']}
2025-04-01 16:28:48 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x10576dd50>
2025-04-01 16:28:48 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: success
2025-04-01 16:28:48 - uvicorn.access - INFO - 127.0.0.1:53506 - "POST /build/ HTTP/1.1" 200
2025-04-01 16:31:51 - uvicorn.access - INFO - 127.0.0.1:53621 - "GET /status/?application_name=ecs-jenkins HTTP/1.1" 500
2025-04-01 16:31:51 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 962, in run
    result = context.run(func, *args)
  File "/Users/fan.jin/work/py_builder/routes/status.py", line 12, in get_status
    result = get_status(application_name, db)
  File "/Users/fan.jin/work/py_builder/routes/status.py", line 12, in get_status
    result = get_status(application_name, db)
  File "/Users/fan.jin/work/py_builder/routes/status.py", line 12, in get_status
    result = get_status(application_name, db)
  [Previous line repeated 994 more times]
RecursionError: maximum recursion depth exceeded
2025-04-01 16:32:56 - uvicorn.access - INFO - 127.0.0.1:53631 - "GET /status/?application_name=ecs-jenkins HTTP/1.1" 500
2025-04-01 16:32:56 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 962, in run
    result = context.run(func, *args)
  File "/Users/fan.jin/work/py_builder/routes/status.py", line 12, in get_status
    result = get_status(application_name, db)
  File "/Users/fan.jin/work/py_builder/routes/status.py", line 12, in get_status
    result = get_status(application_name, db)
  File "/Users/fan.jin/work/py_builder/routes/status.py", line 12, in get_status
    result = get_status(application_name, db)
  [Previous line repeated 994 more times]
RecursionError: maximum recursion depth exceeded
2025-04-01 16:33:20 - services.unbuild_service - INFO - Starting unbuild for component: ecs-jenkins
2025-04-01 16:33:20 - services.unbuild_service - INFO - Using build_id '501dd641-dffe-45c2-bf0f-ee77159f3ae1' for unbuild of component: ecs-jenkins
2025-04-01 16:33:20 - services.base_service - DEBUG - Updating application record with build_id: 501dd641-dffe-45c2-bf0f-ee77159f3ae1, changes: {'action': 'unbuild', 'status': 'started'}
2025-04-01 16:33:20 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104fdee50>
2025-04-01 16:33:20 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 16:33:20 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 16:33:20 - services.unbuild_service - INFO - Executing unbuild task: ECS-Jenkins-Instance-Profile
2025-04-01 16:33:20 - services.unbuild_service - DEBUG - Preparing to destroy resource 'ecs-jenkins-instance-profile'
2025-04-01 16:33:20 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 16:33:20 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 16:33:20 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 16:33:20 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 16:33:20 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 16:33:20 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 16:33:20 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 16:33:20 - services.unbuild_service - WARNING - No destroy template for resource 'ecs-jenkins-instance-profile'. Using existing destroy.sh if available.
2025-04-01 16:33:20 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/destroy.sh
2025-04-01 16:33:20 - services.base_service - WARNING - Script path resources/ecs-jenkins-instance-profile/destroy.sh does not exist for resource ecs-jenkins-instance-profile.
2025-04-01 16:33:20 - services.unbuild_service - DEBUG - Destroy result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'error', 'message': 'Script path resources/ecs-jenkins-instance-profile/destroy.sh does not exist.', 'uuid': '501dd641-dffe-45c2-bf0f-ee77159f3ae1'}
2025-04-01 16:33:20 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: destroy
2025-04-01 16:33:20 - services.base_service - DEBUG - Status updated successfully for step: destroy
2025-04-01 16:33:20 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: ECS-Jenkins-Instance-Profile
2025-04-01 16:33:20 - services.base_service - DEBUG - Status updated successfully for step: ECS-Jenkins-Instance-Profile
2025-04-01 16:33:20 - services.unbuild_service - INFO - Executing unbuild task: ECS-Jenkins
2025-04-01 16:33:20 - services.unbuild_service - DEBUG - Preparing to destroy resource 'ecs-jenkins'
2025-04-01 16:33:20 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-01 16:33:20 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 16:33:20 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 16:33:20 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-01 16:33:20 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-01 16:33:20 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 16:33:20 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 16:33:20 - services.unbuild_service - WARNING - No destroy template for resource 'ecs-jenkins'. Using existing destroy.sh if available.
2025-04-01 16:33:20 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/destroy.sh
2025-04-01 16:33:20 - services.base_service - WARNING - Script path resources/ecs-jenkins/destroy.sh does not exist for resource ecs-jenkins.
2025-04-01 16:33:20 - services.unbuild_service - DEBUG - Destroy result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': 'Script path resources/ecs-jenkins/destroy.sh does not exist.', 'uuid': '501dd641-dffe-45c2-bf0f-ee77159f3ae1'}
2025-04-01 16:33:20 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: destroy
2025-04-01 16:33:20 - services.base_service - DEBUG - Status updated successfully for step: destroy
2025-04-01 16:33:20 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: ECS-Jenkins
2025-04-01 16:33:20 - services.base_service - DEBUG - Status updated successfully for step: ECS-Jenkins
2025-04-01 16:33:20 - services.unbuild_service - ERROR - Unbuild process failed for component: ecs-jenkins
2025-04-01 16:33:20 - services.base_service - DEBUG - Updating application record with build_id: 501dd641-dffe-45c2-bf0f-ee77159f3ae1, changes: {'status': 'failed'}
2025-04-01 16:33:20 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104fdee50>
2025-04-01 16:33:20 - uvicorn.access - INFO - 127.0.0.1:53636 - "POST /unbuild/ HTTP/1.1" 200
2025-04-01 16:34:09 - services.unbuild_service - INFO - Starting unbuild for component: ecs-jenkins
2025-04-01 16:34:09 - services.unbuild_service - INFO - Using build_id '501dd641-dffe-45c2-bf0f-ee77159f3ae1' for unbuild of component: ecs-jenkins
2025-04-01 16:34:09 - services.base_service - DEBUG - Updating application record with build_id: 501dd641-dffe-45c2-bf0f-ee77159f3ae1, changes: {'action': 'unbuild', 'status': 'started'}
2025-04-01 16:34:09 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x104f56cd0>
2025-04-01 16:34:09 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-01 16:34:09 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-01 16:34:09 - services.unbuild_service - INFO - Executing unbuild task: ECS-Jenkins-Instance-Profile
2025-04-01 16:34:09 - services.unbuild_service - DEBUG - Preparing to destroy resource 'ecs-jenkins-instance-profile'
2025-04-01 16:34:09 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-01 16:34:09 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 16:34:09 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 16:34:09 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-01 16:34:09 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-01 16:34:09 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 16:34:09 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 16:34:09 - services.unbuild_service - DEBUG - Found destroy template for resource 'ecs-jenkins-instance-profile': resources/ecs-jenkins-instance-profile/destroy.sh.j2
2025-04-01 16:34:09 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/destroy.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-01 16:34:09 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 16:34:09 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/destroy.sh
2025-04-01 16:34:41 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Deleting CloudFormation Stack: ecs-jenkins-instance-profile-stack
Waiting for stack deletion to complete...
Stack ecs-jenkins-instance-profile-stack has been successfully deleted.

2025-04-01 16:34:41 - services.unbuild_service - DEBUG - Destroy result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: ecs-jenkins-instance-profile-stack\nWaiting for stack deletion to complete...\nStack ecs-jenkins-instance-profile-stack has been successfully deleted.\n', 'uuid': '501dd641-dffe-45c2-bf0f-ee77159f3ae1'}
2025-04-01 16:34:41 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: destroy
2025-04-01 16:34:41 - services.base_service - DEBUG - Status updated successfully for step: destroy
2025-04-01 16:34:41 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: ECS-Jenkins-Instance-Profile
2025-04-01 16:34:41 - services.base_service - DEBUG - Status updated successfully for step: ECS-Jenkins-Instance-Profile
2025-04-01 16:34:41 - services.unbuild_service - INFO - Executing unbuild task: ECS-Jenkins
2025-04-01 16:34:41 - services.unbuild_service - DEBUG - Preparing to destroy resource 'ecs-jenkins'
2025-04-01 16:34:41 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-01 16:34:41 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-01 16:34:41 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-01 16:34:41 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-01 16:34:41 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-01 16:34:41 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 16:34:41 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 16:34:41 - services.unbuild_service - DEBUG - Found destroy template for resource 'ecs-jenkins': resources/ecs-jenkins/destroy.sh.j2
2025-04-01 16:34:41 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/destroy.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-01 16:34:41 - services.base_service - DEBUG - Template rendered successfully.
2025-04-01 16:34:41 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/destroy.sh
2025-04-01 16:39:15 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Deleting CloudFormation Stack: ecs-jenkins-stack
Waiting for stack deletion to complete...
Stack ecs-jenkins-stack has been successfully deleted.

2025-04-01 16:39:15 - services.unbuild_service - DEBUG - Destroy result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: ecs-jenkins-stack\nWaiting for stack deletion to complete...\nStack ecs-jenkins-stack has been successfully deleted.\n', 'uuid': '501dd641-dffe-45c2-bf0f-ee77159f3ae1'}
2025-04-01 16:39:15 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: destroy
2025-04-01 16:39:15 - services.base_service - DEBUG - Status updated successfully for step: destroy
2025-04-01 16:39:15 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: ECS-Jenkins
2025-04-01 16:39:15 - services.base_service - DEBUG - Status updated successfully for step: ECS-Jenkins
2025-04-01 16:39:15 - services.unbuild_service - INFO - Unbuild process completed successfully for component: ecs-jenkins
2025-04-01 16:39:15 - services.base_service - DEBUG - Deleting application record with build_id: 501dd641-dffe-45c2-bf0f-ee77159f3ae1
2025-04-01 16:39:15 - services.base_service - DEBUG - Application record with build_id 501dd641-dffe-45c2-bf0f-ee77159f3ae1 deleted.
2025-04-01 16:39:15 - uvicorn.access - INFO - 127.0.0.1:53644 - "POST /unbuild/ HTTP/1.1" 200
2025-04-02 09:36:24 - uvicorn.error - INFO - Shutting down
2025-04-02 09:36:24 - uvicorn.error - INFO - Waiting for application shutdown.
2025-04-02 09:36:24 - uvicorn.error - INFO - Application shutdown complete.
2025-04-02 09:36:24 - uvicorn.error - INFO - Finished server process [18794]
2025-04-02 09:36:24 - uvicorn.error - INFO - Stopping reloader process [18792]
2025-04-02 09:36:44 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-04-02 09:36:44 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-04-02 09:36:44 - uvicorn.error - INFO - Started reloader process [10720] using StatReload
2025-04-02 09:36:44 - asyncio - DEBUG - Using selector: KqueueSelector
2025-04-02 09:36:45 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-04-02 09:36:45 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-04-02 09:36:45 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-04-02 09:36:45 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-04-02 09:36:45 - uvicorn.error - INFO - Started server process [10882]
2025-04-02 09:36:45 - uvicorn.error - INFO - Waiting for application startup.
2025-04-02 09:36:45 - uvicorn.error - INFO - Application startup complete.
2025-04-02 09:36:50 - uvicorn.access - INFO - 127.0.0.1:59173 - "GET /status/?application_name=ecs-jenkins HTTP/1.1" 500
2025-04-02 09:36:50 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 962, in run
    result = context.run(func, *args)
  File "/Users/fan.jin/work/py_builder/routes/status.py", line 12, in get_status
    result = get_status(application_name, db)
  File "/Users/fan.jin/work/py_builder/routes/status.py", line 12, in get_status
    result = get_status(application_name, db)
  File "/Users/fan.jin/work/py_builder/routes/status.py", line 12, in get_status
    result = get_status(application_name, db)
  [Previous line repeated 994 more times]
RecursionError: maximum recursion depth exceeded
2025-04-02 09:41:59 - uvicorn.error - WARNING - StatReload detected changes in 'routes/status.py'. Reloading...
2025-04-02 09:41:59 - uvicorn.error - INFO - Shutting down
2025-04-02 09:41:59 - uvicorn.error - INFO - Waiting for application shutdown.
2025-04-02 09:41:59 - uvicorn.error - INFO - Application shutdown complete.
2025-04-02 09:41:59 - uvicorn.error - INFO - Finished server process [10882]
2025-04-02 09:41:59 - asyncio - DEBUG - Using selector: KqueueSelector
2025-04-02 09:42:00 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-04-02 09:42:00 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-04-02 09:42:00 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-04-02 09:42:00 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-04-02 09:42:00 - uvicorn.error - INFO - Started server process [58638]
2025-04-02 09:42:00 - uvicorn.error - INFO - Waiting for application startup.
2025-04-02 09:42:00 - uvicorn.error - INFO - Application startup complete.
2025-04-02 09:42:25 - uvicorn.access - INFO - 127.0.0.1:59228 - "GET /status/?application_name=ecs-jenkins HTTP/1.1" 500
2025-04-02 09:42:25 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 962, in run
    result = context.run(func, *args)
  File "/Users/fan.jin/work/py_builder/routes/status.py", line 12, in get_status
    result = status_service.get_status(application_name, db)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'StatusService' object has no attribute 'get_status'
2025-04-02 09:43:30 - uvicorn.error - WARNING - StatReload detected changes in 'services/status_service.py'. Reloading...
2025-04-02 09:43:30 - uvicorn.error - INFO - Shutting down
2025-04-02 09:43:30 - uvicorn.error - INFO - Waiting for application shutdown.
2025-04-02 09:43:30 - uvicorn.error - INFO - Application shutdown complete.
2025-04-02 09:43:30 - uvicorn.error - INFO - Finished server process [58638]
2025-04-02 09:43:31 - asyncio - DEBUG - Using selector: KqueueSelector
2025-04-02 09:43:31 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-04-02 09:43:31 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-04-02 09:43:31 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-04-02 09:43:31 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-04-02 09:43:31 - uvicorn.error - INFO - Started server process [61588]
2025-04-02 09:43:31 - uvicorn.error - INFO - Waiting for application startup.
2025-04-02 09:43:31 - uvicorn.error - INFO - Application startup complete.
2025-04-02 09:43:44 - services.status_service - INFO - No active record for 'ecs-jenkins'. Using most recent record (UUID: b63d9d38-7881-47d0-a6c5-5e990985f46c, action: build).
2025-04-02 09:43:44 - services.status_service - DEBUG - Found 4 step(s) for record UUID: b63d9d38-7881-47d0-a6c5-5e990985f46c
2025-04-02 09:43:44 - services.status_service - DEBUG - Status response constructed: {'uuid': 'b63d9d38-7881-47d0-a6c5-5e990985f46c', 'application_name': 'ecs-jenkins', 'action': 'build', 'status': 'failed', 'steps': [{'id': 78, 'task_name': 'ecs-jenkins-instance-profile', 'step_name': 'deploy cfn', 'status': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - ecs-jenkins-instance-profile-stack\n', 'uuid': 'b63d9d38-7881-47d0-a6c5-5e990985f46c'}, 'timestamp': '2025-04-01T14:52:36.326370', 'uuid': 'b63d9d38-7881-47d0-a6c5-5e990985f46c'}, {'id': 79, 'task_name': 'ecs-jenkins-instance-profile', 'step_name': 'status', 'status': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nUPDATE_COMPLETE\n', 'uuid': 'b63d9d38-7881-47d0-a6c5-5e990985f46c'}, 'timestamp': '2025-04-01T14:52:37.104354', 'uuid': 'b63d9d38-7881-47d0-a6c5-5e990985f46c'}, {'id': 80, 'task_name': 'ecs-jenkins', 'step_name': 'deploy cfn', 'status': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nFailed to create/update the stack. Run the following command\nto fetch the list of events leading up to the failure\naws cloudformation describe-stack-events --stack-name ecs-jenkins-stack\n', 'uuid': 'b63d9d38-7881-47d0-a6c5-5e990985f46c'}, 'timestamp': '2025-04-01T15:52:43.022525', 'uuid': 'b63d9d38-7881-47d0-a6c5-5e990985f46c'}, {'id': 81, 'task_name': 'ecs-jenkins', 'step_name': 'status', 'status': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nCREATE_IN_PROGRESS\n', 'uuid': 'b63d9d38-7881-47d0-a6c5-5e990985f46c'}, 'timestamp': '2025-04-01T15:52:43.835421', 'uuid': 'b63d9d38-7881-47d0-a6c5-5e990985f46c'}]}
2025-04-02 09:43:44 - uvicorn.access - INFO - 127.0.0.1:59236 - "GET /status/?application_name=ecs-jenkins HTTP/1.1" 200
2025-04-02 09:53:56 - uvicorn.error - INFO - Shutting down
2025-04-02 09:53:57 - uvicorn.error - INFO - Waiting for application shutdown.
2025-04-02 09:53:57 - uvicorn.error - INFO - Application shutdown complete.
2025-04-02 09:53:57 - uvicorn.error - INFO - Finished server process [61588]
2025-04-02 09:53:57 - uvicorn.error - INFO - Stopping reloader process [10720]
2025-04-02 09:54:18 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-04-02 09:54:18 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-04-02 09:54:18 - uvicorn.error - INFO - Started reloader process [50374] using StatReload
2025-04-02 09:54:18 - asyncio - DEBUG - Using selector: KqueueSelector
2025-04-02 09:54:19 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-04-02 09:54:19 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-04-02 09:54:19 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-04-02 09:54:19 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-04-02 09:54:19 - uvicorn.error - INFO - Started server process [50393]
2025-04-02 09:54:19 - uvicorn.error - INFO - Waiting for application startup.
2025-04-02 09:54:19 - uvicorn.error - INFO - Application startup complete.
2025-04-02 10:05:59 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-02 10:05:59 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-02 10:05:59 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins-Instance-Profile', 'ECS-Jenkins'}
2025-04-02 10:05:59 - services.build_service - DEBUG - Previous tasks: set()
2025-04-02 10:05:59 - services.build_service - INFO - Tasks to destroy: set()
2025-04-02 10:05:59 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: 4e102d04-8c0c-4dd2-833f-a2795c04b846
2025-04-02 10:05:59 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-02 10:05:59 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-02 10:05:59 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 10:05:59 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 10:05:59 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-02 10:05:59 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-02 10:05:59 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 10:05:59 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 10:05:59 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 10:05:59 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 10:05:59 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 10:05:59 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 10:05:59 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 10:05:59 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-02 10:09:08 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - ecs-jenkins-instance-profile-stack

2025-04-02 10:09:08 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - ecs-jenkins-instance-profile-stack\n', 'uuid': '4e102d04-8c0c-4dd2-833f-a2795c04b846'}
2025-04-02 10:09:08 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-02 10:09:08 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 10:09:08 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 10:09:08 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 10:09:08 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 10:09:08 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-02 10:09:09 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-02 10:09:09 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': '4e102d04-8c0c-4dd2-833f-a2795c04b846'}
2025-04-02 10:09:09 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-02 10:09:09 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 10:09:09 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-02 10:09:09 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-02 10:09:09 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 10:09:09 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 10:09:09 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-02 10:09:09 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-02 10:09:09 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-02 10:09:09 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-02 10:09:09 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 10:09:09 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-02 10:09:09 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 10:09:09 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-02 10:09:09 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 10:09:09 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-02 10:11:47 - services.base_service - ERROR - Subprocess for resource ecs-jenkins failed: 
Failed to create/update the stack. Run the following command
to fetch the list of events leading up to the failure
aws cloudformation describe-stack-events --stack-name ecs-jenkins-stack

2025-04-02 10:11:47 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nFailed to create/update the stack. Run the following command\nto fetch the list of events leading up to the failure\naws cloudformation describe-stack-events --stack-name ecs-jenkins-stack\n', 'uuid': '4e102d04-8c0c-4dd2-833f-a2795c04b846'}
2025-04-02 10:11:47 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-02 10:11:47 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 10:11:47 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 10:11:47 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-02 10:11:47 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 10:11:47 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-02 10:11:48 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-stack
ROLLBACK_COMPLETE

2025-04-02 10:11:48 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nROLLBACK_COMPLETE\n', 'uuid': '4e102d04-8c0c-4dd2-833f-a2795c04b846'}
2025-04-02 10:11:48 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-02 10:11:48 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 10:11:48 - services.base_service - DEBUG - Updating application record with build_id: 4e102d04-8c0c-4dd2-833f-a2795c04b846, changes: {'status': 'failed', 'tasks_built': ['ECS-Jenkins-Instance-Profile', 'ECS-Jenkins']}
2025-04-02 10:11:48 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x105a9be00>
2025-04-02 10:11:48 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: failed
2025-04-02 10:11:48 - uvicorn.access - INFO - 127.0.0.1:59512 - "POST /build/ HTTP/1.1" 200
2025-04-02 10:16:31 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-02 10:16:31 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-02 10:16:31 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins-Instance-Profile', 'ECS-Jenkins'}
2025-04-02 10:16:31 - services.build_service - DEBUG - Previous tasks: set()
2025-04-02 10:16:31 - services.build_service - INFO - Tasks to destroy: set()
2025-04-02 10:16:31 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: 01b0de9c-3ce1-4324-95ef-230143007811
2025-04-02 10:16:31 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-02 10:16:31 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-02 10:16:31 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 10:16:31 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 10:16:31 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-02 10:16:31 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-02 10:16:31 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 10:16:31 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 10:16:31 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 10:16:31 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 10:16:31 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 10:16:31 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 10:16:31 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 10:16:31 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-02 10:16:32 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-02 10:16:32 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': '01b0de9c-3ce1-4324-95ef-230143007811'}
2025-04-02 10:16:32 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-02 10:16:32 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 10:16:32 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 10:16:32 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 10:16:32 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 10:16:32 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-02 10:16:33 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-02 10:16:33 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': '01b0de9c-3ce1-4324-95ef-230143007811'}
2025-04-02 10:16:33 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-02 10:16:33 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 10:16:33 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-02 10:16:33 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-02 10:16:33 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 10:16:33 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 10:16:33 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-02 10:16:33 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-02 10:16:33 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-02 10:16:33 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-02 10:16:33 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 10:16:33 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-02 10:16:33 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 10:16:33 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-02 10:16:33 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 10:16:33 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-02 10:19:41 - services.base_service - ERROR - Subprocess for resource ecs-jenkins failed: 
Failed to create/update the stack. Run the following command
to fetch the list of events leading up to the failure
aws cloudformation describe-stack-events --stack-name ecs-jenkins-stack

2025-04-02 10:19:41 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nFailed to create/update the stack. Run the following command\nto fetch the list of events leading up to the failure\naws cloudformation describe-stack-events --stack-name ecs-jenkins-stack\n', 'uuid': '01b0de9c-3ce1-4324-95ef-230143007811'}
2025-04-02 10:19:41 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-02 10:19:41 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 10:19:41 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 10:19:41 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-02 10:19:41 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 10:19:41 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-02 10:19:42 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-stack
ROLLBACK_COMPLETE

2025-04-02 10:19:42 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nROLLBACK_COMPLETE\n', 'uuid': '01b0de9c-3ce1-4324-95ef-230143007811'}
2025-04-02 10:19:42 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-02 10:19:42 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 10:19:42 - services.base_service - DEBUG - Updating application record with build_id: 01b0de9c-3ce1-4324-95ef-230143007811, changes: {'status': 'failed', 'tasks_built': ['ECS-Jenkins-Instance-Profile', 'ECS-Jenkins']}
2025-04-02 10:19:42 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x105b64410>
2025-04-02 10:19:42 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: failed
2025-04-02 10:19:42 - uvicorn.access - INFO - 127.0.0.1:59664 - "POST /build/ HTTP/1.1" 200
2025-04-02 10:21:45 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-02 10:21:45 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-02 10:21:45 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins-Instance-Profile', 'ECS-Jenkins'}
2025-04-02 10:21:45 - services.build_service - DEBUG - Previous tasks: set()
2025-04-02 10:21:45 - services.build_service - INFO - Tasks to destroy: set()
2025-04-02 10:21:45 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: a56df26f-e896-4061-9eea-a74618605ab4
2025-04-02 10:21:45 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-02 10:21:45 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-02 10:21:45 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 10:21:45 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 10:21:45 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-02 10:21:45 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-02 10:21:45 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 10:21:45 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 10:21:45 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 10:21:45 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 10:21:45 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 10:21:45 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 10:21:45 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 10:21:45 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-02 10:21:47 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-02 10:21:47 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': 'a56df26f-e896-4061-9eea-a74618605ab4'}
2025-04-02 10:21:47 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-02 10:21:47 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 10:21:47 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 10:21:47 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 10:21:47 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 10:21:47 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-02 10:21:47 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-02 10:21:47 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': 'a56df26f-e896-4061-9eea-a74618605ab4'}
2025-04-02 10:21:47 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-02 10:21:47 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 10:21:47 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-02 10:21:47 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-02 10:21:47 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 10:21:47 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 10:21:47 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-02 10:21:47 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-02 10:21:47 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-02 10:21:47 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-02 10:21:47 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 10:21:47 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-02 10:21:47 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 10:21:47 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-02 10:21:47 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 10:21:47 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-02 10:29:58 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - ecs-jenkins-stack

2025-04-02 10:29:58 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - ecs-jenkins-stack\n', 'uuid': 'a56df26f-e896-4061-9eea-a74618605ab4'}
2025-04-02 10:29:58 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-02 10:29:58 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 10:29:58 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 10:29:58 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6'}
2025-04-02 10:29:58 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 10:29:58 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-02 10:29:59 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-stack
CREATE_COMPLETE

2025-04-02 10:29:59 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nCREATE_COMPLETE\n', 'uuid': 'a56df26f-e896-4061-9eea-a74618605ab4'}
2025-04-02 10:29:59 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-02 10:29:59 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 10:29:59 - services.base_service - DEBUG - Updating application record with build_id: a56df26f-e896-4061-9eea-a74618605ab4, changes: {'status': 'success', 'tasks_built': ['ECS-Jenkins-Instance-Profile', 'ECS-Jenkins']}
2025-04-02 10:29:59 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x105b642d0>
2025-04-02 10:29:59 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: success
2025-04-02 10:29:59 - uvicorn.access - INFO - 127.0.0.1:59756 - "POST /build/ HTTP/1.1" 200
2025-04-02 13:13:27 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-02 13:13:27 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-02 13:13:27 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins-Instance-Profile', 'ECS-Jenkins'}
2025-04-02 13:13:27 - services.build_service - DEBUG - Previous tasks: {'ECS-Jenkins-Instance-Profile', 'ECS-Jenkins'}
2025-04-02 13:13:27 - services.build_service - INFO - Tasks to destroy: set()
2025-04-02 13:13:27 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: 31456e8d-c702-48b1-8d1f-f1220198055f
2025-04-02 13:13:27 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-02 13:13:27 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-02 13:13:27 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 13:13:27 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 13:13:27 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-02 13:13:27 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-02 13:13:27 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 13:13:27 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 13:13:27 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 13:13:27 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 13:13:27 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 13:13:27 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 13:13:27 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 13:13:27 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-02 13:13:29 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-02 13:13:29 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': '31456e8d-c702-48b1-8d1f-f1220198055f'}
2025-04-02 13:13:29 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-02 13:13:29 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 13:13:29 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 13:13:29 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 13:13:29 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 13:13:29 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-02 13:13:30 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-02 13:13:30 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': '31456e8d-c702-48b1-8d1f-f1220198055f'}
2025-04-02 13:13:30 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-02 13:13:30 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 13:13:30 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-02 13:13:30 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-02 13:13:30 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 13:13:30 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 13:13:30 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-02 13:13:30 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-02 13:13:30 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 13:13:30 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 13:13:30 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 13:13:30 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 13:13:30 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 13:13:30 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 13:13:30 - uvicorn.access - INFO - 127.0.0.1:62443 - "POST /build/ HTTP/1.1" 500
2025-04-02 13:13:30 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 962, in run
    result = context.run(func, *args)
  File "/Users/fan.jin/work/py_builder/routes/build.py", line 14, in trigger_build
    result = build_service.build(request.component, db)
  File "/Users/fan.jin/work/py_builder/services/build_service.py", line 117, in build
    task_results = self.execute_task(task, "build", db, build_id)
  File "/Users/fan.jin/work/py_builder/services/build_service.py", line 49, in execute_task
    result = self.run_step(resource_name, step, envs, db, build_id)
  File "/Users/fan.jin/work/py_builder/services/build_service.py", line 32, in run_step
    rendered_template = self.render_template(template_path, envs)
  File "/Users/fan.jin/work/py_builder/services/base_service.py", line 53, in render_template
    rendered = template.render(context)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "resources/ecs-jenkins/cfn.yml.j2", line 335, in top-level template code
    "s3://{{ unison-jenkins-nonprod }}/$backup_filename" \
    ^^^^^^^^^
jinja2.exceptions.UndefinedError: 'unison' is undefined
2025-04-02 13:14:03 - services.build_service - ERROR - Build already in progress for component 'ecs-jenkins' (UUID: 31456e8d-c702-48b1-8d1f-f1220198055f)
2025-04-02 13:14:03 - uvicorn.access - INFO - 127.0.0.1:62458 - "POST /build/ HTTP/1.1" 200
2025-04-02 13:25:26 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-04-02 13:25:26 - uvicorn.error - INFO - Shutting down
2025-04-02 13:25:26 - uvicorn.error - INFO - Waiting for application shutdown.
2025-04-02 13:25:26 - uvicorn.error - INFO - Application shutdown complete.
2025-04-02 13:25:26 - uvicorn.error - INFO - Finished server process [50393]
2025-04-02 13:25:26 - asyncio - DEBUG - Using selector: KqueueSelector
2025-04-02 13:25:26 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-04-02 13:25:26 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-04-02 13:25:26 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-04-02 13:25:26 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-04-02 13:25:43 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-04-02 13:25:43 - asyncio - DEBUG - Using selector: KqueueSelector
2025-04-02 13:25:43 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-04-02 13:25:43 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-04-02 13:25:43 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-04-02 13:25:43 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-04-02 13:25:43 - uvicorn.error - INFO - Started server process [58064]
2025-04-02 13:25:43 - uvicorn.error - INFO - Waiting for application startup.
2025-04-02 13:25:43 - uvicorn.error - INFO - Application startup complete.
2025-04-02 13:25:53 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-04-02 13:25:53 - uvicorn.error - INFO - Shutting down
2025-04-02 13:25:53 - uvicorn.error - INFO - Waiting for application shutdown.
2025-04-02 13:25:53 - uvicorn.error - INFO - Application shutdown complete.
2025-04-02 13:25:53 - uvicorn.error - INFO - Finished server process [58064]
2025-04-02 13:25:53 - asyncio - DEBUG - Using selector: KqueueSelector
2025-04-02 13:25:53 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-04-02 13:25:53 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-04-02 13:25:53 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-04-02 13:25:53 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-04-02 13:25:53 - uvicorn.error - INFO - Started server process [67310]
2025-04-02 13:25:53 - uvicorn.error - INFO - Waiting for application startup.
2025-04-02 13:25:53 - uvicorn.error - INFO - Application startup complete.
2025-04-02 13:26:14 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-02 13:26:14 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-02 13:26:14 - services.build_service - DEBUG - New tasks: {'ECS-Jenkins-Instance-Profile', 'ECS-Jenkins'}
2025-04-02 13:26:14 - services.build_service - DEBUG - Previous tasks: {'ECS-Jenkins-Instance-Profile', 'ECS-Jenkins'}
2025-04-02 13:26:14 - services.build_service - INFO - Tasks to destroy: set()
2025-04-02 13:26:14 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: 9987136a-26e0-4e43-8a71-86b6976a12bb
2025-04-02 13:26:14 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-02 13:26:14 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-02 13:26:14 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 13:26:14 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 13:26:14 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-02 13:26:14 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-02 13:26:14 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 13:26:14 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 13:26:14 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 13:26:14 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 13:26:14 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 13:26:14 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 13:26:14 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 13:26:14 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-02 13:26:15 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-02 13:26:15 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': '9987136a-26e0-4e43-8a71-86b6976a12bb'}
2025-04-02 13:26:15 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-02 13:26:15 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 13:26:15 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 13:26:15 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 13:26:15 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 13:26:15 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-02 13:26:16 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-02 13:26:16 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': '9987136a-26e0-4e43-8a71-86b6976a12bb'}
2025-04-02 13:26:16 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-02 13:26:16 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 13:26:16 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-02 13:26:16 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-02 13:26:16 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 13:26:16 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 13:26:16 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-02 13:26:16 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-02 13:26:16 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 13:26:16 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 13:26:16 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 13:26:16 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 13:26:16 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 13:26:16 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 13:26:16 - services.build_service - ERROR - Template rendering failed for resource 'ecs-jenkins': 'unison' is undefined
2025-04-02 13:26:16 - uvicorn.access - INFO - 127.0.0.1:62665 - "POST /build/ HTTP/1.1" 500
2025-04-02 13:26:16 - uvicorn.error - ERROR - Exception in ASGI application
Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/services/build_service.py", line 33, in run_step
    rendered_template = self.render_template(template_path, envs)
  File "/Users/fan.jin/work/py_builder/services/base_service.py", line 53, in render_template
    rendered = template.render(context)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/jinja2/environment.py", line 1295, in render
    self.environment.handle_exception()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/jinja2/environment.py", line 942, in handle_exception
    raise rewrite_traceback_stack(source=source)
  File "resources/ecs-jenkins/cfn.yml.j2", line 335, in top-level template code
    "s3://{{ unison-jenkins-nonprod }}/$backup_filename" \
    ^^^^^^^^^
jinja2.exceptions.UndefinedError: 'unison' is undefined

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/protocols/http/h11_impl.py", line 403, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.scope, self.receive, self.send
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/fastapi/routing.py", line 214, in run_endpoint_function
    return await run_in_threadpool(dependant.call, **values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/starlette/concurrency.py", line 37, in run_in_threadpool
    return await anyio.to_thread.run_sync(func)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/to_thread.py", line 56, in run_sync
    return await get_async_backend().run_sync_in_worker_thread(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        func, args, abandon_on_cancel=abandon_on_cancel, limiter=limiter
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 2461, in run_sync_in_worker_thread
    return await future
           ^^^^^^^^^^^^
  File "/Users/fan.jin/work/py_builder/.venv/lib/python3.13/site-packages/anyio/_backends/_asyncio.py", line 962, in run
    result = context.run(func, *args)
  File "/Users/fan.jin/work/py_builder/routes/build.py", line 14, in trigger_build
    result = build_service.build(request.component, db)
  File "/Users/fan.jin/work/py_builder/services/build_service.py", line 121, in build
    task_results = self.execute_task(task, "build", db, build_id)
  File "/Users/fan.jin/work/py_builder/services/build_service.py", line 53, in execute_task
    result = self.run_step(resource_name, step, envs, db, build_id)
  File "/Users/fan.jin/work/py_builder/services/build_service.py", line 38, in run_step
    raise RuntimeError(f"Template rendering failed for {resource_name}: {str(e)}") from e
RuntimeError: Template rendering failed for ecs-jenkins: 'unison' is undefined
2025-04-02 13:26:36 - services.build_service - ERROR - Build already in progress for component 'ecs-jenkins' (UUID: 9987136a-26e0-4e43-8a71-86b6976a12bb)
2025-04-02 13:26:36 - uvicorn.access - INFO - 127.0.0.1:62675 - "POST /build/ HTTP/1.1" 200
2025-04-02 13:29:16 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-04-02 13:29:16 - uvicorn.error - INFO - Shutting down
2025-04-02 13:29:16 - uvicorn.error - INFO - Waiting for application shutdown.
2025-04-02 13:29:16 - uvicorn.error - INFO - Application shutdown complete.
2025-04-02 13:29:16 - uvicorn.error - INFO - Finished server process [67310]
2025-04-02 13:29:16 - asyncio - DEBUG - Using selector: KqueueSelector
2025-04-02 13:29:16 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-04-02 13:29:16 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-04-02 13:29:16 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-04-02 13:29:16 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-04-02 13:29:16 - uvicorn.error - INFO - Started server process [95267]
2025-04-02 13:29:16 - uvicorn.error - INFO - Waiting for application startup.
2025-04-02 13:29:16 - uvicorn.error - INFO - Application startup complete.
2025-04-02 13:29:45 - uvicorn.error - WARNING - StatReload detected changes in 'services/build_service.py'. Reloading...
2025-04-02 13:29:45 - uvicorn.error - INFO - Shutting down
2025-04-02 13:29:45 - uvicorn.error - INFO - Waiting for application shutdown.
2025-04-02 13:29:45 - uvicorn.error - INFO - Application shutdown complete.
2025-04-02 13:29:45 - uvicorn.error - INFO - Finished server process [95267]
2025-04-02 13:29:45 - asyncio - DEBUG - Using selector: KqueueSelector
2025-04-02 13:29:45 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-04-02 13:29:45 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-04-02 13:29:45 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-04-02 13:29:45 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-04-02 13:29:45 - uvicorn.error - INFO - Started server process [96193]
2025-04-02 13:29:45 - uvicorn.error - INFO - Waiting for application startup.
2025-04-02 13:29:45 - uvicorn.error - INFO - Application startup complete.
2025-04-02 13:30:16 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-02 13:30:16 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-02 13:30:16 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: 14bbe5cc-b6ab-4cc4-a7ec-00523584fe0d
2025-04-02 13:30:16 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-02 13:30:16 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-02 13:30:16 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 13:30:16 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 13:30:16 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-02 13:30:16 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-02 13:30:16 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 13:30:16 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 13:30:16 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 13:30:16 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 13:30:16 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 13:30:16 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 13:30:16 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 13:30:16 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-02 13:30:17 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-02 13:30:17 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': '14bbe5cc-b6ab-4cc4-a7ec-00523584fe0d'}
2025-04-02 13:30:17 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-02 13:30:17 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 13:30:17 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 13:30:17 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 13:30:17 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 13:30:17 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-02 13:30:18 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-02 13:30:18 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': '14bbe5cc-b6ab-4cc4-a7ec-00523584fe0d'}
2025-04-02 13:30:18 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-02 13:30:18 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 13:30:18 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-02 13:30:18 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-02 13:30:18 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 13:30:18 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 13:30:18 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-02 13:30:18 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-02 13:30:18 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 13:30:18 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 13:30:18 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 13:30:18 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 13:30:18 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 13:30:18 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 13:30:18 - services.build_service - ERROR - Template rendering failed for resource 'ecs-jenkins': 'unison' is undefined
2025-04-02 13:30:18 - services.build_service - ERROR - Build process aborted due to error: Template rendering failed for ecs-jenkins: 'unison' is undefined
2025-04-02 13:30:18 - uvicorn.access - INFO - 127.0.0.1:62697 - "POST /build/ HTTP/1.1" 200
2025-04-02 13:30:51 - services.build_service - ERROR - Build already in progress for component 'ecs-jenkins' (UUID: 14bbe5cc-b6ab-4cc4-a7ec-00523584fe0d)
2025-04-02 13:30:51 - uvicorn.access - INFO - 127.0.0.1:62714 - "POST /build/ HTTP/1.1" 200
2025-04-02 13:32:53 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-02 13:32:53 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-02 13:32:53 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: 95858f97-e0a8-49ed-9a7b-a27d737f3b37
2025-04-02 13:32:53 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-02 13:32:53 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-02 13:32:53 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 13:32:53 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 13:32:53 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-02 13:32:53 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-02 13:32:53 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 13:32:53 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 13:32:53 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 13:32:53 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 13:32:53 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 13:32:53 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 13:32:53 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 13:32:53 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-02 13:32:54 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-02 13:32:54 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': '95858f97-e0a8-49ed-9a7b-a27d737f3b37'}
2025-04-02 13:32:54 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-02 13:32:54 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 13:32:54 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 13:32:54 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 13:32:54 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 13:32:54 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-02 13:32:55 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-02 13:32:55 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': '95858f97-e0a8-49ed-9a7b-a27d737f3b37'}
2025-04-02 13:32:55 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-02 13:32:55 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 13:32:55 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-02 13:32:55 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-02 13:32:55 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 13:32:55 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 13:32:55 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-02 13:32:55 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-02 13:32:55 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 13:32:55 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 13:32:55 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 13:32:55 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 13:32:55 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 13:32:55 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 13:32:55 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 13:32:55 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-02 13:38:39 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - ecs-jenkins-stack

2025-04-02 13:38:39 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - ecs-jenkins-stack\n', 'uuid': '95858f97-e0a8-49ed-9a7b-a27d737f3b37'}
2025-04-02 13:38:39 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-02 13:38:39 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 13:38:39 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 13:38:39 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 13:38:39 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 13:38:39 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-02 13:38:40 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-stack
UPDATE_COMPLETE

2025-04-02 13:38:40 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nUPDATE_COMPLETE\n', 'uuid': '95858f97-e0a8-49ed-9a7b-a27d737f3b37'}
2025-04-02 13:38:40 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-02 13:38:40 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 13:38:40 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: success
2025-04-02 13:38:40 - uvicorn.access - INFO - 127.0.0.1:62741 - "POST /build/ HTTP/1.1" 200
2025-04-02 14:04:43 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-02 14:04:43 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-02 14:04:43 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: 64607358-382e-442d-93c0-9295a64fbd95
2025-04-02 14:04:43 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-02 14:04:43 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-02 14:04:43 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 14:04:43 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 14:04:43 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-02 14:04:43 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-02 14:04:43 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 14:04:43 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 14:04:43 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 14:04:43 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 14:04:43 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:04:43 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 14:04:43 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:04:43 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-02 14:04:46 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-02 14:04:46 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': '64607358-382e-442d-93c0-9295a64fbd95'}
2025-04-02 14:04:46 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-02 14:04:46 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 14:04:46 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 14:04:46 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 14:04:46 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:04:46 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-02 14:04:47 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-02 14:04:47 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': '64607358-382e-442d-93c0-9295a64fbd95'}
2025-04-02 14:04:47 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-02 14:04:47 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 14:04:47 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-02 14:04:47 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-02 14:04:47 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 14:04:47 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 14:04:47 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-02 14:04:47 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-02 14:04:47 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 14:04:47 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 14:04:47 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 14:04:47 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 14:04:47 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:04:47 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 14:04:47 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:04:47 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-02 14:12:02 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - ecs-jenkins-stack

2025-04-02 14:12:02 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - ecs-jenkins-stack\n', 'uuid': '64607358-382e-442d-93c0-9295a64fbd95'}
2025-04-02 14:12:02 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-02 14:12:02 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 14:12:02 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 14:12:02 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 14:12:02 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:12:02 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-02 14:12:03 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-stack
UPDATE_COMPLETE

2025-04-02 14:12:03 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nUPDATE_COMPLETE\n', 'uuid': '64607358-382e-442d-93c0-9295a64fbd95'}
2025-04-02 14:12:03 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-02 14:12:03 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 14:12:03 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: success
2025-04-02 14:12:03 - uvicorn.access - INFO - 127.0.0.1:63346 - "POST /build/ HTTP/1.1" 200
2025-04-02 14:20:27 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-02 14:20:27 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-02 14:20:27 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: a203d2c0-ed2d-4575-ab49-05367ca63701
2025-04-02 14:20:27 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-02 14:20:27 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-02 14:20:27 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 14:20:27 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 14:20:27 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-02 14:20:27 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-02 14:20:27 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 14:20:27 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 14:20:27 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 14:20:27 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 14:20:27 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:20:27 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 14:20:27 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:20:27 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-02 14:20:28 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-02 14:20:28 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': 'a203d2c0-ed2d-4575-ab49-05367ca63701'}
2025-04-02 14:20:28 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-02 14:20:28 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 14:20:28 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 14:20:28 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 14:20:28 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:20:28 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-02 14:20:29 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-02 14:20:29 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': 'a203d2c0-ed2d-4575-ab49-05367ca63701'}
2025-04-02 14:20:29 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-02 14:20:29 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 14:20:29 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-02 14:20:29 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-02 14:20:29 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 14:20:29 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 14:20:29 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-02 14:20:29 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-02 14:20:29 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 14:20:29 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 14:20:29 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 14:20:29 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 14:20:29 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:20:29 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 14:20:29 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:20:29 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-02 14:27:44 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - ecs-jenkins-stack

2025-04-02 14:27:44 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - ecs-jenkins-stack\n', 'uuid': 'a203d2c0-ed2d-4575-ab49-05367ca63701'}
2025-04-02 14:27:44 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-02 14:27:44 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 14:27:44 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 14:27:44 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 14:27:44 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:27:44 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-02 14:27:45 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-stack
UPDATE_COMPLETE

2025-04-02 14:27:45 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nUPDATE_COMPLETE\n', 'uuid': 'a203d2c0-ed2d-4575-ab49-05367ca63701'}
2025-04-02 14:27:45 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-02 14:27:45 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 14:27:45 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: success
2025-04-02 14:30:36 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-02 14:30:36 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-02 14:30:36 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: d1aa3f02-5a1b-4d0b-b104-c4b080612c9d
2025-04-02 14:30:36 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-02 14:30:36 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-02 14:30:36 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 14:30:36 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 14:30:36 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-02 14:30:36 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-02 14:30:36 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 14:30:36 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 14:30:36 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 14:30:36 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 14:30:36 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:30:36 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 14:30:36 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:30:36 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-02 14:30:37 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-02 14:30:37 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': 'd1aa3f02-5a1b-4d0b-b104-c4b080612c9d'}
2025-04-02 14:30:37 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-02 14:30:37 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 14:30:37 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 14:30:37 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 14:30:37 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:30:37 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-02 14:30:38 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-02 14:30:38 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': 'd1aa3f02-5a1b-4d0b-b104-c4b080612c9d'}
2025-04-02 14:30:38 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-02 14:30:38 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 14:30:38 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-02 14:30:38 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-02 14:30:38 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 14:30:38 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 14:30:38 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-02 14:30:38 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-02 14:30:38 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 14:30:38 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 14:30:38 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 14:30:38 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 14:30:38 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:30:38 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 14:30:38 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:30:38 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-02 14:33:21 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - ecs-jenkins-stack

2025-04-02 14:33:21 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - ecs-jenkins-stack\n', 'uuid': 'd1aa3f02-5a1b-4d0b-b104-c4b080612c9d'}
2025-04-02 14:33:21 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-02 14:33:21 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 14:33:21 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 14:33:21 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 14:33:21 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:33:21 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-02 14:33:22 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-stack
UPDATE_COMPLETE

2025-04-02 14:33:22 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nUPDATE_COMPLETE\n', 'uuid': 'd1aa3f02-5a1b-4d0b-b104-c4b080612c9d'}
2025-04-02 14:33:22 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-02 14:33:22 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 14:33:22 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: success
2025-04-02 14:33:22 - uvicorn.access - INFO - 127.0.0.1:63786 - "POST /build/ HTTP/1.1" 200
2025-04-02 14:44:14 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-02 14:44:14 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-02 14:44:14 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: af6f377c-3bd1-4833-a352-769d932c3aab
2025-04-02 14:44:14 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-02 14:44:14 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-02 14:44:14 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 14:44:14 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 14:44:14 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-02 14:44:14 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-02 14:44:14 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 14:44:14 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 14:44:14 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 14:44:14 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 14:44:14 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:44:14 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 14:44:14 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:44:14 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-02 14:44:15 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-02 14:44:15 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': 'af6f377c-3bd1-4833-a352-769d932c3aab'}
2025-04-02 14:44:15 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-02 14:44:15 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 14:44:15 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 14:44:15 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 14:44:15 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:44:15 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-02 14:44:16 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-02 14:44:16 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': 'af6f377c-3bd1-4833-a352-769d932c3aab'}
2025-04-02 14:44:16 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-02 14:44:16 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 14:44:16 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-02 14:44:16 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-02 14:44:16 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 14:44:16 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 14:44:16 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-02 14:44:16 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-02 14:44:16 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 14:44:16 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 14:44:16 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 14:44:16 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 14:44:16 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:44:16 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 14:44:16 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:44:16 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-02 14:51:31 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - ecs-jenkins-stack

2025-04-02 14:51:31 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - ecs-jenkins-stack\n', 'uuid': 'af6f377c-3bd1-4833-a352-769d932c3aab'}
2025-04-02 14:51:31 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-02 14:51:31 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 14:51:31 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 14:51:31 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 14:51:31 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 14:51:31 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-02 14:51:32 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-stack
UPDATE_COMPLETE

2025-04-02 14:51:32 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nUPDATE_COMPLETE\n', 'uuid': 'af6f377c-3bd1-4833-a352-769d932c3aab'}
2025-04-02 14:51:32 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-02 14:51:32 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 14:51:32 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: success
2025-04-02 14:51:32 - uvicorn.access - INFO - 127.0.0.1:64050 - "POST /build/ HTTP/1.1" 200
2025-04-02 15:47:16 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-02 15:47:16 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-02 15:47:16 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: cbdab45e-e6cd-4b72-92e4-edb9ba60772e
2025-04-02 15:47:16 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-02 15:47:16 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-02 15:47:16 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 15:47:16 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 15:47:16 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-02 15:47:16 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-02 15:47:16 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 15:47:16 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 15:47:16 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 15:47:16 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 15:47:16 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 15:47:16 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 15:47:16 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 15:47:16 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-02 15:47:17 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-02 15:47:17 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': 'cbdab45e-e6cd-4b72-92e4-edb9ba60772e'}
2025-04-02 15:47:17 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-02 15:47:17 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 15:47:17 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 15:47:17 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 15:47:17 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 15:47:17 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-02 15:47:18 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-02 15:47:18 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': 'cbdab45e-e6cd-4b72-92e4-edb9ba60772e'}
2025-04-02 15:47:18 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-02 15:47:18 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 15:47:18 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-02 15:47:18 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-02 15:47:18 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 15:47:18 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 15:47:18 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-02 15:47:18 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-02 15:47:18 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 15:47:18 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 15:47:18 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 15:47:18 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 15:47:18 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 15:47:18 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 15:47:18 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 15:47:18 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-02 15:50:01 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - ecs-jenkins-stack

2025-04-02 15:50:01 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - ecs-jenkins-stack\n', 'uuid': 'cbdab45e-e6cd-4b72-92e4-edb9ba60772e'}
2025-04-02 15:50:01 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-02 15:50:01 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 15:50:01 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 15:50:01 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 15:50:01 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 15:50:01 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-02 15:50:02 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-stack
UPDATE_COMPLETE

2025-04-02 15:50:02 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nUPDATE_COMPLETE\n', 'uuid': 'cbdab45e-e6cd-4b72-92e4-edb9ba60772e'}
2025-04-02 15:50:02 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-02 15:50:02 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 15:50:02 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: success
2025-04-02 15:50:02 - uvicorn.access - INFO - 127.0.0.1:64965 - "POST /build/ HTTP/1.1" 200
2025-04-02 15:53:05 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-02 15:53:05 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-02 15:53:05 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: 85028b8b-0f44-4bd0-b7ab-3814099eed99
2025-04-02 15:53:05 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-02 15:53:05 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-02 15:53:05 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 15:53:05 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 15:53:05 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-02 15:53:05 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-02 15:53:05 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 15:53:05 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 15:53:05 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 15:53:05 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 15:53:05 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 15:53:05 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 15:53:05 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 15:53:05 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-02 15:53:07 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-02 15:53:07 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': '85028b8b-0f44-4bd0-b7ab-3814099eed99'}
2025-04-02 15:53:07 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-02 15:53:07 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 15:53:07 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 15:53:07 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 15:53:07 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 15:53:07 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-02 15:53:07 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-02 15:53:07 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': '85028b8b-0f44-4bd0-b7ab-3814099eed99'}
2025-04-02 15:53:07 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-02 15:53:07 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 15:53:07 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-02 15:53:07 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-02 15:53:07 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 15:53:07 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 15:53:07 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-02 15:53:07 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-02 15:53:07 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 15:53:07 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 15:53:07 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 15:53:07 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 15:53:07 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 15:53:07 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 15:53:07 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 15:53:07 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-02 15:56:21 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - ecs-jenkins-stack

2025-04-02 15:56:21 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - ecs-jenkins-stack\n', 'uuid': '85028b8b-0f44-4bd0-b7ab-3814099eed99'}
2025-04-02 15:56:21 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-02 15:56:21 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 15:56:21 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 15:56:21 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 15:56:21 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 15:56:21 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-02 15:56:22 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-stack
UPDATE_COMPLETE

2025-04-02 15:56:22 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nUPDATE_COMPLETE\n', 'uuid': '85028b8b-0f44-4bd0-b7ab-3814099eed99'}
2025-04-02 15:56:22 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-02 15:56:22 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 15:56:22 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: success
2025-04-02 15:56:22 - uvicorn.access - INFO - 127.0.0.1:65087 - "POST /build/ HTTP/1.1" 200
2025-04-02 16:12:20 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-02 16:12:20 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-02 16:12:20 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: 88c3a983-a19d-45ef-89b1-2aa75ce4c194
2025-04-02 16:12:20 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-02 16:12:20 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-02 16:12:20 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 16:12:20 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 16:12:20 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-02 16:12:20 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-02 16:12:20 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 16:12:20 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 16:12:20 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 16:12:20 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 16:12:20 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 16:12:20 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 16:12:20 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 16:12:20 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-02 16:12:21 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-02 16:12:21 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': '88c3a983-a19d-45ef-89b1-2aa75ce4c194'}
2025-04-02 16:12:21 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-02 16:12:21 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 16:12:21 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 16:12:21 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 16:12:21 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 16:12:21 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-02 16:12:22 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-02 16:12:22 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': '88c3a983-a19d-45ef-89b1-2aa75ce4c194'}
2025-04-02 16:12:22 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-02 16:12:22 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 16:12:22 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-02 16:12:22 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-02 16:12:22 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 16:12:22 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 16:12:22 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-02 16:12:22 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-02 16:12:22 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 16:12:22 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 16:12:22 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 16:12:22 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 16:12:22 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 16:12:22 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 16:12:22 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 16:12:22 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-02 16:13:35 - services.base_service - ERROR - Subprocess for resource ecs-jenkins failed: 
Failed to create/update the stack. Run the following command
to fetch the list of events leading up to the failure
aws cloudformation describe-stack-events --stack-name ecs-jenkins-stack

2025-04-02 16:13:35 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nFailed to create/update the stack. Run the following command\nto fetch the list of events leading up to the failure\naws cloudformation describe-stack-events --stack-name ecs-jenkins-stack\n', 'uuid': '88c3a983-a19d-45ef-89b1-2aa75ce4c194'}
2025-04-02 16:13:35 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-02 16:13:35 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 16:13:35 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 16:13:35 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 16:13:35 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 16:13:35 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-02 16:13:35 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-stack
UPDATE_ROLLBACK_COMPLETE

2025-04-02 16:13:35 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nUPDATE_ROLLBACK_COMPLETE\n', 'uuid': '88c3a983-a19d-45ef-89b1-2aa75ce4c194'}
2025-04-02 16:13:35 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-02 16:13:35 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 16:13:35 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: failed
2025-04-02 16:13:35 - uvicorn.access - INFO - 127.0.0.1:65381 - "POST /build/ HTTP/1.1" 200
2025-04-02 16:17:28 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-02 16:17:28 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-02 16:17:28 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: a9309b66-ff5b-46d0-abfe-b534e35c7914
2025-04-02 16:17:28 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-02 16:17:28 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-02 16:17:28 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 16:17:28 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 16:17:28 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-02 16:17:28 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-02 16:17:28 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 16:17:28 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 16:17:28 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 16:17:28 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 16:17:28 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 16:17:28 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 16:17:28 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 16:17:28 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-02 16:17:29 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-02 16:17:29 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': 'a9309b66-ff5b-46d0-abfe-b534e35c7914'}
2025-04-02 16:17:29 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-02 16:17:29 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 16:17:29 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-02 16:17:29 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 16:17:29 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 16:17:29 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-02 16:17:30 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-02 16:17:30 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': 'a9309b66-ff5b-46d0-abfe-b534e35c7914'}
2025-04-02 16:17:30 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-02 16:17:30 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 16:17:30 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-02 16:17:30 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-02 16:17:30 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 16:17:30 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 16:17:30 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-02 16:17:30 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-02 16:17:30 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 16:17:30 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 16:17:30 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 16:17:30 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 16:17:30 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 16:17:30 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 16:17:30 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 16:17:30 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-02 16:21:13 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - ecs-jenkins-stack

2025-04-02 16:21:13 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - ecs-jenkins-stack\n', 'uuid': 'a9309b66-ff5b-46d0-abfe-b534e35c7914'}
2025-04-02 16:21:13 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-02 16:21:13 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-02 16:21:13 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-02 16:21:13 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 16:21:13 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 16:21:13 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-02 16:21:14 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-stack
UPDATE_COMPLETE

2025-04-02 16:21:14 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nUPDATE_COMPLETE\n', 'uuid': 'a9309b66-ff5b-46d0-abfe-b534e35c7914'}
2025-04-02 16:21:14 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-02 16:21:14 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-02 16:21:14 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: success
2025-04-02 16:21:14 - uvicorn.access - INFO - 127.0.0.1:65449 - "POST /build/ HTTP/1.1" 200
2025-04-02 16:37:22 - services.status_service - INFO - No active record for 'ecs-jenkins'. Using most recent record (UUID: a9309b66-ff5b-46d0-abfe-b534e35c7914, action: build).
2025-04-02 16:37:22 - services.status_service - DEBUG - Found 4 step(s) for record UUID: a9309b66-ff5b-46d0-abfe-b534e35c7914
2025-04-02 16:37:22 - services.status_service - DEBUG - Status response constructed: {'uuid': 'a9309b66-ff5b-46d0-abfe-b534e35c7914', 'application_name': 'ecs-jenkins', 'action': 'build', 'status': 'success', 'steps': [{'id': 51, 'task_name': 'ecs-jenkins-instance-profile', 'step_name': 'deploy cfn', 'status': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': 'a9309b66-ff5b-46d0-abfe-b534e35c7914'}, 'timestamp': '2025-04-02T16:17:29.510811', 'uuid': 'a9309b66-ff5b-46d0-abfe-b534e35c7914'}, {'id': 52, 'task_name': 'ecs-jenkins-instance-profile', 'step_name': 'status', 'status': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': 'a9309b66-ff5b-46d0-abfe-b534e35c7914'}, 'timestamp': '2025-04-02T16:17:30.255281', 'uuid': 'a9309b66-ff5b-46d0-abfe-b534e35c7914'}, {'id': 53, 'task_name': 'ecs-jenkins', 'step_name': 'deploy cfn', 'status': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - ecs-jenkins-stack\n', 'uuid': 'a9309b66-ff5b-46d0-abfe-b534e35c7914'}, 'timestamp': '2025-04-02T16:21:13.911196', 'uuid': 'a9309b66-ff5b-46d0-abfe-b534e35c7914'}, {'id': 54, 'task_name': 'ecs-jenkins', 'step_name': 'status', 'status': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nUPDATE_COMPLETE\n', 'uuid': 'a9309b66-ff5b-46d0-abfe-b534e35c7914'}, 'timestamp': '2025-04-02T16:21:14.703894', 'uuid': 'a9309b66-ff5b-46d0-abfe-b534e35c7914'}]}
2025-04-02 16:37:22 - uvicorn.access - INFO - 127.0.0.1:49383 - "GET /status/?application_name=ecs-jenkins HTTP/1.1" 200
2025-04-02 16:37:30 - services.unbuild_service - INFO - Starting unbuild for component: ecs-jenkins
2025-04-02 16:37:30 - services.unbuild_service - INFO - Using build_id 'a9309b66-ff5b-46d0-abfe-b534e35c7914' for unbuild of component: ecs-jenkins
2025-04-02 16:37:30 - services.base_service - DEBUG - Updating application record with build_id: a9309b66-ff5b-46d0-abfe-b534e35c7914, changes: {'action': 'unbuild', 'status': 'started'}
2025-04-02 16:37:30 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x10a56ac10>
2025-04-02 16:37:30 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-02 16:37:30 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-02 16:37:30 - services.unbuild_service - INFO - Executing unbuild task: ECS-Jenkins-Instance-Profile
2025-04-02 16:37:30 - services.unbuild_service - DEBUG - Preparing to destroy resource 'ecs-jenkins-instance-profile'
2025-04-02 16:37:30 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-02 16:37:30 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 16:37:30 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 16:37:30 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-02 16:37:30 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-02 16:37:30 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 16:37:30 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 16:37:30 - services.unbuild_service - DEBUG - Found destroy template for resource 'ecs-jenkins-instance-profile': resources/ecs-jenkins-instance-profile/destroy.sh.j2
2025-04-02 16:37:30 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/destroy.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-02 16:37:30 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 16:37:30 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/destroy.sh
2025-04-02 16:38:02 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Deleting CloudFormation Stack: ecs-jenkins-instance-profile-stack
Waiting for stack deletion to complete...
Stack ecs-jenkins-instance-profile-stack has been successfully deleted.

2025-04-02 16:38:02 - services.unbuild_service - DEBUG - Destroy result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: ecs-jenkins-instance-profile-stack\nWaiting for stack deletion to complete...\nStack ecs-jenkins-instance-profile-stack has been successfully deleted.\n', 'uuid': 'a9309b66-ff5b-46d0-abfe-b534e35c7914'}
2025-04-02 16:38:02 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: destroy
2025-04-02 16:38:02 - services.base_service - DEBUG - Status updated successfully for step: destroy
2025-04-02 16:38:02 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: ECS-Jenkins-Instance-Profile
2025-04-02 16:38:02 - services.base_service - DEBUG - Status updated successfully for step: ECS-Jenkins-Instance-Profile
2025-04-02 16:38:02 - services.unbuild_service - INFO - Executing unbuild task: ECS-Jenkins
2025-04-02 16:38:02 - services.unbuild_service - DEBUG - Preparing to destroy resource 'ecs-jenkins'
2025-04-02 16:38:02 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-02 16:38:02 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-02 16:38:02 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-02 16:38:02 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-02 16:38:02 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-02 16:38:02 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 16:38:02 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 16:38:02 - services.unbuild_service - DEBUG - Found destroy template for resource 'ecs-jenkins': resources/ecs-jenkins/destroy.sh.j2
2025-04-02 16:38:02 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/destroy.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-02 16:38:02 - services.base_service - DEBUG - Template rendered successfully.
2025-04-02 16:38:02 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/destroy.sh
2025-04-02 16:41:35 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Deleting CloudFormation Stack: ecs-jenkins-stack
Waiting for stack deletion to complete...
Stack ecs-jenkins-stack has been successfully deleted.

2025-04-02 16:41:35 - services.unbuild_service - DEBUG - Destroy result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: ecs-jenkins-stack\nWaiting for stack deletion to complete...\nStack ecs-jenkins-stack has been successfully deleted.\n', 'uuid': 'a9309b66-ff5b-46d0-abfe-b534e35c7914'}
2025-04-02 16:41:35 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: destroy
2025-04-02 16:41:35 - services.base_service - DEBUG - Status updated successfully for step: destroy
2025-04-02 16:41:35 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: ECS-Jenkins
2025-04-02 16:41:35 - services.base_service - DEBUG - Status updated successfully for step: ECS-Jenkins
2025-04-02 16:41:35 - services.unbuild_service - INFO - Unbuild process completed successfully for component: ecs-jenkins
2025-04-02 16:41:35 - services.base_service - DEBUG - Deleting application record with build_id: a9309b66-ff5b-46d0-abfe-b534e35c7914
2025-04-02 16:41:35 - services.base_service - DEBUG - Application record with build_id a9309b66-ff5b-46d0-abfe-b534e35c7914 deleted.
2025-04-02 16:41:35 - uvicorn.access - INFO - 127.0.0.1:49385 - "POST /unbuild/ HTTP/1.1" 200
2025-04-03 09:50:31 - uvicorn.error - INFO - Shutting down
2025-04-03 09:50:31 - uvicorn.error - INFO - Waiting for application shutdown.
2025-04-03 09:50:31 - uvicorn.error - INFO - Application shutdown complete.
2025-04-03 09:50:31 - uvicorn.error - INFO - Finished server process [96193]
2025-04-03 09:50:31 - uvicorn.error - INFO - Stopping reloader process [50374]
2025-04-03 09:53:12 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-04-03 09:53:12 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-04-03 09:53:12 - uvicorn.error - INFO - Started reloader process [83338] using StatReload
2025-04-03 09:53:13 - asyncio - DEBUG - Using selector: KqueueSelector
2025-04-03 09:53:13 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-04-03 09:53:13 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-04-03 09:53:13 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-04-03 09:53:13 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-04-03 09:53:13 - uvicorn.error - INFO - Started server process [83340]
2025-04-03 09:53:13 - uvicorn.error - INFO - Waiting for application startup.
2025-04-03 09:53:13 - uvicorn.error - INFO - Application startup complete.
2025-04-03 09:53:18 - services.status_service - INFO - No active record for 'ecs-jenkins'. Using most recent record (UUID: 88c3a983-a19d-45ef-89b1-2aa75ce4c194, action: build).
2025-04-03 09:53:18 - services.status_service - DEBUG - Found 4 step(s) for record UUID: 88c3a983-a19d-45ef-89b1-2aa75ce4c194
2025-04-03 09:53:18 - services.status_service - DEBUG - Status response constructed: {'uuid': '88c3a983-a19d-45ef-89b1-2aa75ce4c194', 'application_name': 'ecs-jenkins', 'action': 'build', 'status': 'failed', 'steps': [{'id': 47, 'task_name': 'ecs-jenkins-instance-profile', 'step_name': 'deploy cfn', 'status': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': '88c3a983-a19d-45ef-89b1-2aa75ce4c194'}, 'timestamp': '2025-04-02T16:12:21.653123', 'uuid': '88c3a983-a19d-45ef-89b1-2aa75ce4c194'}, {'id': 48, 'task_name': 'ecs-jenkins-instance-profile', 'step_name': 'status', 'status': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': '88c3a983-a19d-45ef-89b1-2aa75ce4c194'}, 'timestamp': '2025-04-02T16:12:22.391201', 'uuid': '88c3a983-a19d-45ef-89b1-2aa75ce4c194'}, {'id': 49, 'task_name': 'ecs-jenkins', 'step_name': 'deploy cfn', 'status': {'resource': 'ecs-jenkins', 'status': 'error', 'message': '\nFailed to create/update the stack. Run the following command\nto fetch the list of events leading up to the failure\naws cloudformation describe-stack-events --stack-name ecs-jenkins-stack\n', 'uuid': '88c3a983-a19d-45ef-89b1-2aa75ce4c194'}, 'timestamp': '2025-04-02T16:13:35.163975', 'uuid': '88c3a983-a19d-45ef-89b1-2aa75ce4c194'}, {'id': 50, 'task_name': 'ecs-jenkins', 'step_name': 'status', 'status': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nUPDATE_ROLLBACK_COMPLETE\n', 'uuid': '88c3a983-a19d-45ef-89b1-2aa75ce4c194'}, 'timestamp': '2025-04-02T16:13:35.924718', 'uuid': '88c3a983-a19d-45ef-89b1-2aa75ce4c194'}]}
2025-04-03 09:53:18 - uvicorn.access - INFO - 127.0.0.1:54865 - "GET /status/?application_name=ecs-jenkins HTTP/1.1" 200
2025-04-03 09:53:30 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-03 09:53:30 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-03 09:53:30 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: e0217be7-06a9-4d83-b621-59ace5dc857a
2025-04-03 09:53:30 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-03 09:53:30 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-03 09:53:30 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-03 09:53:30 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-03 09:53:30 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-03 09:53:30 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-03 09:53:30 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-03 09:53:30 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-03 09:53:30 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-03 09:53:30 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-03 09:53:30 - services.base_service - DEBUG - Template rendered successfully.
2025-04-03 09:53:30 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-03 09:53:30 - services.base_service - DEBUG - Template rendered successfully.
2025-04-03 09:53:30 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-03 09:56:38 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - ecs-jenkins-instance-profile-stack

2025-04-03 09:56:38 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - ecs-jenkins-instance-profile-stack\n', 'uuid': 'e0217be7-06a9-4d83-b621-59ace5dc857a'}
2025-04-03 09:56:38 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-03 09:56:38 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-03 09:56:38 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-03 09:56:38 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-03 09:56:38 - services.base_service - DEBUG - Template rendered successfully.
2025-04-03 09:56:38 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-03 09:56:39 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-03 09:56:39 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': 'e0217be7-06a9-4d83-b621-59ace5dc857a'}
2025-04-03 09:56:39 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-03 09:56:39 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-03 09:56:39 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-03 09:56:39 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-03 09:56:39 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-03 09:56:39 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-03 09:56:39 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-03 09:56:39 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-03 09:56:39 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-03 09:56:39 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-03 09:56:39 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-03 09:56:39 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-03 09:56:39 - services.base_service - DEBUG - Template rendered successfully.
2025-04-03 09:56:39 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-03 09:56:39 - services.base_service - DEBUG - Template rendered successfully.
2025-04-03 09:56:39 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-03 10:08:22 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - ecs-jenkins-stack

2025-04-03 10:08:22 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - ecs-jenkins-stack\n', 'uuid': 'e0217be7-06a9-4d83-b621-59ace5dc857a'}
2025-04-03 10:08:22 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-03 10:08:22 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-03 10:08:22 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-03 10:08:22 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-03 10:08:22 - services.base_service - DEBUG - Template rendered successfully.
2025-04-03 10:08:22 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-03 10:08:23 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-stack
CREATE_COMPLETE

2025-04-03 10:08:23 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nCREATE_COMPLETE\n', 'uuid': 'e0217be7-06a9-4d83-b621-59ace5dc857a'}
2025-04-03 10:08:23 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-03 10:08:23 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-03 10:08:23 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: success
2025-04-03 10:08:23 - uvicorn.access - INFO - 127.0.0.1:54866 - "POST /build/ HTTP/1.1" 200
2025-04-03 10:30:40 - uvicorn.error - INFO - Shutting down
2025-04-03 10:30:40 - uvicorn.error - INFO - Waiting for application shutdown.
2025-04-03 10:30:40 - uvicorn.error - INFO - Application shutdown complete.
2025-04-03 10:30:40 - uvicorn.error - INFO - Finished server process [83340]
2025-04-03 10:30:40 - uvicorn.error - INFO - Stopping reloader process [83338]
2025-04-04 09:58:36 - uvicorn.error - INFO - Will watch for changes in these directories: ['/Users/fan.jin/work/py_builder']
2025-04-04 09:58:36 - uvicorn.error - INFO - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-04-04 09:58:36 - uvicorn.error - INFO - Started reloader process [86170] using StatReload
2025-04-04 09:58:36 - asyncio - DEBUG - Using selector: KqueueSelector
2025-04-04 09:58:36 - passlib.utils.compat - DEBUG - loaded lazy attr 'SafeConfigParser': <class 'configparser.ConfigParser'>
2025-04-04 09:58:36 - passlib.utils.compat - DEBUG - loaded lazy attr 'NativeStringIO': <class '_io.StringIO'>
2025-04-04 09:58:36 - passlib.utils.compat - DEBUG - loaded lazy attr 'BytesIO': <class '_io.BytesIO'>
2025-04-04 09:58:37 - passlib.registry - DEBUG - registered 'bcrypt' handler: <class 'passlib.handlers.bcrypt.bcrypt'>
2025-04-04 09:58:37 - uvicorn.error - INFO - Started server process [86172]
2025-04-04 09:58:37 - uvicorn.error - INFO - Waiting for application startup.
2025-04-04 09:58:37 - uvicorn.error - INFO - Application startup complete.
2025-04-04 09:59:15 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-04 09:59:15 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-04 09:59:15 - services.build_service - INFO - Starting build for 'ecs-jenkins' with build_id: fb95e3ae-ec2c-4f3e-9682-f717afeff2b8
2025-04-04 09:59:15 - services.build_service - INFO - Executing task 'ECS-Jenkins-Instance-Profile' for resource: ecs-jenkins-instance-profile (action: build)
2025-04-04 09:59:15 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-04 09:59:15 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-04 09:59:15 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-04 09:59:15 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-04 09:59:15 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-04 09:59:15 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-04 09:59:15 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-04 09:59:15 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-04 09:59:15 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-04 09:59:15 - services.base_service - DEBUG - Template rendered successfully.
2025-04-04 09:59:15 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-04 09:59:15 - services.base_service - DEBUG - Template rendered successfully.
2025-04-04 09:59:15 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/deploy_cfn.sh
2025-04-04 09:59:17 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-instance-profile-stack in ap-southeast-2

Waiting for changeset to be created..

No changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date

2025-04-04 09:59:17 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-instance-profile-stack in ap-southeast-2\n\nWaiting for changeset to be created..\n\nNo changes to deploy. Stack ecs-jenkins-instance-profile-stack is up to date\n', 'uuid': 'fb95e3ae-ec2c-4f3e-9682-f717afeff2b8'}
2025-04-04 09:59:17 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: deploy cfn
2025-04-04 09:59:17 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-04 09:59:17 - services.build_service - DEBUG - Running step for resource: ecs-jenkins-instance-profile
2025-04-04 09:59:17 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-04 09:59:17 - services.base_service - DEBUG - Template rendered successfully.
2025-04-04 09:59:17 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/status.sh
2025-04-04 09:59:18 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-instance-profile-stack
CREATE_COMPLETE

2025-04-04 09:59:18 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-instance-profile-stack\nCREATE_COMPLETE\n', 'uuid': 'fb95e3ae-ec2c-4f3e-9682-f717afeff2b8'}
2025-04-04 09:59:18 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: status
2025-04-04 09:59:18 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-04 09:59:18 - services.build_service - INFO - Executing task 'ECS-Jenkins' for resource: ecs-jenkins (action: build)
2025-04-04 09:59:18 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-04 09:59:18 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-04 09:59:18 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-04 09:59:18 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-04 09:59:18 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-04 09:59:18 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-04 09:59:18 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-04 09:59:18 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-04 09:59:18 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/deploy_cfn.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-04 09:59:18 - services.base_service - DEBUG - Template rendered successfully.
2025-04-04 09:59:18 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/cfn.yml.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-04 09:59:18 - services.base_service - DEBUG - Template rendered successfully.
2025-04-04 09:59:18 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/deploy_cfn.sh
2025-04-04 10:02:01 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ap-southeast-2
Deploying ecs-jenkins-stack in ap-southeast-2

Waiting for changeset to be created..
Waiting for stack create/update to complete
Successfully created/updated stack - ecs-jenkins-stack

2025-04-04 10:02:01 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ap-southeast-2\nDeploying ecs-jenkins-stack in ap-southeast-2\n\nWaiting for changeset to be created..\nWaiting for stack create/update to complete\nSuccessfully created/updated stack - ecs-jenkins-stack\n', 'uuid': 'fb95e3ae-ec2c-4f3e-9682-f717afeff2b8'}
2025-04-04 10:02:01 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: deploy cfn
2025-04-04 10:02:01 - services.base_service - DEBUG - Status updated successfully for step: deploy cfn
2025-04-04 10:02:01 - services.build_service - DEBUG - Running step for resource: ecs-jenkins
2025-04-04 10:02:01 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/status.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-04 10:02:01 - services.base_service - DEBUG - Template rendered successfully.
2025-04-04 10:02:01 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/status.sh
2025-04-04 10:02:02 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Check CloudFormation Stack: ecs-jenkins-stack
UPDATE_COMPLETE

2025-04-04 10:02:02 - services.build_service - DEBUG - Step result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nCheck CloudFormation Stack: ecs-jenkins-stack\nUPDATE_COMPLETE\n', 'uuid': 'fb95e3ae-ec2c-4f3e-9682-f717afeff2b8'}
2025-04-04 10:02:02 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: status
2025-04-04 10:02:02 - services.base_service - DEBUG - Status updated successfully for step: status
2025-04-04 10:02:02 - services.build_service - INFO - Build for 'ecs-jenkins' completed with status: success
2025-04-04 10:02:02 - uvicorn.access - INFO - 127.0.0.1:50493 - "POST /build/ HTTP/1.1" 200
2025-04-04 10:07:12 - services.unbuild_service - INFO - Starting unbuild for component: ecs-jenkins
2025-04-04 10:07:12 - services.unbuild_service - INFO - Using build_id 'fb95e3ae-ec2c-4f3e-9682-f717afeff2b8' for unbuild of component: ecs-jenkins
2025-04-04 10:07:12 - services.base_service - DEBUG - Updating application record with build_id: fb95e3ae-ec2c-4f3e-9682-f717afeff2b8, changes: {'action': 'unbuild', 'status': 'started'}
2025-04-04 10:07:12 - services.base_service - DEBUG - Application record updated: <models.Application object at 0x103e1fd90>
2025-04-04 10:07:12 - services.base_service - DEBUG - Loading YAML file: tasks/ecs-jenkins.yml
2025-04-04 10:07:12 - services.base_service - DEBUG - YAML file tasks/ecs-jenkins.yml loaded successfully.
2025-04-04 10:07:12 - services.unbuild_service - INFO - Executing unbuild task: ECS-Jenkins-Instance-Profile
2025-04-04 10:07:12 - services.unbuild_service - DEBUG - Preparing to destroy resource 'ecs-jenkins-instance-profile'
2025-04-04 10:07:12 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins-instance-profile, environment: np
2025-04-04 10:07:12 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-04 10:07:12 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-04 10:07:12 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins-instance-profile/np.yml
2025-04-04 10:07:12 - services.base_service - DEBUG - YAML file environments/ecs-jenkins-instance-profile/np.yml loaded successfully.
2025-04-04 10:07:12 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-04 10:07:12 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-04 10:07:12 - services.unbuild_service - DEBUG - Found destroy template for resource 'ecs-jenkins-instance-profile': resources/ecs-jenkins-instance-profile/destroy.sh.j2
2025-04-04 10:07:12 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins-instance-profile/destroy.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-instance-profile-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile'}
2025-04-04 10:07:12 - services.base_service - DEBUG - Template rendered successfully.
2025-04-04 10:07:12 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins-instance-profile with script: resources/ecs-jenkins-instance-profile/destroy.sh
2025-04-04 10:07:45 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins-instance-profile succeeded: Set Default region ...
Deleting CloudFormation Stack: ecs-jenkins-instance-profile-stack
Waiting for stack deletion to complete...
Stack ecs-jenkins-instance-profile-stack has been successfully deleted.

2025-04-04 10:07:45 - services.unbuild_service - DEBUG - Destroy result for resource 'ecs-jenkins-instance-profile': {'resource': 'ecs-jenkins-instance-profile', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: ecs-jenkins-instance-profile-stack\nWaiting for stack deletion to complete...\nStack ecs-jenkins-instance-profile-stack has been successfully deleted.\n', 'uuid': 'fb95e3ae-ec2c-4f3e-9682-f717afeff2b8'}
2025-04-04 10:07:45 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: destroy
2025-04-04 10:07:45 - services.base_service - DEBUG - Status updated successfully for step: destroy
2025-04-04 10:07:45 - services.base_service - DEBUG - Updating status for task: ecs-jenkins-instance-profile, step: ECS-Jenkins-Instance-Profile
2025-04-04 10:07:45 - services.base_service - DEBUG - Status updated successfully for step: ECS-Jenkins-Instance-Profile
2025-04-04 10:07:45 - services.unbuild_service - INFO - Executing unbuild task: ECS-Jenkins
2025-04-04 10:07:45 - services.unbuild_service - DEBUG - Preparing to destroy resource 'ecs-jenkins'
2025-04-04 10:07:45 - services.base_service - DEBUG - Loading config for resource: ecs-jenkins, environment: np
2025-04-04 10:07:45 - services.base_service - DEBUG - Loading YAML file: environments/np.yml
2025-04-04 10:07:45 - services.base_service - DEBUG - YAML file environments/np.yml loaded successfully.
2025-04-04 10:07:45 - services.base_service - DEBUG - Loading YAML file: environments/ecs-jenkins/np.yml
2025-04-04 10:07:45 - services.base_service - DEBUG - YAML file environments/ecs-jenkins/np.yml loaded successfully.
2025-04-04 10:07:45 - services.base_service - DEBUG - Merged environments: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-04 10:07:45 - services.base_service - DEBUG - Configuration loaded and merged: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-04 10:07:45 - services.unbuild_service - DEBUG - Found destroy template for resource 'ecs-jenkins': resources/ecs-jenkins/destroy.sh.j2
2025-04-04 10:07:45 - services.base_service - DEBUG - Rendering template: resources/ecs-jenkins/destroy.sh.j2 with context: {'aws_region': 'ap-southeast-2', 'hosted_zone_id': 'Z08886001GS4SZB8X96PL', 'hosted_zone_name': 'unison.aws.odev.com.au', 'tooling_vpc_id': 'vpc-0be77dde55ea8ee40', 'tooling_subnet_1': 'subnet-0e6774ae18001adb9', 'tooling_subnet_2': 'subnet-07b6775993dc56641', 'tooling_subnet_3': 'subnet-0bc7684e876ce56e8', 'tooling_vpc_cidr': '10.76.10.0/24', 'app_vpc_id': 'vpc-0fca24d21c2572432', 'app_subnet_1': 'subnet-0afa3197ae5d66e4a', 'app_subnet_2': 'subnet-0439a4d8a1a5782b3', 'app_subnet_3': 'subnet-02fb3a03fef7ff732', 'app_vpc_cidr': '10.76.8.0/23', 'workload_kms_id': '1fd6841c-41e4-4fc0-a81e-634a07c29779', 'nexus_url': 'nexus.itt.aws.odev.com.au', 'key_pair': 'unisonnonprod', 'ifl_network_access_cidr': '10.0.0.0/8', 'iam_profile': 'UnisonInstanceProfileRole', 'efs_stack_name': 'Unison-EFS-Stack', 'owner': 'Unison', 'power_mgt': 'working-days-aest-7am-7pm-on-excluding-holidays', 'cost_centre': 'cc_Unison', 'application_id': 'SNSVC0002073', 'backup_optout': 'Yes', 'app_category': 'B', 'support_group': 'Unison', 'technical_service': 'Unison', 'snapshot': 'snapw', 'platform': 'linux', 'data_classification': 'Confidential', 'patch_group': 'nonprod', 'patch_cycle': 'nonprod', 'account_type': 'nonprod', 'environment': 'nonprod', 'stack_name': 'ecs-jenkins-stack', 'instance_profile_name': 'ECSJenkinsProvisioningInstanceProfile', 'instance_type': 't3a.large', 'instance_name': 'ECS-Jenkins', 'cert_arn': 'arn:aws:acm:ap-southeast-2:241049927756:certificate/cc0bee67-1020-4cc8-ac70-c59e98b344b6', 'image': 'dockerhub.itt.aws.odev.com.au/dockerjenkins2/jenkins:2.484-rhel-ubi9-jdk21-nonprod', 'host_name': 'jenkins', 'jenkins_dns': 'jenkins.unison.aws.odev.com.au', 'backup_bucket': 'unison-jenkins-nonprod'}
2025-04-04 10:07:45 - services.base_service - DEBUG - Template rendered successfully.
2025-04-04 10:07:45 - services.base_service - DEBUG - Calling subprocess for resource: ecs-jenkins with script: resources/ecs-jenkins/destroy.sh
2025-04-04 10:10:48 - services.base_service - DEBUG - Subprocess for resource ecs-jenkins succeeded: Set Default region ...
Deleting CloudFormation Stack: ecs-jenkins-stack
Waiting for stack deletion to complete...
Stack ecs-jenkins-stack has been successfully deleted.

2025-04-04 10:10:48 - services.unbuild_service - DEBUG - Destroy result for resource 'ecs-jenkins': {'resource': 'ecs-jenkins', 'status': 'success', 'message': 'Set Default region ...\nDeleting CloudFormation Stack: ecs-jenkins-stack\nWaiting for stack deletion to complete...\nStack ecs-jenkins-stack has been successfully deleted.\n', 'uuid': 'fb95e3ae-ec2c-4f3e-9682-f717afeff2b8'}
2025-04-04 10:10:48 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: destroy
2025-04-04 10:10:48 - services.base_service - DEBUG - Status updated successfully for step: destroy
2025-04-04 10:10:48 - services.base_service - DEBUG - Updating status for task: ecs-jenkins, step: ECS-Jenkins
2025-04-04 10:10:48 - services.base_service - DEBUG - Status updated successfully for step: ECS-Jenkins
2025-04-04 10:10:48 - services.unbuild_service - INFO - Unbuild process completed successfully for component: ecs-jenkins
2025-04-04 10:10:48 - services.base_service - DEBUG - Deleting application record with build_id: fb95e3ae-ec2c-4f3e-9682-f717afeff2b8
2025-04-04 10:10:48 - services.base_service - DEBUG - Application record with build_id fb95e3ae-ec2c-4f3e-9682-f717afeff2b8 deleted.
2025-04-04 10:10:48 - uvicorn.access - INFO - 127.0.0.1:50695 - "POST /unbuild/ HTTP/1.1" 200
